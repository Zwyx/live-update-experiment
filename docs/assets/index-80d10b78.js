(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gl={exports:{}},Ai={},ml={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=Symbol.for("react.element"),Df=Symbol.for("react.portal"),Uf=Symbol.for("react.fragment"),_f=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),jf=Symbol.for("react.provider"),zf=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),Gf=Symbol.for("react.memo"),Vf=Symbol.for("react.lazy"),os=Symbol.iterator;function Wf(e){return e===null||typeof e!="object"?null:(e=os&&e[os]||e["@@iterator"],typeof e=="function"?e:null)}var yl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cl=Object.assign,Sl={};function Ln(e,t,n){this.props=e,this.context=t,this.refs=Sl,this.updater=n||yl}Ln.prototype.isReactComponent={};Ln.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ln.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ol(){}Ol.prototype=Ln.prototype;function ca(e,t,n){this.props=e,this.context=t,this.refs=Sl,this.updater=n||yl}var da=ca.prototype=new Ol;da.constructor=ca;Cl(da,Ln.prototype);da.isPureReactComponent=!0;var as=Array.isArray,El=Object.prototype.hasOwnProperty,ha={current:null},wl={key:!0,ref:!0,__self:!0,__source:!0};function Rl(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)El.call(t,r)&&!wl.hasOwnProperty(r)&&(i[r]=t[r]);var g=arguments.length-2;if(g===1)i.children=n;else if(1<g){for(var v=Array(g),m=0;m<g;m++)v[m]=arguments[m+2];i.children=v}if(e&&e.defaultProps)for(r in g=e.defaultProps,g)i[r]===void 0&&(i[r]=g[r]);return{$$typeof:Sr,type:e,key:o,ref:a,props:i,_owner:ha.current}}function Qf(e,t){return{$$typeof:Sr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sr}function Kf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ss=/\/+/g;function Wi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kf(""+e.key):t.toString(36)}function Vr(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Sr:case Df:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Wi(a,0):r,as(i)?(n="",e!=null&&(n=e.replace(ss,"$&/")+"/"),Vr(i,t,n,"",function(m){return m})):i!=null&&(pa(i)&&(i=Qf(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ss,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",as(e))for(var g=0;g<e.length;g++){o=e[g];var v=r+Wi(o,g);a+=Vr(o,t,n,v,i)}else if(v=Wf(e),typeof v=="function")for(e=v.call(e),g=0;!(o=e.next()).done;)o=o.value,v=r+Wi(o,g++),a+=Vr(o,t,n,v,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ar(e,t,n){if(e==null)return e;var r=[],i=0;return Vr(e,r,"","",function(o){return t.call(n,o,i++)}),r}function $f(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ke={current:null},Wr={transition:null},Jf={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Wr,ReactCurrentOwner:ha};re.Children={map:Ar,forEach:function(e,t,n){Ar(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ar(e,function(){t++}),t},toArray:function(e){return Ar(e,function(t){return t})||[]},only:function(e){if(!pa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Ln;re.Fragment=Uf;re.Profiler=Bf;re.PureComponent=ca;re.StrictMode=_f;re.Suspense=Hf;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jf;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cl({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=ha.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(v in t)El.call(t,v)&&!wl.hasOwnProperty(v)&&(r[v]=t[v]===void 0&&g!==void 0?g[v]:t[v])}var v=arguments.length-2;if(v===1)r.children=n;else if(1<v){g=Array(v);for(var m=0;m<v;m++)g[m]=arguments[m+2];r.children=g}return{$$typeof:Sr,type:e.type,key:i,ref:o,props:r,_owner:a}};re.createContext=function(e){return e={$$typeof:zf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jf,_context:e},e.Consumer=e};re.createElement=Rl;re.createFactory=function(e){var t=Rl.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Ff,render:e}};re.isValidElement=pa;re.lazy=function(e){return{$$typeof:Vf,_payload:{_status:-1,_result:e},_init:$f}};re.memo=function(e,t){return{$$typeof:Gf,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Wr.transition;Wr.transition={};try{e()}finally{Wr.transition=t}};re.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};re.useCallback=function(e,t){return ke.current.useCallback(e,t)};re.useContext=function(e){return ke.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return ke.current.useDeferredValue(e)};re.useEffect=function(e,t){return ke.current.useEffect(e,t)};re.useId=function(){return ke.current.useId()};re.useImperativeHandle=function(e,t,n){return ke.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return ke.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return ke.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return ke.current.useMemo(e,t)};re.useReducer=function(e,t,n){return ke.current.useReducer(e,t,n)};re.useRef=function(e){return ke.current.useRef(e)};re.useState=function(e){return ke.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return ke.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return ke.current.useTransition()};re.version="18.2.0";ml.exports=re;var Xt=ml.exports;const Xf=vl(Xt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=Xt,bf=Symbol.for("react.element"),Zf=Symbol.for("react.fragment"),qf=Object.prototype.hasOwnProperty,ec=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tc={key:!0,ref:!0,__self:!0,__source:!0};function Tl(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)qf.call(t,r)&&!tc.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:bf,type:e,key:o,ref:a,props:i,_owner:ec.current}}Ai.Fragment=Zf;Ai.jsx=Tl;Ai.jsxs=Tl;gl.exports=Ai;var _e=gl.exports,yo={},Al={exports:{}},Ke={},xl={exports:{}},Il={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,j){var F=B.length;B.push(j);e:for(;0<F;){var V=F-1>>>1,W=B[V];if(0<i(W,j))B[V]=j,B[F]=W,F=V;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],F=B.pop();if(F!==j){B[0]=F;e:for(var V=0,W=B.length,G=W>>>1;V<G;){var I=2*(V+1)-1,U=B[I],D=I+1,z=B[D];if(0>i(U,F))D<W&&0>i(z,U)?(B[V]=z,B[D]=F,V=D):(B[V]=U,B[I]=F,V=I);else if(D<W&&0>i(z,F))B[V]=z,B[D]=F,V=D;else break e}}return j}function i(B,j){var F=B.sortIndex-j.sortIndex;return F!==0?F:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,g=a.now();e.unstable_now=function(){return a.now()-g}}var v=[],m=[],w=1,R=null,O=3,T=!1,d=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(B){for(var j=n(m);j!==null;){if(j.callback===null)r(m);else if(j.startTime<=B)r(m),j.sortIndex=j.expirationTime,t(v,j);else break;j=n(m)}}function C(B){if(E=!1,p(B),!d)if(n(v)!==null)d=!0,_(f);else{var j=n(m);j!==null&&k(C,j.startTime-B)}}function f(B,j){d=!1,E&&(E=!1,y(l),l=-1),T=!0;var F=O;try{for(p(j),R=n(v);R!==null&&(!(R.expirationTime>j)||B&&!A());){var V=R.callback;if(typeof V=="function"){R.callback=null,O=R.priorityLevel;var W=V(R.expirationTime<=j);j=e.unstable_now(),typeof W=="function"?R.callback=W:R===n(v)&&r(v),p(j)}else r(v);R=n(v)}if(R!==null)var G=!0;else{var I=n(m);I!==null&&k(C,I.startTime-j),G=!1}return G}finally{R=null,O=F,T=!1}}var u=!1,s=null,l=-1,S=5,h=-1;function A(){return!(e.unstable_now()-h<S)}function M(){if(s!==null){var B=e.unstable_now();h=B;var j=!0;try{j=s(!0,B)}finally{j?x():(u=!1,s=null)}}else u=!1}var x;if(typeof c=="function")x=function(){c(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,L=N.port2;N.port1.onmessage=M,x=function(){L.postMessage(null)}}else x=function(){P(M,0)};function _(B){s=B,u||(u=!0,x())}function k(B,j){l=P(function(){B(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){d||T||(d=!0,_(f))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(B){switch(O){case 1:case 2:case 3:var j=3;break;default:j=O}var F=O;O=j;try{return B()}finally{O=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=O;O=B;try{return j()}finally{O=F}},e.unstable_scheduleCallback=function(B,j,F){var V=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,B={id:w++,callback:j,priorityLevel:B,startTime:F,expirationTime:W,sortIndex:-1},F>V?(B.sortIndex=F,t(m,B),n(v)===null&&B===n(m)&&(E?(y(l),l=-1):E=!0,k(C,F-V))):(B.sortIndex=W,t(v,B),d||T||(d=!0,_(f))),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var j=O;return function(){var F=O;O=j;try{return B.apply(this,arguments)}finally{O=F}}}})(Il);xl.exports=Il;var nc=xl.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=Xt,Qe=nc;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ml=new Set,rr={};function rn(e,t){Tn(e,t),Tn(e+"Capture",t)}function Tn(e,t){for(rr[e]=t,e=0;e<t.length;e++)Ml.add(t[e])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=Object.prototype.hasOwnProperty,rc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ls={},us={};function ic(e){return Co.call(us,e)?!0:Co.call(ls,e)?!1:rc.test(e)?us[e]=!0:(ls[e]=!0,!1)}function oc(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ac(e,t,n,r){if(t===null||typeof t>"u"||oc(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var va=/[\-:]([a-z])/g;function ga(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(va,ga);Te[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(va,ga);Te[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(va,ga);Te[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function ma(e,t,n,r){var i=Te.hasOwnProperty(t)?Te[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ac(t,n,i,r)&&(n=null),r||i===null?ic(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wt=Pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xr=Symbol.for("react.element"),sn=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),ya=Symbol.for("react.strict_mode"),So=Symbol.for("react.profiler"),Nl=Symbol.for("react.provider"),Ll=Symbol.for("react.context"),Ca=Symbol.for("react.forward_ref"),Oo=Symbol.for("react.suspense"),Eo=Symbol.for("react.suspense_list"),Sa=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),kl=Symbol.for("react.offscreen"),fs=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=fs&&e[fs]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,Qi;function Wn(e){if(Qi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qi=t&&t[1]||""}return`
`+Qi+e}var Ki=!1;function $i(e,t){if(!e||Ki)return"";Ki=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var r=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){r=m}e.call(t.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,g=o.length-1;1<=a&&0<=g&&i[a]!==o[g];)g--;for(;1<=a&&0<=g;a--,g--)if(i[a]!==o[g]){if(a!==1||g!==1)do if(a--,g--,0>g||i[a]!==o[g]){var v=`
`+i[a].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=a&&0<=g);break}}}finally{Ki=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wn(e):""}function sc(e){switch(e.tag){case 5:return Wn(e.type);case 16:return Wn("Lazy");case 13:return Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 2:case 15:return e=$i(e.type,!1),e;case 11:return e=$i(e.type.render,!1),e;case 1:return e=$i(e.type,!0),e;default:return""}}function wo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ln:return"Fragment";case sn:return"Portal";case So:return"Profiler";case ya:return"StrictMode";case Oo:return"Suspense";case Eo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ll:return(e.displayName||"Context")+".Consumer";case Nl:return(e._context.displayName||"Context")+".Provider";case Ca:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sa:return t=e.displayName||null,t!==null?t:wo(e.type)||"Memo";case Tt:t=e._payload,e=e._init;try{return wo(e(t))}catch{}}return null}function lc(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wo(t);case 8:return t===ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uc(e){var t=Dl(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ir(e){e._valueTracker||(e._valueTracker=uc(e))}function Ul(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dl(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ro(e,t){var n=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cs(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _l(e,t){t=t.checked,t!=null&&ma(e,"checked",t,!1)}function To(e,t){_l(e,t);var n=zt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ao(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ao(e,t.type,zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ds(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ao(e,t,n){(t!=="number"||ti(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qn=Array.isArray;function Cn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hs(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(Qn(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zt(n)}}function Bl(e,t){var n=zt(t.value),r=zt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ps(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Io(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pr,zl=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fc=["Webkit","ms","Moz","O"];Object.keys(Jn).forEach(function(e){fc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jn[t]=Jn[e]})});function Fl(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jn.hasOwnProperty(e)&&Jn[e]?(""+t).trim():t+"px"}function Hl(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fl(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var cc=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,t){if(t){if(cc[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Mo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=null;function Oa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lo=null,Sn=null,On=null;function vs(e){if(e=wr(e)){if(typeof Lo!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Ni(t),Lo(e.stateNode,e.type,t))}}function Gl(e){Sn?On?On.push(e):On=[e]:Sn=e}function Vl(){if(Sn){var e=Sn,t=On;if(On=Sn=null,vs(e),t)for(e=0;e<t.length;e++)vs(t[e])}}function Wl(e,t){return e(t)}function Ql(){}var Ji=!1;function Kl(e,t,n){if(Ji)return e(t,n);Ji=!0;try{return Wl(e,t,n)}finally{Ji=!1,(Sn!==null||On!==null)&&(Ql(),Vl())}}function or(e,t){var n=e.stateNode;if(n===null)return null;var r=Ni(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var ko=!1;if(Ct)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){ko=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{ko=!1}function dc(e,t,n,r,i,o,a,g,v){var m=Array.prototype.slice.call(arguments,3);try{t.apply(n,m)}catch(w){this.onError(w)}}var Xn=!1,ni=null,ri=!1,Do=null,hc={onError:function(e){Xn=!0,ni=e}};function pc(e,t,n,r,i,o,a,g,v){Xn=!1,ni=null,dc.apply(hc,arguments)}function vc(e,t,n,r,i,o,a,g,v){if(pc.apply(this,arguments),Xn){if(Xn){var m=ni;Xn=!1,ni=null}else throw Error(J(198));ri||(ri=!0,Do=m)}}function on(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $l(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gs(e){if(on(e)!==e)throw Error(J(188))}function gc(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gs(i),e;if(o===r)return gs(i),t;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,g=i.child;g;){if(g===n){a=!0,n=i,r=o;break}if(g===r){a=!0,r=i,n=o;break}g=g.sibling}if(!a){for(g=o.child;g;){if(g===n){a=!0,n=o,r=i;break}if(g===r){a=!0,r=o,n=i;break}g=g.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Jl(e){return e=gc(e),e!==null?Xl(e):null}function Xl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xl(e);if(t!==null)return t;e=e.sibling}return null}var Yl=Qe.unstable_scheduleCallback,ms=Qe.unstable_cancelCallback,mc=Qe.unstable_shouldYield,yc=Qe.unstable_requestPaint,me=Qe.unstable_now,Cc=Qe.unstable_getCurrentPriorityLevel,Ea=Qe.unstable_ImmediatePriority,bl=Qe.unstable_UserBlockingPriority,ii=Qe.unstable_NormalPriority,Sc=Qe.unstable_LowPriority,Zl=Qe.unstable_IdlePriority,xi=null,dt=null;function Oc(e){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(xi,e,void 0,(e.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:Rc,Ec=Math.log,wc=Math.LN2;function Rc(e){return e>>>=0,e===0?32:31-(Ec(e)/wc|0)|0}var Mr=64,Nr=4194304;function Kn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var g=a&~i;g!==0?r=Kn(g):(o&=a,o!==0&&(r=Kn(o)))}else a=n&~i,a!==0?r=Kn(a):o!==0&&(r=Kn(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-at(t),i=1<<n,r|=e[n],t&=~i;return r}function Tc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ac(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),g=1<<a,v=i[a];v===-1?(!(g&n)||g&r)&&(i[a]=Tc(g,t)):v<=t&&(e.expiredLanes|=g),o&=~g}}function Uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ql(){var e=Mr;return Mr<<=1,!(Mr&4194240)&&(Mr=64),e}function Xi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Or(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-at(t),e[t]=n}function xc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function wa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var oe=0;function eu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tu,Ra,nu,ru,iu,_o=!1,Lr=[],Nt=null,Lt=null,kt=null,ar=new Map,sr=new Map,xt=[],Ic="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ys(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(t.pointerId)}}function jn(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=wr(t),t!==null&&Ra(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Pc(e,t,n,r,i){switch(t){case"focusin":return Nt=jn(Nt,e,t,n,r,i),!0;case"dragenter":return Lt=jn(Lt,e,t,n,r,i),!0;case"mouseover":return kt=jn(kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ar.set(o,jn(ar.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sr.set(o,jn(sr.get(o)||null,e,t,n,r,i)),!0}return!1}function ou(e){var t=Kt(e.target);if(t!==null){var n=on(t);if(n!==null){if(t=n.tag,t===13){if(t=$l(n),t!==null){e.blockedOn=t,iu(e.priority,function(){nu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);No=r,n.target.dispatchEvent(r),No=null}else return t=wr(n),t!==null&&Ra(t),e.blockedOn=n,!1;t.shift()}return!0}function Cs(e,t,n){Qr(e)&&n.delete(t)}function Mc(){_o=!1,Nt!==null&&Qr(Nt)&&(Nt=null),Lt!==null&&Qr(Lt)&&(Lt=null),kt!==null&&Qr(kt)&&(kt=null),ar.forEach(Cs),sr.forEach(Cs)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,_o||(_o=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,Mc)))}function lr(e){function t(i){return zn(i,e)}if(0<Lr.length){zn(Lr[0],e);for(var n=1;n<Lr.length;n++){var r=Lr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Nt!==null&&zn(Nt,e),Lt!==null&&zn(Lt,e),kt!==null&&zn(kt,e),ar.forEach(t),sr.forEach(t),n=0;n<xt.length;n++)r=xt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&(n=xt[0],n.blockedOn===null);)ou(n),n.blockedOn===null&&xt.shift()}var En=wt.ReactCurrentBatchConfig,ai=!0;function Nc(e,t,n,r){var i=oe,o=En.transition;En.transition=null;try{oe=1,Ta(e,t,n,r)}finally{oe=i,En.transition=o}}function Lc(e,t,n,r){var i=oe,o=En.transition;En.transition=null;try{oe=4,Ta(e,t,n,r)}finally{oe=i,En.transition=o}}function Ta(e,t,n,r){if(ai){var i=Bo(e,t,n,r);if(i===null)oo(e,t,r,si,n),ys(e,r);else if(Pc(i,e,t,n,r))r.stopPropagation();else if(ys(e,r),t&4&&-1<Ic.indexOf(e)){for(;i!==null;){var o=wr(i);if(o!==null&&tu(o),o=Bo(e,t,n,r),o===null&&oo(e,t,r,si,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else oo(e,t,r,null,n)}}var si=null;function Bo(e,t,n,r){if(si=null,e=Oa(r),e=Kt(e),e!==null)if(t=on(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$l(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return si=e,null}function au(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cc()){case Ea:return 1;case bl:return 4;case ii:case Sc:return 16;case Zl:return 536870912;default:return 16}default:return 16}}var Pt=null,Aa=null,Kr=null;function su(){if(Kr)return Kr;var e,t=Aa,n=t.length,r,i="value"in Pt?Pt.value:Pt.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Kr=i.slice(e,1<r?1-r:void 0)}function $r(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kr(){return!0}function Ss(){return!1}function $e(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kr:Ss,this.isPropagationStopped=Ss,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=$e(kn),Er=ve({},kn,{view:0,detail:0}),kc=$e(Er),Yi,bi,Fn,Ii=ve({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fn&&(Fn&&e.type==="mousemove"?(Yi=e.screenX-Fn.screenX,bi=e.screenY-Fn.screenY):bi=Yi=0,Fn=e),Yi)},movementY:function(e){return"movementY"in e?e.movementY:bi}}),Os=$e(Ii),Dc=ve({},Ii,{dataTransfer:0}),Uc=$e(Dc),_c=ve({},Er,{relatedTarget:0}),Zi=$e(_c),Bc=ve({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),jc=$e(Bc),zc=ve({},kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fc=$e(zc),Hc=ve({},kn,{data:0}),Es=$e(Hc),Gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wc[e])?!!t[e]:!1}function Ia(){return Qc}var Kc=ve({},Er,{key:function(e){if(e.key){var t=Gc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$r(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(e){return e.type==="keypress"?$r(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$r(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$c=$e(Kc),Jc=ve({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ws=$e(Jc),Xc=ve({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),Yc=$e(Xc),bc=ve({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zc=$e(bc),qc=ve({},Ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ed=$e(qc),td=[9,13,27,32],Pa=Ct&&"CompositionEvent"in window,Yn=null;Ct&&"documentMode"in document&&(Yn=document.documentMode);var nd=Ct&&"TextEvent"in window&&!Yn,lu=Ct&&(!Pa||Yn&&8<Yn&&11>=Yn),Rs=String.fromCharCode(32),Ts=!1;function uu(e,t){switch(e){case"keyup":return td.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var un=!1;function rd(e,t){switch(e){case"compositionend":return fu(t);case"keypress":return t.which!==32?null:(Ts=!0,Rs);case"textInput":return e=t.data,e===Rs&&Ts?null:e;default:return null}}function id(e,t){if(un)return e==="compositionend"||!Pa&&uu(e,t)?(e=su(),Kr=Aa=Pt=null,un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lu&&t.locale!=="ko"?null:t.data;default:return null}}var od={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function As(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!od[e.type]:t==="textarea"}function cu(e,t,n,r){Gl(r),t=li(t,"onChange"),0<t.length&&(n=new xa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var bn=null,ur=null;function ad(e){Eu(e,0)}function Pi(e){var t=dn(e);if(Ul(t))return e}function sd(e,t){if(e==="change")return t}var du=!1;if(Ct){var qi;if(Ct){var eo="oninput"in document;if(!eo){var xs=document.createElement("div");xs.setAttribute("oninput","return;"),eo=typeof xs.oninput=="function"}qi=eo}else qi=!1;du=qi&&(!document.documentMode||9<document.documentMode)}function Is(){bn&&(bn.detachEvent("onpropertychange",hu),ur=bn=null)}function hu(e){if(e.propertyName==="value"&&Pi(ur)){var t=[];cu(t,ur,e,Oa(e)),Kl(ad,t)}}function ld(e,t,n){e==="focusin"?(Is(),bn=t,ur=n,bn.attachEvent("onpropertychange",hu)):e==="focusout"&&Is()}function ud(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(ur)}function fd(e,t){if(e==="click")return Pi(t)}function cd(e,t){if(e==="input"||e==="change")return Pi(t)}function dd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:dd;function fr(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Co.call(t,i)||!lt(e[i],t[i]))return!1}return!0}function Ps(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ms(e,t){var n=Ps(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ps(n)}}function pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vu(){for(var e=window,t=ti();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ti(e.document)}return t}function Ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hd(e){var t=vu(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pu(n.ownerDocument.documentElement,n)){if(r!==null&&Ma(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Ms(n,o);var a=Ms(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pd=Ct&&"documentMode"in document&&11>=document.documentMode,fn=null,jo=null,Zn=null,zo=!1;function Ns(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zo||fn==null||fn!==ti(r)||(r=fn,"selectionStart"in r&&Ma(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zn&&fr(Zn,r)||(Zn=r,r=li(jo,"onSelect"),0<r.length&&(t=new xa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fn)))}function Dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cn={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionend:Dr("Transition","TransitionEnd")},to={},gu={};Ct&&(gu=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);function Mi(e){if(to[e])return to[e];if(!cn[e])return e;var t=cn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gu)return to[e]=t[n];return e}var mu=Mi("animationend"),yu=Mi("animationiteration"),Cu=Mi("animationstart"),Su=Mi("transitionend"),Ou=new Map,Ls="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ht(e,t){Ou.set(e,t),rn(t,[e])}for(var no=0;no<Ls.length;no++){var ro=Ls[no],vd=ro.toLowerCase(),gd=ro[0].toUpperCase()+ro.slice(1);Ht(vd,"on"+gd)}Ht(mu,"onAnimationEnd");Ht(yu,"onAnimationIteration");Ht(Cu,"onAnimationStart");Ht("dblclick","onDoubleClick");Ht("focusin","onFocus");Ht("focusout","onBlur");Ht(Su,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),md=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function ks(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vc(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var g=r[a],v=g.instance,m=g.currentTarget;if(g=g.listener,v!==o&&i.isPropagationStopped())break e;ks(i,g,m),o=v}else for(a=0;a<r.length;a++){if(g=r[a],v=g.instance,m=g.currentTarget,g=g.listener,v!==o&&i.isPropagationStopped())break e;ks(i,g,m),o=v}}}if(ri)throw e=Do,ri=!1,Do=null,e}function ue(e,t){var n=t[Wo];n===void 0&&(n=t[Wo]=new Set);var r=e+"__bubble";n.has(r)||(wu(t,e,2,!1),n.add(r))}function io(e,t,n){var r=0;t&&(r|=4),wu(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function cr(e){if(!e[Ur]){e[Ur]=!0,Ml.forEach(function(n){n!=="selectionchange"&&(md.has(n)||io(n,!1,e),io(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ur]||(t[Ur]=!0,io("selectionchange",!1,t))}}function wu(e,t,n,r){switch(au(t)){case 1:var i=Nc;break;case 4:i=Lc;break;default:i=Ta}n=i.bind(null,t,n,e),i=void 0,!ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function oo(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var g=r.stateNode.containerInfo;if(g===i||g.nodeType===8&&g.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var v=a.tag;if((v===3||v===4)&&(v=a.stateNode.containerInfo,v===i||v.nodeType===8&&v.parentNode===i))return;a=a.return}for(;g!==null;){if(a=Kt(g),a===null)return;if(v=a.tag,v===5||v===6){r=o=a;continue e}g=g.parentNode}}r=r.return}Kl(function(){var m=o,w=Oa(n),R=[];e:{var O=Ou.get(e);if(O!==void 0){var T=xa,d=e;switch(e){case"keypress":if($r(n)===0)break e;case"keydown":case"keyup":T=$c;break;case"focusin":d="focus",T=Zi;break;case"focusout":d="blur",T=Zi;break;case"beforeblur":case"afterblur":T=Zi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Os;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Yc;break;case mu:case yu:case Cu:T=jc;break;case Su:T=Zc;break;case"scroll":T=kc;break;case"wheel":T=ed;break;case"copy":case"cut":case"paste":T=Fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=ws}var E=(t&4)!==0,P=!E&&e==="scroll",y=E?O!==null?O+"Capture":null:O;E=[];for(var c=m,p;c!==null;){p=c;var C=p.stateNode;if(p.tag===5&&C!==null&&(p=C,y!==null&&(C=or(c,y),C!=null&&E.push(dr(c,C,p)))),P)break;c=c.return}0<E.length&&(O=new T(O,d,null,n,w),R.push({event:O,listeners:E}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",O&&n!==No&&(d=n.relatedTarget||n.fromElement)&&(Kt(d)||d[St]))break e;if((T||O)&&(O=w.window===w?w:(O=w.ownerDocument)?O.defaultView||O.parentWindow:window,T?(d=n.relatedTarget||n.toElement,T=m,d=d?Kt(d):null,d!==null&&(P=on(d),d!==P||d.tag!==5&&d.tag!==6)&&(d=null)):(T=null,d=m),T!==d)){if(E=Os,C="onMouseLeave",y="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(E=ws,C="onPointerLeave",y="onPointerEnter",c="pointer"),P=T==null?O:dn(T),p=d==null?O:dn(d),O=new E(C,c+"leave",T,n,w),O.target=P,O.relatedTarget=p,C=null,Kt(w)===m&&(E=new E(y,c+"enter",d,n,w),E.target=p,E.relatedTarget=P,C=E),P=C,T&&d)t:{for(E=T,y=d,c=0,p=E;p;p=an(p))c++;for(p=0,C=y;C;C=an(C))p++;for(;0<c-p;)E=an(E),c--;for(;0<p-c;)y=an(y),p--;for(;c--;){if(E===y||y!==null&&E===y.alternate)break t;E=an(E),y=an(y)}E=null}else E=null;T!==null&&Ds(R,O,T,E,!1),d!==null&&P!==null&&Ds(R,P,d,E,!0)}}e:{if(O=m?dn(m):window,T=O.nodeName&&O.nodeName.toLowerCase(),T==="select"||T==="input"&&O.type==="file")var f=sd;else if(As(O))if(du)f=cd;else{f=ud;var u=ld}else(T=O.nodeName)&&T.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(f=fd);if(f&&(f=f(e,m))){cu(R,f,n,w);break e}u&&u(e,O,m),e==="focusout"&&(u=O._wrapperState)&&u.controlled&&O.type==="number"&&Ao(O,"number",O.value)}switch(u=m?dn(m):window,e){case"focusin":(As(u)||u.contentEditable==="true")&&(fn=u,jo=m,Zn=null);break;case"focusout":Zn=jo=fn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Ns(R,n,w);break;case"selectionchange":if(pd)break;case"keydown":case"keyup":Ns(R,n,w)}var s;if(Pa)e:{switch(e){case"compositionstart":var l="onCompositionStart";break e;case"compositionend":l="onCompositionEnd";break e;case"compositionupdate":l="onCompositionUpdate";break e}l=void 0}else un?uu(e,n)&&(l="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(l="onCompositionStart");l&&(lu&&n.locale!=="ko"&&(un||l!=="onCompositionStart"?l==="onCompositionEnd"&&un&&(s=su()):(Pt=w,Aa="value"in Pt?Pt.value:Pt.textContent,un=!0)),u=li(m,l),0<u.length&&(l=new Es(l,e,null,n,w),R.push({event:l,listeners:u}),s?l.data=s:(s=fu(n),s!==null&&(l.data=s)))),(s=nd?rd(e,n):id(e,n))&&(m=li(m,"onBeforeInput"),0<m.length&&(w=new Es("onBeforeInput","beforeinput",null,n,w),R.push({event:w,listeners:m}),w.data=s))}Eu(R,t)})}function dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function li(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=or(e,n),o!=null&&r.unshift(dr(e,o,i)),o=or(e,t),o!=null&&r.push(dr(e,o,i))),e=e.return}return r}function an(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ds(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var g=n,v=g.alternate,m=g.stateNode;if(v!==null&&v===r)break;g.tag===5&&m!==null&&(g=m,i?(v=or(n,o),v!=null&&a.unshift(dr(n,v,g))):i||(v=or(n,o),v!=null&&a.push(dr(n,v,g)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var yd=/\r\n?/g,Cd=/\u0000|\uFFFD/g;function Us(e){return(typeof e=="string"?e:""+e).replace(yd,`
`).replace(Cd,"")}function _r(e,t,n){if(t=Us(t),Us(e)!==t&&n)throw Error(J(425))}function ui(){}var Fo=null,Ho=null;function Go(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vo=typeof setTimeout=="function"?setTimeout:void 0,Sd=typeof clearTimeout=="function"?clearTimeout:void 0,_s=typeof Promise=="function"?Promise:void 0,Od=typeof queueMicrotask=="function"?queueMicrotask:typeof _s<"u"?function(e){return _s.resolve(null).then(e).catch(Ed)}:Vo;function Ed(e){setTimeout(function(){throw e})}function ao(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),lr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lr(t)}function Dt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bs(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),ct="__reactFiber$"+Dn,hr="__reactProps$"+Dn,St="__reactContainer$"+Dn,Wo="__reactEvents$"+Dn,wd="__reactListeners$"+Dn,Rd="__reactHandles$"+Dn;function Kt(e){var t=e[ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[St]||n[ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bs(e);e!==null;){if(n=e[ct])return n;e=Bs(e)}return t}e=n,n=e.parentNode}return null}function wr(e){return e=e[ct]||e[St],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Ni(e){return e[hr]||null}var Qo=[],hn=-1;function Gt(e){return{current:e}}function fe(e){0>hn||(e.current=Qo[hn],Qo[hn]=null,hn--)}function se(e,t){hn++,Qo[hn]=e.current,e.current=t}var Ft={},Me=Gt(Ft),ze=Gt(!1),Zt=Ft;function An(e,t){var n=e.type.contextTypes;if(!n)return Ft;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fe(e){return e=e.childContextTypes,e!=null}function fi(){fe(ze),fe(Me)}function js(e,t,n){if(Me.current!==Ft)throw Error(J(168));se(Me,t),se(ze,n)}function Ru(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(J(108,lc(e)||"Unknown",i));return ve({},n,r)}function ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ft,Zt=Me.current,se(Me,e),se(ze,ze.current),!0}function zs(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=Ru(e,t,Zt),r.__reactInternalMemoizedMergedChildContext=e,fe(ze),fe(Me),se(Me,e)):fe(ze),se(ze,n)}var vt=null,Li=!1,so=!1;function Tu(e){vt===null?vt=[e]:vt.push(e)}function Td(e){Li=!0,Tu(e)}function Vt(){if(!so&&vt!==null){so=!0;var e=0,t=oe;try{var n=vt;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vt=null,Li=!1}catch(i){throw vt!==null&&(vt=vt.slice(e+1)),Yl(Ea,Vt),i}finally{oe=t,so=!1}}return null}var pn=[],vn=0,di=null,hi=0,Xe=[],Ye=0,qt=null,gt=1,mt="";function Wt(e,t){pn[vn++]=hi,pn[vn++]=di,di=e,hi=t}function Au(e,t,n){Xe[Ye++]=gt,Xe[Ye++]=mt,Xe[Ye++]=qt,qt=e;var r=gt;e=mt;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,gt=1<<32-at(t)+i|n<<i|r,mt=o+e}else gt=1<<o|n<<i|r,mt=e}function Na(e){e.return!==null&&(Wt(e,1),Au(e,1,0))}function La(e){for(;e===di;)di=pn[--vn],pn[vn]=null,hi=pn[--vn],pn[vn]=null;for(;e===qt;)qt=Xe[--Ye],Xe[Ye]=null,mt=Xe[--Ye],Xe[Ye]=null,gt=Xe[--Ye],Xe[Ye]=null}var We=null,Ve=null,de=!1,ot=null;function xu(e,t){var n=be(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fs(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,We=e,Ve=Dt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,We=e,Ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qt!==null?{id:gt,overflow:mt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=be(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,We=e,Ve=null,!0):!1;default:return!1}}function Ko(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $o(e){if(de){var t=Ve;if(t){var n=t;if(!Fs(e,t)){if(Ko(e))throw Error(J(418));t=Dt(n.nextSibling);var r=We;t&&Fs(e,t)?xu(r,n):(e.flags=e.flags&-4097|2,de=!1,We=e)}}else{if(Ko(e))throw Error(J(418));e.flags=e.flags&-4097|2,de=!1,We=e}}}function Hs(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;We=e}function Br(e){if(e!==We)return!1;if(!de)return Hs(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Go(e.type,e.memoizedProps)),t&&(t=Ve)){if(Ko(e))throw Iu(),Error(J(418));for(;t;)xu(e,t),t=Dt(t.nextSibling)}if(Hs(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ve=Dt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ve=null}}else Ve=We?Dt(e.stateNode.nextSibling):null;return!0}function Iu(){for(var e=Ve;e;)e=Dt(e.nextSibling)}function xn(){Ve=We=null,de=!1}function ka(e){ot===null?ot=[e]:ot.push(e)}var Ad=wt.ReactCurrentBatchConfig;function rt(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var pi=Gt(null),vi=null,gn=null,Da=null;function Ua(){Da=gn=vi=null}function _a(e){var t=pi.current;fe(pi),e._currentValue=t}function Jo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wn(e,t){vi=e,Da=gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(je=!0),e.firstContext=null)}function qe(e){var t=e._currentValue;if(Da!==e)if(e={context:e,memoizedValue:t,next:null},gn===null){if(vi===null)throw Error(J(308));gn=e,vi.dependencies={lanes:0,firstContext:e}}else gn=gn.next=e;return t}var $t=null;function Ba(e){$t===null?$t=[e]:$t.push(e)}function Pu(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ba(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ot(e,r)}function Ot(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var At=!1;function ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ut(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ot(e,n)}return i=r.interleaved,i===null?(t.next=t,Ba(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ot(e,n)}function Jr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wa(e,n)}}function Gs(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gi(e,t,n,r){var i=e.updateQueue;At=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,g=i.shared.pending;if(g!==null){i.shared.pending=null;var v=g,m=v.next;v.next=null,a===null?o=m:a.next=m,a=v;var w=e.alternate;w!==null&&(w=w.updateQueue,g=w.lastBaseUpdate,g!==a&&(g===null?w.firstBaseUpdate=m:g.next=m,w.lastBaseUpdate=v))}if(o!==null){var R=i.baseState;a=0,w=m=v=null,g=o;do{var O=g.lane,T=g.eventTime;if((r&O)===O){w!==null&&(w=w.next={eventTime:T,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var d=e,E=g;switch(O=t,T=n,E.tag){case 1:if(d=E.payload,typeof d=="function"){R=d.call(T,R,O);break e}R=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=E.payload,O=typeof d=="function"?d.call(T,R,O):d,O==null)break e;R=ve({},R,O);break e;case 2:At=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,O=i.effects,O===null?i.effects=[g]:O.push(g))}else T={eventTime:T,lane:O,tag:g.tag,payload:g.payload,callback:g.callback,next:null},w===null?(m=w=T,v=R):w=w.next=T,a|=O;if(g=g.next,g===null){if(g=i.shared.pending,g===null)break;O=g,g=O.next,O.next=null,i.lastBaseUpdate=O,i.shared.pending=null}}while(1);if(w===null&&(v=R),i.baseState=v,i.firstBaseUpdate=m,i.lastBaseUpdate=w,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);tn|=a,e.lanes=a,e.memoizedState=R}}function Vs(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Nu=new Pl.Component().refs;function Xo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ki={isMounted:function(e){return(e=e._reactInternals)?on(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Le(),i=Bt(e),o=yt(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ut(e,o,i),t!==null&&(st(t,e,i,r),Jr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Le(),i=Bt(e),o=yt(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ut(e,o,i),t!==null&&(st(t,e,i,r),Jr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Le(),r=Bt(e),i=yt(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ut(e,i,r),t!==null&&(st(t,e,r,n),Jr(t,e,r))}};function Ws(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!fr(n,r)||!fr(i,o):!0}function Lu(e,t,n){var r=!1,i=Ft,o=t.contextType;return typeof o=="object"&&o!==null?o=qe(o):(i=Fe(t)?Zt:Me.current,r=t.contextTypes,o=(r=r!=null)?An(e,i):Ft),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ki,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ki.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Nu,ja(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=qe(o):(o=Fe(t)?Zt:Me.current,i.context=An(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Xo(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ki.enqueueReplaceState(i,i.state,null),gi(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Hn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var g=i.refs;g===Nu&&(g=i.refs={}),a===null?delete g[o]:g[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function jr(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){var t=e._init;return t(e._payload)}function ku(e){function t(y,c){if(e){var p=y.deletions;p===null?(y.deletions=[c],y.flags|=16):p.push(c)}}function n(y,c){if(!e)return null;for(;c!==null;)t(y,c),c=c.sibling;return null}function r(y,c){for(y=new Map;c!==null;)c.key!==null?y.set(c.key,c):y.set(c.index,c),c=c.sibling;return y}function i(y,c){return y=jt(y,c),y.index=0,y.sibling=null,y}function o(y,c,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<c?(y.flags|=2,c):p):(y.flags|=2,c)):(y.flags|=1048576,c)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function g(y,c,p,C){return c===null||c.tag!==6?(c=vo(p,y.mode,C),c.return=y,c):(c=i(c,p),c.return=y,c)}function v(y,c,p,C){var f=p.type;return f===ln?w(y,c,p.props.children,C,p.key):c!==null&&(c.elementType===f||typeof f=="object"&&f!==null&&f.$$typeof===Tt&&Ks(f)===c.type)?(C=i(c,p.props),C.ref=Hn(y,c,p),C.return=y,C):(C=ei(p.type,p.key,p.props,null,y.mode,C),C.ref=Hn(y,c,p),C.return=y,C)}function m(y,c,p,C){return c===null||c.tag!==4||c.stateNode.containerInfo!==p.containerInfo||c.stateNode.implementation!==p.implementation?(c=go(p,y.mode,C),c.return=y,c):(c=i(c,p.children||[]),c.return=y,c)}function w(y,c,p,C,f){return c===null||c.tag!==7?(c=bt(p,y.mode,C,f),c.return=y,c):(c=i(c,p),c.return=y,c)}function R(y,c,p){if(typeof c=="string"&&c!==""||typeof c=="number")return c=vo(""+c,y.mode,p),c.return=y,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case xr:return p=ei(c.type,c.key,c.props,null,y.mode,p),p.ref=Hn(y,null,c),p.return=y,p;case sn:return c=go(c,y.mode,p),c.return=y,c;case Tt:var C=c._init;return R(y,C(c._payload),p)}if(Qn(c)||_n(c))return c=bt(c,y.mode,p,null),c.return=y,c;jr(y,c)}return null}function O(y,c,p,C){var f=c!==null?c.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return f!==null?null:g(y,c,""+p,C);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xr:return p.key===f?v(y,c,p,C):null;case sn:return p.key===f?m(y,c,p,C):null;case Tt:return f=p._init,O(y,c,f(p._payload),C)}if(Qn(p)||_n(p))return f!==null?null:w(y,c,p,C,null);jr(y,p)}return null}function T(y,c,p,C,f){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(p)||null,g(c,y,""+C,f);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case xr:return y=y.get(C.key===null?p:C.key)||null,v(c,y,C,f);case sn:return y=y.get(C.key===null?p:C.key)||null,m(c,y,C,f);case Tt:var u=C._init;return T(y,c,p,u(C._payload),f)}if(Qn(C)||_n(C))return y=y.get(p)||null,w(c,y,C,f,null);jr(c,C)}return null}function d(y,c,p,C){for(var f=null,u=null,s=c,l=c=0,S=null;s!==null&&l<p.length;l++){s.index>l?(S=s,s=null):S=s.sibling;var h=O(y,s,p[l],C);if(h===null){s===null&&(s=S);break}e&&s&&h.alternate===null&&t(y,s),c=o(h,c,l),u===null?f=h:u.sibling=h,u=h,s=S}if(l===p.length)return n(y,s),de&&Wt(y,l),f;if(s===null){for(;l<p.length;l++)s=R(y,p[l],C),s!==null&&(c=o(s,c,l),u===null?f=s:u.sibling=s,u=s);return de&&Wt(y,l),f}for(s=r(y,s);l<p.length;l++)S=T(s,y,l,p[l],C),S!==null&&(e&&S.alternate!==null&&s.delete(S.key===null?l:S.key),c=o(S,c,l),u===null?f=S:u.sibling=S,u=S);return e&&s.forEach(function(A){return t(y,A)}),de&&Wt(y,l),f}function E(y,c,p,C){var f=_n(p);if(typeof f!="function")throw Error(J(150));if(p=f.call(p),p==null)throw Error(J(151));for(var u=f=null,s=c,l=c=0,S=null,h=p.next();s!==null&&!h.done;l++,h=p.next()){s.index>l?(S=s,s=null):S=s.sibling;var A=O(y,s,h.value,C);if(A===null){s===null&&(s=S);break}e&&s&&A.alternate===null&&t(y,s),c=o(A,c,l),u===null?f=A:u.sibling=A,u=A,s=S}if(h.done)return n(y,s),de&&Wt(y,l),f;if(s===null){for(;!h.done;l++,h=p.next())h=R(y,h.value,C),h!==null&&(c=o(h,c,l),u===null?f=h:u.sibling=h,u=h);return de&&Wt(y,l),f}for(s=r(y,s);!h.done;l++,h=p.next())h=T(s,y,l,h.value,C),h!==null&&(e&&h.alternate!==null&&s.delete(h.key===null?l:h.key),c=o(h,c,l),u===null?f=h:u.sibling=h,u=h);return e&&s.forEach(function(M){return t(y,M)}),de&&Wt(y,l),f}function P(y,c,p,C){if(typeof p=="object"&&p!==null&&p.type===ln&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case xr:e:{for(var f=p.key,u=c;u!==null;){if(u.key===f){if(f=p.type,f===ln){if(u.tag===7){n(y,u.sibling),c=i(u,p.props.children),c.return=y,y=c;break e}}else if(u.elementType===f||typeof f=="object"&&f!==null&&f.$$typeof===Tt&&Ks(f)===u.type){n(y,u.sibling),c=i(u,p.props),c.ref=Hn(y,u,p),c.return=y,y=c;break e}n(y,u);break}else t(y,u);u=u.sibling}p.type===ln?(c=bt(p.props.children,y.mode,C,p.key),c.return=y,y=c):(C=ei(p.type,p.key,p.props,null,y.mode,C),C.ref=Hn(y,c,p),C.return=y,y=C)}return a(y);case sn:e:{for(u=p.key;c!==null;){if(c.key===u)if(c.tag===4&&c.stateNode.containerInfo===p.containerInfo&&c.stateNode.implementation===p.implementation){n(y,c.sibling),c=i(c,p.children||[]),c.return=y,y=c;break e}else{n(y,c);break}else t(y,c);c=c.sibling}c=go(p,y.mode,C),c.return=y,y=c}return a(y);case Tt:return u=p._init,P(y,c,u(p._payload),C)}if(Qn(p))return d(y,c,p,C);if(_n(p))return E(y,c,p,C);jr(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,c!==null&&c.tag===6?(n(y,c.sibling),c=i(c,p),c.return=y,y=c):(n(y,c),c=vo(p,y.mode,C),c.return=y,y=c),a(y)):n(y,c)}return P}var In=ku(!0),Du=ku(!1),Rr={},ht=Gt(Rr),pr=Gt(Rr),vr=Gt(Rr);function Jt(e){if(e===Rr)throw Error(J(174));return e}function za(e,t){switch(se(vr,t),se(pr,e),se(ht,Rr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Io(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Io(t,e)}fe(ht),se(ht,t)}function Pn(){fe(ht),fe(pr),fe(vr)}function Uu(e){Jt(vr.current);var t=Jt(ht.current),n=Io(t,e.type);t!==n&&(se(pr,e),se(ht,n))}function Fa(e){pr.current===e&&(fe(ht),fe(pr))}var he=Gt(0);function mi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function Ha(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var Xr=wt.ReactCurrentDispatcher,uo=wt.ReactCurrentBatchConfig,en=0,pe=null,Ce=null,Oe=null,yi=!1,qn=!1,gr=0,xd=0;function xe(){throw Error(J(321))}function Ga(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lt(e[n],t[n]))return!1;return!0}function Va(e,t,n,r,i,o){if(en=o,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xr.current=e===null||e.memoizedState===null?Nd:Ld,e=n(r,i),qn){o=0;do{if(qn=!1,gr=0,25<=o)throw Error(J(301));o+=1,Oe=Ce=null,t.updateQueue=null,Xr.current=kd,e=n(r,i)}while(qn)}if(Xr.current=Ci,t=Ce!==null&&Ce.next!==null,en=0,Oe=Ce=pe=null,yi=!1,t)throw Error(J(300));return e}function Wa(){var e=gr!==0;return gr=0,e}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?pe.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function et(){if(Ce===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Oe===null?pe.memoizedState:Oe.next;if(t!==null)Oe=t,Ce=e;else{if(e===null)throw Error(J(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Oe===null?pe.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function mr(e,t){return typeof t=="function"?t(e):t}function fo(e){var t=et(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=Ce,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var g=a=null,v=null,m=o;do{var w=m.lane;if((en&w)===w)v!==null&&(v=v.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var R={lane:w,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};v===null?(g=v=R,a=r):v=v.next=R,pe.lanes|=w,tn|=w}m=m.next}while(m!==null&&m!==o);v===null?a=r:v.next=g,lt(r,t.memoizedState)||(je=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=v,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,pe.lanes|=o,tn|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function co(e){var t=et(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);lt(o,t.memoizedState)||(je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _u(){}function Bu(e,t){var n=pe,r=et(),i=t(),o=!lt(r.memoizedState,i);if(o&&(r.memoizedState=i,je=!0),r=r.queue,Qa(Fu.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,yr(9,zu.bind(null,n,r,i,t),void 0,null),Ee===null)throw Error(J(349));en&30||ju(n,t,i)}return i}function ju(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zu(e,t,n,r){t.value=n,t.getSnapshot=r,Hu(t)&&Gu(e)}function Fu(e,t,n){return n(function(){Hu(t)&&Gu(e)})}function Hu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lt(e,n)}catch{return!0}}function Gu(e){var t=Ot(e,1);t!==null&&st(t,e,1,-1)}function $s(e){var t=ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:e},t.queue=e,e=e.dispatch=Md.bind(null,pe,e),[t.memoizedState,e]}function yr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Vu(){return et().memoizedState}function Yr(e,t,n,r){var i=ft();pe.flags|=e,i.memoizedState=yr(1|t,n,void 0,r===void 0?null:r)}function Di(e,t,n,r){var i=et();r=r===void 0?null:r;var o=void 0;if(Ce!==null){var a=Ce.memoizedState;if(o=a.destroy,r!==null&&Ga(r,a.deps)){i.memoizedState=yr(t,n,o,r);return}}pe.flags|=e,i.memoizedState=yr(1|t,n,o,r)}function Js(e,t){return Yr(8390656,8,e,t)}function Qa(e,t){return Di(2048,8,e,t)}function Wu(e,t){return Di(4,2,e,t)}function Qu(e,t){return Di(4,4,e,t)}function Ku(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $u(e,t,n){return n=n!=null?n.concat([e]):null,Di(4,4,Ku.bind(null,t,e),n)}function Ka(){}function Ju(e,t){var n=et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xu(e,t){var n=et();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yu(e,t,n){return en&21?(lt(n,t)||(n=ql(),pe.lanes|=n,tn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,je=!0),e.memoizedState=n)}function Id(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{oe=n,uo.transition=r}}function bu(){return et().memoizedState}function Pd(e,t,n){var r=Bt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zu(e))qu(t,n);else if(n=Pu(e,t,n,r),n!==null){var i=Le();st(n,e,r,i),ef(n,t,r)}}function Md(e,t,n){var r=Bt(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zu(e))qu(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,g=o(a,n);if(i.hasEagerState=!0,i.eagerState=g,lt(g,a)){var v=t.interleaved;v===null?(i.next=i,Ba(t)):(i.next=v.next,v.next=i),t.interleaved=i;return}}catch{}finally{}n=Pu(e,t,i,r),n!==null&&(i=Le(),st(n,e,r,i),ef(n,t,r))}}function Zu(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function qu(e,t){qn=yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ef(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wa(e,n)}}var Ci={readContext:qe,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},Nd={readContext:qe,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:qe,useEffect:Js,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yr(4194308,4,Ku.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=ft();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ft();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Pd.bind(null,pe,e),[r.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:$s,useDebugValue:Ka,useDeferredValue:function(e){return ft().memoizedState=e},useTransition:function(){var e=$s(!1),t=e[0];return e=Id.bind(null,e[1]),ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pe,i=ft();if(de){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Ee===null)throw Error(J(349));en&30||ju(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Js(Fu.bind(null,r,o,e),[e]),r.flags|=2048,yr(9,zu.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ft(),t=Ee.identifierPrefix;if(de){var n=mt,r=gt;n=(r&~(1<<32-at(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ld={readContext:qe,useCallback:Ju,useContext:qe,useEffect:Qa,useImperativeHandle:$u,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:Xu,useReducer:fo,useRef:Vu,useState:function(){return fo(mr)},useDebugValue:Ka,useDeferredValue:function(e){var t=et();return Yu(t,Ce.memoizedState,e)},useTransition:function(){var e=fo(mr)[0],t=et().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Bu,useId:bu,unstable_isNewReconciler:!1},kd={readContext:qe,useCallback:Ju,useContext:qe,useEffect:Qa,useImperativeHandle:$u,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:Xu,useReducer:co,useRef:Vu,useState:function(){return co(mr)},useDebugValue:Ka,useDeferredValue:function(e){var t=et();return Ce===null?t.memoizedState=e:Yu(t,Ce.memoizedState,e)},useTransition:function(){var e=co(mr)[0],t=et().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Bu,useId:bu,unstable_isNewReconciler:!1};function Mn(e,t){try{var n="",r=t;do n+=sc(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dd=typeof WeakMap=="function"?WeakMap:Map;function tf(e,t,n){n=yt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Oi||(Oi=!0,sa=r),bo(e,t)},n}function nf(e,t,n){n=yt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){bo(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){bo(e,t),typeof r!="function"&&(_t===null?_t=new Set([this]):_t.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Xs(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dd;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Jd.bind(null,e,t,n),t.then(e,e))}function Ys(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bs(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yt(-1,1),t.tag=2,Ut(n,t,1))),n.lanes|=1),e)}var Ud=wt.ReactCurrentOwner,je=!1;function Ne(e,t,n,r){t.child=e===null?Du(t,null,n,r):In(t,e.child,n,r)}function Zs(e,t,n,r,i){n=n.render;var o=t.ref;return wn(t,i),r=Va(e,t,n,r,o,i),n=Wa(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Et(e,t,i)):(de&&n&&Na(t),t.flags|=1,Ne(e,t,r,i),t.child)}function qs(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!es(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,rf(e,t,o,r,i)):(e=ei(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:fr,n(a,r)&&e.ref===t.ref)return Et(e,t,i)}return t.flags|=1,e=jt(o,r),e.ref=t.ref,e.return=t,t.child=e}function rf(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(fr(o,r)&&e.ref===t.ref)if(je=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(je=!0);else return t.lanes=e.lanes,Et(e,t,i)}return Zo(e,t,n,r,i)}function of(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(yn,Ge),Ge|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(yn,Ge),Ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,se(yn,Ge),Ge|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,se(yn,Ge),Ge|=r;return Ne(e,t,i,n),t.child}function af(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zo(e,t,n,r,i){var o=Fe(n)?Zt:Me.current;return o=An(t,o),wn(t,i),n=Va(e,t,n,r,o,i),r=Wa(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Et(e,t,i)):(de&&r&&Na(t),t.flags|=1,Ne(e,t,n,i),t.child)}function el(e,t,n,r,i){if(Fe(n)){var o=!0;ci(t)}else o=!1;if(wn(t,i),t.stateNode===null)br(e,t),Lu(t,n,r),Yo(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,g=t.memoizedProps;a.props=g;var v=a.context,m=n.contextType;typeof m=="object"&&m!==null?m=qe(m):(m=Fe(n)?Zt:Me.current,m=An(t,m));var w=n.getDerivedStateFromProps,R=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function";R||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(g!==r||v!==m)&&Qs(t,a,r,m),At=!1;var O=t.memoizedState;a.state=O,gi(t,r,a,i),v=t.memoizedState,g!==r||O!==v||ze.current||At?(typeof w=="function"&&(Xo(t,n,w,r),v=t.memoizedState),(g=At||Ws(t,n,g,r,O,v,m))?(R||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=m,r=g):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mu(e,t),g=t.memoizedProps,m=t.type===t.elementType?g:rt(t.type,g),a.props=m,R=t.pendingProps,O=a.context,v=n.contextType,typeof v=="object"&&v!==null?v=qe(v):(v=Fe(n)?Zt:Me.current,v=An(t,v));var T=n.getDerivedStateFromProps;(w=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(g!==R||O!==v)&&Qs(t,a,r,v),At=!1,O=t.memoizedState,a.state=O,gi(t,r,a,i);var d=t.memoizedState;g!==R||O!==d||ze.current||At?(typeof T=="function"&&(Xo(t,n,T,r),d=t.memoizedState),(m=At||Ws(t,n,m,r,O,d,v)||!1)?(w||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,d,v),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,d,v)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||g===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=v,r=m):(typeof a.componentDidUpdate!="function"||g===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),r=!1)}return qo(e,t,n,r,o,i)}function qo(e,t,n,r,i,o){af(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&zs(t,n,!1),Et(e,t,o);r=t.stateNode,Ud.current=t;var g=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=In(t,e.child,null,o),t.child=In(t,null,g,o)):Ne(e,t,g,o),t.memoizedState=r.state,i&&zs(t,n,!0),t.child}function sf(e){var t=e.stateNode;t.pendingContext?js(e,t.pendingContext,t.pendingContext!==t.context):t.context&&js(e,t.context,!1),za(e,t.containerInfo)}function tl(e,t,n,r,i){return xn(),ka(i),t.flags|=256,Ne(e,t,n,r),t.child}var ea={dehydrated:null,treeContext:null,retryLane:0};function ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function lf(e,t,n){var r=t.pendingProps,i=he.current,o=!1,a=(t.flags&128)!==0,g;if((g=a)||(g=e!==null&&e.memoizedState===null?!1:(i&2)!==0),g?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),se(he,i&1),e===null)return $o(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Bi(a,r,0,null),e=bt(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ta(n),t.memoizedState=ea,e):$a(t,a));if(i=e.memoizedState,i!==null&&(g=i.dehydrated,g!==null))return _d(e,t,a,r,g,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,g=i.sibling;var v={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=v,t.deletions=null):(r=jt(i,v),r.subtreeFlags=i.subtreeFlags&14680064),g!==null?o=jt(g,o):(o=bt(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ta(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ea,r}return o=e.child,e=o.sibling,r=jt(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $a(e,t){return t=Bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zr(e,t,n,r){return r!==null&&ka(r),In(t,e.child,null,n),e=$a(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _d(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=ho(Error(J(422))),zr(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bi({mode:"visible",children:r.children},i,0,null),o=bt(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&In(t,e.child,null,a),t.child.memoizedState=ta(a),t.memoizedState=ea,o);if(!(t.mode&1))return zr(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var g=r.dgst;return r=g,o=Error(J(419)),r=ho(o,r,void 0),zr(e,t,a,r)}if(g=(a&e.childLanes)!==0,je||g){if(r=Ee,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ot(e,i),st(r,e,i,-1))}return qa(),r=ho(Error(J(421))),zr(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Xd.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ve=Dt(i.nextSibling),We=t,de=!0,ot=null,e!==null&&(Xe[Ye++]=gt,Xe[Ye++]=mt,Xe[Ye++]=qt,gt=e.id,mt=e.overflow,qt=t),t=$a(t,r.children),t.flags|=4096,t)}function nl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jo(e.return,t,n)}function po(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function uf(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ne(e,t,r.children,n),r=he.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nl(e,n,t);else if(e.tag===19)nl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(se(he,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&mi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),po(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&mi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}po(t,!0,n,null,o);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function br(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Et(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=jt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bd(e,t,n){switch(t.tag){case 3:sf(t),xn();break;case 5:Uu(t);break;case 1:Fe(t.type)&&ci(t);break;case 4:za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;se(pi,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(se(he,he.current&1),t.flags|=128,null):n&t.child.childLanes?lf(e,t,n):(se(he,he.current&1),e=Et(e,t,n),e!==null?e.sibling:null);se(he,he.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return uf(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(he,he.current),r)break;return null;case 22:case 23:return t.lanes=0,of(e,t,n)}return Et(e,t,n)}var ff,na,cf,df;ff=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};na=function(){};cf=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jt(ht.current);var o=null;switch(n){case"input":i=Ro(e,i),r=Ro(e,r),o=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),o=[];break;case"textarea":i=xo(e,i),r=xo(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ui)}Po(n,r);var a;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var g=i[m];for(a in g)g.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(rr.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var v=r[m];if(g=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&v!==g&&(v!=null||g!=null))if(m==="style")if(g){for(a in g)!g.hasOwnProperty(a)||v&&v.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in v)v.hasOwnProperty(a)&&g[a]!==v[a]&&(n||(n={}),n[a]=v[a])}else n||(o||(o=[]),o.push(m,n)),n=v;else m==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,g=g?g.__html:void 0,v!=null&&g!==v&&(o=o||[]).push(m,v)):m==="children"?typeof v!="string"&&typeof v!="number"||(o=o||[]).push(m,""+v):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(rr.hasOwnProperty(m)?(v!=null&&m==="onScroll"&&ue("scroll",e),o||g===v||(o=[])):(o=o||[]).push(m,v))}n&&(o=o||[]).push("style",n);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};df=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gn(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jd(e,t,n){var r=t.pendingProps;switch(La(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Fe(t.type)&&fi(),Ie(t),null;case 3:return r=t.stateNode,Pn(),fe(ze),fe(Me),Ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Br(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ot!==null&&(fa(ot),ot=null))),na(e,t),Ie(t),null;case 5:Fa(t);var i=Jt(vr.current);if(n=t.type,e!==null&&t.stateNode!=null)cf(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Ie(t),null}if(e=Jt(ht.current),Br(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ct]=t,r[hr]=o,e=(t.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(i=0;i<$n.length;i++)ue($n[i],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":cs(r,o),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ue("invalid",r);break;case"textarea":hs(r,o),ue("invalid",r)}Po(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var g=o[a];a==="children"?typeof g=="string"?r.textContent!==g&&(o.suppressHydrationWarning!==!0&&_r(r.textContent,g,e),i=["children",g]):typeof g=="number"&&r.textContent!==""+g&&(o.suppressHydrationWarning!==!0&&_r(r.textContent,g,e),i=["children",""+g]):rr.hasOwnProperty(a)&&g!=null&&a==="onScroll"&&ue("scroll",r)}switch(n){case"input":Ir(r),ds(r,o,!0);break;case"textarea":Ir(r),ps(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ui)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jl(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[ct]=t,e[hr]=r,ff(e,t,!1,!1),t.stateNode=e;e:{switch(a=Mo(n,r),n){case"dialog":ue("cancel",e),ue("close",e),i=r;break;case"iframe":case"object":case"embed":ue("load",e),i=r;break;case"video":case"audio":for(i=0;i<$n.length;i++)ue($n[i],e);i=r;break;case"source":ue("error",e),i=r;break;case"img":case"image":case"link":ue("error",e),ue("load",e),i=r;break;case"details":ue("toggle",e),i=r;break;case"input":cs(e,r),i=Ro(e,r),ue("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),ue("invalid",e);break;case"textarea":hs(e,r),i=xo(e,r),ue("invalid",e);break;default:i=r}Po(n,i),g=i;for(o in g)if(g.hasOwnProperty(o)){var v=g[o];o==="style"?Hl(e,v):o==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&zl(e,v)):o==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&ir(e,v):typeof v=="number"&&ir(e,""+v):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(rr.hasOwnProperty(o)?v!=null&&o==="onScroll"&&ue("scroll",e):v!=null&&ma(e,o,v,a))}switch(n){case"input":Ir(e),ds(e,r,!1);break;case"textarea":Ir(e),ps(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zt(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Cn(e,!!r.multiple,o,!1):r.defaultValue!=null&&Cn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ui)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)df(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=Jt(vr.current),Jt(ht.current),Br(t)){if(r=t.stateNode,n=t.memoizedProps,r[ct]=t,(o=r.nodeValue!==n)&&(e=We,e!==null))switch(e.tag){case 3:_r(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_r(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ct]=t,t.stateNode=r}return Ie(t),null;case 13:if(fe(he),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&Ve!==null&&t.mode&1&&!(t.flags&128))Iu(),xn(),t.flags|=98560,o=!1;else if(o=Br(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(J(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[ct]=t}else xn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),o=!1}else ot!==null&&(fa(ot),ot=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||he.current&1?Se===0&&(Se=3):qa())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return Pn(),na(e,t),e===null&&cr(t.stateNode.containerInfo),Ie(t),null;case 10:return _a(t.type._context),Ie(t),null;case 17:return Fe(t.type)&&fi(),Ie(t),null;case 19:if(fe(he),o=t.memoizedState,o===null)return Ie(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Gn(o,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=mi(e),a!==null){for(t.flags|=128,Gn(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return se(he,he.current&1|2),t.child}e=e.sibling}o.tail!==null&&me()>Nn&&(t.flags|=128,r=!0,Gn(o,!1),t.lanes=4194304)}else{if(!r)if(e=mi(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!de)return Ie(t),null}else 2*me()-o.renderingStartTime>Nn&&n!==1073741824&&(t.flags|=128,r=!0,Gn(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=me(),t.sibling=null,n=he.current,se(he,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return Za(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ge&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function zd(e,t){switch(La(t),t.tag){case 1:return Fe(t.type)&&fi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pn(),fe(ze),fe(Me),Ha(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fa(t),null;case 13:if(fe(he),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(he),null;case 4:return Pn(),null;case 10:return _a(t.type._context),null;case 22:case 23:return Za(),null;case 24:return null;default:return null}}var Fr=!1,Pe=!1,Fd=typeof WeakSet=="function"?WeakSet:Set,b=null;function mn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function ra(e,t,n){try{n()}catch(r){ge(e,t,r)}}var rl=!1;function Hd(e,t){if(Fo=ai,e=vu(),Ma(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,g=-1,v=-1,m=0,w=0,R=e,O=null;t:for(;;){for(var T;R!==n||i!==0&&R.nodeType!==3||(g=a+i),R!==o||r!==0&&R.nodeType!==3||(v=a+r),R.nodeType===3&&(a+=R.nodeValue.length),(T=R.firstChild)!==null;)O=R,R=T;for(;;){if(R===e)break t;if(O===n&&++m===i&&(g=a),O===o&&++w===r&&(v=a),(T=R.nextSibling)!==null)break;R=O,O=R.parentNode}R=T}n=g===-1||v===-1?null:{start:g,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ho={focusedElem:e,selectionRange:n},ai=!1,b=t;b!==null;)if(t=b,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,b=e;else for(;b!==null;){t=b;try{var d=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var E=d.memoizedProps,P=d.memoizedState,y=t.stateNode,c=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:rt(t.type,E),P);y.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){ge(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,b=e;break}b=t.return}return d=rl,rl=!1,d}function er(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ra(t,n,o)}i=i.next}while(i!==r)}}function Ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ia(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hf(e){var t=e.alternate;t!==null&&(e.alternate=null,hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ct],delete t[hr],delete t[Wo],delete t[wd],delete t[Rd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pf(e){return e.tag===5||e.tag===3||e.tag===4}function il(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ui));else if(r!==4&&(e=e.child,e!==null))for(oa(e,t,n),e=e.sibling;e!==null;)oa(e,t,n),e=e.sibling}function aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(aa(e,t,n),e=e.sibling;e!==null;)aa(e,t,n),e=e.sibling}var we=null,it=!1;function Rt(e,t,n){for(n=n.child;n!==null;)vf(e,t,n),n=n.sibling}function vf(e,t,n){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(xi,n)}catch{}switch(n.tag){case 5:Pe||mn(n,t);case 6:var r=we,i=it;we=null,Rt(e,t,n),we=r,it=i,we!==null&&(it?(e=we,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(it?(e=we,n=n.stateNode,e.nodeType===8?ao(e.parentNode,n):e.nodeType===1&&ao(e,n),lr(e)):ao(we,n.stateNode));break;case 4:r=we,i=it,we=n.stateNode.containerInfo,it=!0,Rt(e,t,n),we=r,it=i;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ra(n,t,a),i=i.next}while(i!==r)}Rt(e,t,n);break;case 1:if(!Pe&&(mn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(g){ge(n,t,g)}Rt(e,t,n);break;case 21:Rt(e,t,n);break;case 22:n.mode&1?(Pe=(r=Pe)||n.memoizedState!==null,Rt(e,t,n),Pe=r):Rt(e,t,n);break;default:Rt(e,t,n)}}function ol(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fd),t.forEach(function(r){var i=Yd.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,g=a;e:for(;g!==null;){switch(g.tag){case 5:we=g.stateNode,it=!1;break e;case 3:we=g.stateNode.containerInfo,it=!0;break e;case 4:we=g.stateNode.containerInfo,it=!0;break e}g=g.return}if(we===null)throw Error(J(160));vf(o,a,i),we=null,it=!1;var v=i.alternate;v!==null&&(v.return=null),i.return=null}catch(m){ge(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gf(t,e),t=t.sibling}function gf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nt(t,e),ut(e),r&4){try{er(3,e,e.return),Ui(3,e)}catch(E){ge(e,e.return,E)}try{er(5,e,e.return)}catch(E){ge(e,e.return,E)}}break;case 1:nt(t,e),ut(e),r&512&&n!==null&&mn(n,n.return);break;case 5:if(nt(t,e),ut(e),r&512&&n!==null&&mn(n,n.return),e.flags&32){var i=e.stateNode;try{ir(i,"")}catch(E){ge(e,e.return,E)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,g=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{g==="input"&&o.type==="radio"&&o.name!=null&&_l(i,o),Mo(g,a);var m=Mo(g,o);for(a=0;a<v.length;a+=2){var w=v[a],R=v[a+1];w==="style"?Hl(i,R):w==="dangerouslySetInnerHTML"?zl(i,R):w==="children"?ir(i,R):ma(i,w,R,m)}switch(g){case"input":To(i,o);break;case"textarea":Bl(i,o);break;case"select":var O=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Cn(i,!!o.multiple,T,!1):O!==!!o.multiple&&(o.defaultValue!=null?Cn(i,!!o.multiple,o.defaultValue,!0):Cn(i,!!o.multiple,o.multiple?[]:"",!1))}i[hr]=o}catch(E){ge(e,e.return,E)}}break;case 6:if(nt(t,e),ut(e),r&4){if(e.stateNode===null)throw Error(J(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(E){ge(e,e.return,E)}}break;case 3:if(nt(t,e),ut(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lr(t.containerInfo)}catch(E){ge(e,e.return,E)}break;case 4:nt(t,e),ut(e);break;case 13:nt(t,e),ut(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ya=me())),r&4&&ol(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(Pe=(m=Pe)||w,nt(t,e),Pe=m):nt(t,e),ut(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!w&&e.mode&1)for(b=e,w=e.child;w!==null;){for(R=b=w;b!==null;){switch(O=b,T=O.child,O.tag){case 0:case 11:case 14:case 15:er(4,O,O.return);break;case 1:mn(O,O.return);var d=O.stateNode;if(typeof d.componentWillUnmount=="function"){r=O,n=O.return;try{t=r,d.props=t.memoizedProps,d.state=t.memoizedState,d.componentWillUnmount()}catch(E){ge(r,n,E)}}break;case 5:mn(O,O.return);break;case 22:if(O.memoizedState!==null){sl(R);continue}}T!==null?(T.return=O,b=T):sl(R)}w=w.sibling}e:for(w=null,R=e;;){if(R.tag===5){if(w===null){w=R;try{i=R.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(g=R.stateNode,v=R.memoizedProps.style,a=v!=null&&v.hasOwnProperty("display")?v.display:null,g.style.display=Fl("display",a))}catch(E){ge(e,e.return,E)}}}else if(R.tag===6){if(w===null)try{R.stateNode.nodeValue=m?"":R.memoizedProps}catch(E){ge(e,e.return,E)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;w===R&&(w=null),R=R.return}w===R&&(w=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:nt(t,e),ut(e),r&4&&ol(e);break;case 21:break;default:nt(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(pf(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ir(i,""),r.flags&=-33);var o=il(e);aa(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,g=il(e);oa(e,g,a);break;default:throw Error(J(161))}}catch(v){ge(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gd(e,t,n){b=e,mf(e)}function mf(e,t,n){for(var r=(e.mode&1)!==0;b!==null;){var i=b,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Fr;if(!a){var g=i.alternate,v=g!==null&&g.memoizedState!==null||Pe;g=Fr;var m=Pe;if(Fr=a,(Pe=v)&&!m)for(b=i;b!==null;)a=b,v=a.child,a.tag===22&&a.memoizedState!==null?ll(i):v!==null?(v.return=a,b=v):ll(i);for(;o!==null;)b=o,mf(o),o=o.sibling;b=i,Fr=g,Pe=m}al(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,b=o):al(e)}}function al(e){for(;b!==null;){var t=b;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pe||Ui(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pe)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:rt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var w=m.memoizedState;if(w!==null){var R=w.dehydrated;R!==null&&lr(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Pe||t.flags&512&&ia(t)}catch(O){ge(t,t.return,O)}}if(t===e){b=null;break}if(n=t.sibling,n!==null){n.return=t.return,b=n;break}b=t.return}}function sl(e){for(;b!==null;){var t=b;if(t===e){b=null;break}var n=t.sibling;if(n!==null){n.return=t.return,b=n;break}b=t.return}}function ll(e){for(;b!==null;){var t=b;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ui(4,t)}catch(v){ge(t,n,v)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(v){ge(t,i,v)}}var o=t.return;try{ia(t)}catch(v){ge(t,o,v)}break;case 5:var a=t.return;try{ia(t)}catch(v){ge(t,a,v)}}}catch(v){ge(t,t.return,v)}if(t===e){b=null;break}var g=t.sibling;if(g!==null){g.return=t.return,b=g;break}b=t.return}}var Vd=Math.ceil,Si=wt.ReactCurrentDispatcher,Ja=wt.ReactCurrentOwner,Ze=wt.ReactCurrentBatchConfig,ie=0,Ee=null,ye=null,Re=0,Ge=0,yn=Gt(0),Se=0,Cr=null,tn=0,_i=0,Xa=0,tr=null,Be=null,Ya=0,Nn=1/0,pt=null,Oi=!1,sa=null,_t=null,Hr=!1,Mt=null,Ei=0,nr=0,la=null,Zr=-1,qr=0;function Le(){return ie&6?me():Zr!==-1?Zr:Zr=me()}function Bt(e){return e.mode&1?ie&2&&Re!==0?Re&-Re:Ad.transition!==null?(qr===0&&(qr=ql()),qr):(e=oe,e!==0||(e=window.event,e=e===void 0?16:au(e.type)),e):1}function st(e,t,n,r){if(50<nr)throw nr=0,la=null,Error(J(185));Or(e,n,r),(!(ie&2)||e!==Ee)&&(e===Ee&&(!(ie&2)&&(_i|=n),Se===4&&It(e,Re)),He(e,r),n===1&&ie===0&&!(t.mode&1)&&(Nn=me()+500,Li&&Vt()))}function He(e,t){var n=e.callbackNode;Ac(e,t);var r=oi(e,e===Ee?Re:0);if(r===0)n!==null&&ms(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ms(n),t===1)e.tag===0?Td(ul.bind(null,e)):Tu(ul.bind(null,e)),Od(function(){!(ie&6)&&Vt()}),n=null;else{switch(eu(r)){case 1:n=Ea;break;case 4:n=bl;break;case 16:n=ii;break;case 536870912:n=Zl;break;default:n=ii}n=Tf(n,yf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yf(e,t){if(Zr=-1,qr=0,ie&6)throw Error(J(327));var n=e.callbackNode;if(Rn()&&e.callbackNode!==n)return null;var r=oi(e,e===Ee?Re:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wi(e,r);else{t=r;var i=ie;ie|=2;var o=Sf();(Ee!==e||Re!==t)&&(pt=null,Nn=me()+500,Yt(e,t));do try{Kd();break}catch(g){Cf(e,g)}while(1);Ua(),Si.current=o,ie=i,ye!==null?t=0:(Ee=null,Re=0,t=Se)}if(t!==0){if(t===2&&(i=Uo(e),i!==0&&(r=i,t=ua(e,i))),t===1)throw n=Cr,Yt(e,0),It(e,r),He(e,me()),n;if(t===6)It(e,r);else{if(i=e.current.alternate,!(r&30)&&!Wd(i)&&(t=wi(e,r),t===2&&(o=Uo(e),o!==0&&(r=o,t=ua(e,o))),t===1))throw n=Cr,Yt(e,0),It(e,r),He(e,me()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:Qt(e,Be,pt);break;case 3:if(It(e,r),(r&130023424)===r&&(t=Ya+500-me(),10<t)){if(oi(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Le(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vo(Qt.bind(null,e,Be,pt),t);break}Qt(e,Be,pt);break;case 4:if(It(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-at(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vd(r/1960))-r,10<r){e.timeoutHandle=Vo(Qt.bind(null,e,Be,pt),r);break}Qt(e,Be,pt);break;case 5:Qt(e,Be,pt);break;default:throw Error(J(329))}}}return He(e,me()),e.callbackNode===n?yf.bind(null,e):null}function ua(e,t){var n=tr;return e.current.memoizedState.isDehydrated&&(Yt(e,t).flags|=256),e=wi(e,t),e!==2&&(t=Be,Be=n,t!==null&&fa(t)),e}function fa(e){Be===null?Be=e:Be.push.apply(Be,e)}function Wd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!lt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function It(e,t){for(t&=~Xa,t&=~_i,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(ie&6)throw Error(J(327));Rn();var t=oi(e,0);if(!(t&1))return He(e,me()),null;var n=wi(e,t);if(e.tag!==0&&n===2){var r=Uo(e);r!==0&&(t=r,n=ua(e,r))}if(n===1)throw n=Cr,Yt(e,0),It(e,t),He(e,me()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qt(e,Be,pt),He(e,me()),null}function ba(e,t){var n=ie;ie|=1;try{return e(t)}finally{ie=n,ie===0&&(Nn=me()+500,Li&&Vt())}}function nn(e){Mt!==null&&Mt.tag===0&&!(ie&6)&&Rn();var t=ie;ie|=1;var n=Ze.transition,r=oe;try{if(Ze.transition=null,oe=1,e)return e()}finally{oe=r,Ze.transition=n,ie=t,!(ie&6)&&Vt()}}function Za(){Ge=yn.current,fe(yn)}function Yt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Sd(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(La(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fi();break;case 3:Pn(),fe(ze),fe(Me),Ha();break;case 5:Fa(r);break;case 4:Pn();break;case 13:fe(he);break;case 19:fe(he);break;case 10:_a(r.type._context);break;case 22:case 23:Za()}n=n.return}if(Ee=e,ye=e=jt(e.current,null),Re=Ge=t,Se=0,Cr=null,Xa=_i=tn=0,Be=tr=null,$t!==null){for(t=0;t<$t.length;t++)if(n=$t[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}$t=null}return e}function Cf(e,t){do{var n=ye;try{if(Ua(),Xr.current=Ci,yi){for(var r=pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yi=!1}if(en=0,Oe=Ce=pe=null,qn=!1,gr=0,Ja.current=null,n===null||n.return===null){Se=1,Cr=t,ye=null;break}e:{var o=e,a=n.return,g=n,v=t;if(t=Re,g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var m=v,w=g,R=w.tag;if(!(w.mode&1)&&(R===0||R===11||R===15)){var O=w.alternate;O?(w.updateQueue=O.updateQueue,w.memoizedState=O.memoizedState,w.lanes=O.lanes):(w.updateQueue=null,w.memoizedState=null)}var T=Ys(a);if(T!==null){T.flags&=-257,bs(T,a,g,o,t),T.mode&1&&Xs(o,m,t),t=T,v=m;var d=t.updateQueue;if(d===null){var E=new Set;E.add(v),t.updateQueue=E}else d.add(v);break e}else{if(!(t&1)){Xs(o,m,t),qa();break e}v=Error(J(426))}}else if(de&&g.mode&1){var P=Ys(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),bs(P,a,g,o,t),ka(Mn(v,g));break e}}o=v=Mn(v,g),Se!==4&&(Se=2),tr===null?tr=[o]:tr.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=tf(o,v,t);Gs(o,y);break e;case 1:g=v;var c=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof c.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(_t===null||!_t.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=nf(o,g,t);Gs(o,C);break e}}o=o.return}while(o!==null)}Ef(n)}catch(f){t=f,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(1)}function Sf(){var e=Si.current;return Si.current=Ci,e===null?Ci:e}function qa(){(Se===0||Se===3||Se===2)&&(Se=4),Ee===null||!(tn&268435455)&&!(_i&268435455)||It(Ee,Re)}function wi(e,t){var n=ie;ie|=2;var r=Sf();(Ee!==e||Re!==t)&&(pt=null,Yt(e,t));do try{Qd();break}catch(i){Cf(e,i)}while(1);if(Ua(),ie=n,Si.current=r,ye!==null)throw Error(J(261));return Ee=null,Re=0,Se}function Qd(){for(;ye!==null;)Of(ye)}function Kd(){for(;ye!==null&&!mc();)Of(ye)}function Of(e){var t=Rf(e.alternate,e,Ge);e.memoizedProps=e.pendingProps,t===null?Ef(e):ye=t,Ja.current=null}function Ef(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=zd(n,t),n!==null){n.flags&=32767,ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,ye=null;return}}else if(n=jd(n,t,Ge),n!==null){ye=n;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Se===0&&(Se=5)}function Qt(e,t,n){var r=oe,i=Ze.transition;try{Ze.transition=null,oe=1,$d(e,t,n,r)}finally{Ze.transition=i,oe=r}return null}function $d(e,t,n,r){do Rn();while(Mt!==null);if(ie&6)throw Error(J(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(xc(e,o),e===Ee&&(ye=Ee=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hr||(Hr=!0,Tf(ii,function(){return Rn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ze.transition,Ze.transition=null;var a=oe;oe=1;var g=ie;ie|=4,Ja.current=null,Hd(e,n),gf(n,e),hd(Ho),ai=!!Fo,Ho=Fo=null,e.current=n,Gd(n),yc(),ie=g,oe=a,Ze.transition=o}else e.current=n;if(Hr&&(Hr=!1,Mt=e,Ei=i),o=e.pendingLanes,o===0&&(_t=null),Oc(n.stateNode),He(e,me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Oi)throw Oi=!1,e=sa,sa=null,e;return Ei&1&&e.tag!==0&&Rn(),o=e.pendingLanes,o&1?e===la?nr++:(nr=0,la=e):nr=0,Vt(),null}function Rn(){if(Mt!==null){var e=eu(Ei),t=Ze.transition,n=oe;try{if(Ze.transition=null,oe=16>e?16:e,Mt===null)var r=!1;else{if(e=Mt,Mt=null,Ei=0,ie&6)throw Error(J(331));var i=ie;for(ie|=4,b=e.current;b!==null;){var o=b,a=o.child;if(b.flags&16){var g=o.deletions;if(g!==null){for(var v=0;v<g.length;v++){var m=g[v];for(b=m;b!==null;){var w=b;switch(w.tag){case 0:case 11:case 15:er(8,w,o)}var R=w.child;if(R!==null)R.return=w,b=R;else for(;b!==null;){w=b;var O=w.sibling,T=w.return;if(hf(w),w===m){b=null;break}if(O!==null){O.return=T,b=O;break}b=T}}}var d=o.alternate;if(d!==null){var E=d.child;if(E!==null){d.child=null;do{var P=E.sibling;E.sibling=null,E=P}while(E!==null)}}b=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,b=a;else e:for(;b!==null;){if(o=b,o.flags&2048)switch(o.tag){case 0:case 11:case 15:er(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,b=y;break e}b=o.return}}var c=e.current;for(b=c;b!==null;){a=b;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,b=p;else e:for(a=c;b!==null;){if(g=b,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Ui(9,g)}}catch(f){ge(g,g.return,f)}if(g===a){b=null;break e}var C=g.sibling;if(C!==null){C.return=g.return,b=C;break e}b=g.return}}if(ie=i,Vt(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(xi,e)}catch{}r=!0}return r}finally{oe=n,Ze.transition=t}}return!1}function fl(e,t,n){t=Mn(n,t),t=tf(e,t,1),e=Ut(e,t,1),t=Le(),e!==null&&(Or(e,1,t),He(e,t))}function ge(e,t,n){if(e.tag===3)fl(e,e,n);else for(;t!==null;){if(t.tag===3){fl(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_t===null||!_t.has(r))){e=Mn(n,e),e=nf(t,e,1),t=Ut(t,e,1),e=Le(),t!==null&&(Or(t,1,e),He(t,e));break}}t=t.return}}function Jd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Le(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(Re&n)===n&&(Se===4||Se===3&&(Re&130023424)===Re&&500>me()-Ya?Yt(e,0):Xa|=n),He(e,t)}function wf(e,t){t===0&&(e.mode&1?(t=Nr,Nr<<=1,!(Nr&130023424)&&(Nr=4194304)):t=1);var n=Le();e=Ot(e,t),e!==null&&(Or(e,t,n),He(e,n))}function Xd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wf(e,n)}function Yd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),wf(e,n)}var Rf;Rf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return je=!1,Bd(e,t,n);je=!!(e.flags&131072)}else je=!1,de&&t.flags&1048576&&Au(t,hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;br(e,t),e=t.pendingProps;var i=An(t,Me.current);wn(t,n),i=Va(null,t,r,e,i,n);var o=Wa();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fe(r)?(o=!0,ci(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ja(t),i.updater=ki,t.stateNode=i,i._reactInternals=t,Yo(t,r,e,n),t=qo(null,t,r,!0,o,n)):(t.tag=0,de&&o&&Na(t),Ne(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(br(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Zd(r),e=rt(r,e),i){case 0:t=Zo(null,t,r,e,n);break e;case 1:t=el(null,t,r,e,n);break e;case 11:t=Zs(null,t,r,e,n);break e;case 14:t=qs(null,t,r,rt(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rt(r,i),Zo(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rt(r,i),el(e,t,r,i,n);case 3:e:{if(sf(t),e===null)throw Error(J(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Mu(e,t),gi(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Mn(Error(J(423)),t),t=tl(e,t,r,n,i);break e}else if(r!==i){i=Mn(Error(J(424)),t),t=tl(e,t,r,n,i);break e}else for(Ve=Dt(t.stateNode.containerInfo.firstChild),We=t,de=!0,ot=null,n=Du(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xn(),r===i){t=Et(e,t,n);break e}Ne(e,t,r,n)}t=t.child}return t;case 5:return Uu(t),e===null&&$o(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Go(r,i)?a=null:o!==null&&Go(r,o)&&(t.flags|=32),af(e,t),Ne(e,t,a,n),t.child;case 6:return e===null&&$o(t),null;case 13:return lf(e,t,n);case 4:return za(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=In(t,null,r,n):Ne(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rt(r,i),Zs(e,t,r,i,n);case 7:return Ne(e,t,t.pendingProps,n),t.child;case 8:return Ne(e,t,t.pendingProps.children,n),t.child;case 12:return Ne(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,se(pi,r._currentValue),r._currentValue=a,o!==null)if(lt(o.value,a)){if(o.children===i.children&&!ze.current){t=Et(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var g=o.dependencies;if(g!==null){a=o.child;for(var v=g.firstContext;v!==null;){if(v.context===r){if(o.tag===1){v=yt(-1,n&-n),v.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var w=m.pending;w===null?v.next=v:(v.next=w.next,w.next=v),m.pending=v}}o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),Jo(o.return,n,t),g.lanes|=n;break}v=v.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),Jo(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ne(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,wn(t,n),i=qe(i),r=r(i),t.flags|=1,Ne(e,t,r,n),t.child;case 14:return r=t.type,i=rt(r,t.pendingProps),i=rt(r.type,i),qs(e,t,r,i,n);case 15:return rf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rt(r,i),br(e,t),t.tag=1,Fe(r)?(e=!0,ci(t)):e=!1,wn(t,n),Lu(t,r,i),Yo(t,r,i,n),qo(null,t,r,!0,e,n);case 19:return uf(e,t,n);case 22:return of(e,t,n)}throw Error(J(156,t.tag))};function Tf(e,t){return Yl(e,t)}function bd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function be(e,t,n,r){return new bd(e,t,n,r)}function es(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zd(e){if(typeof e=="function")return es(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ca)return 11;if(e===Sa)return 14}return 2}function jt(e,t){var n=e.alternate;return n===null?(n=be(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ei(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")es(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ln:return bt(n.children,i,o,t);case ya:a=8,i|=8;break;case So:return e=be(12,n,t,i|2),e.elementType=So,e.lanes=o,e;case Oo:return e=be(13,n,t,i),e.elementType=Oo,e.lanes=o,e;case Eo:return e=be(19,n,t,i),e.elementType=Eo,e.lanes=o,e;case kl:return Bi(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nl:a=10;break e;case Ll:a=9;break e;case Ca:a=11;break e;case Sa:a=14;break e;case Tt:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=be(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function bt(e,t,n,r){return e=be(7,e,r,t),e.lanes=n,e}function Bi(e,t,n,r){return e=be(22,e,r,t),e.elementType=kl,e.lanes=n,e.stateNode={isHidden:!1},e}function vo(e,t,n){return e=be(6,e,null,t),e.lanes=n,e}function go(e,t,n){return t=be(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qd(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xi(0),this.expirationTimes=Xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ts(e,t,n,r,i,o,a,g,v){return e=new qd(e,t,n,g,v),t===1?(t=1,o===!0&&(t|=8)):t=0,o=be(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ja(o),e}function eh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Af(e){if(!e)return Ft;e=e._reactInternals;e:{if(on(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(Fe(n))return Ru(e,n,t)}return t}function xf(e,t,n,r,i,o,a,g,v){return e=ts(n,r,!0,e,i,o,a,g,v),e.context=Af(null),n=e.current,r=Le(),i=Bt(n),o=yt(r,i),o.callback=t??null,Ut(n,o,i),e.current.lanes=i,Or(e,i,r),He(e,r),e}function ji(e,t,n,r){var i=t.current,o=Le(),a=Bt(i);return n=Af(n),t.context===null?t.context=n:t.pendingContext=n,t=yt(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ut(i,t,a),e!==null&&(st(e,i,a,o),Jr(e,i,a)),a}function Ri(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ns(e,t){cl(e,t),(e=e.alternate)&&cl(e,t)}function th(){return null}var If=typeof reportError=="function"?reportError:function(e){console.error(e)};function rs(e){this._internalRoot=e}zi.prototype.render=rs.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));ji(e,t,null,null)};zi.prototype.unmount=rs.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nn(function(){ji(null,e,null,null)}),t[St]=null}};function zi(e){this._internalRoot=e}zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=ru();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&t!==0&&t<xt[n].priority;n++);xt.splice(n,0,e),n===0&&ou(e)}};function is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dl(){}function nh(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var m=Ri(a);o.call(m)}}var a=xf(t,r,e,0,null,!1,!1,"",dl);return e._reactRootContainer=a,e[St]=a.current,cr(e.nodeType===8?e.parentNode:e),nn(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var g=r;r=function(){var m=Ri(v);g.call(m)}}var v=ts(e,0,!1,null,null,!1,!1,"",dl);return e._reactRootContainer=v,e[St]=v.current,cr(e.nodeType===8?e.parentNode:e),nn(function(){ji(t,v,n,r)}),v}function Hi(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var g=i;i=function(){var v=Ri(a);g.call(v)}}ji(t,a,e,i)}else a=nh(n,t,e,i,r);return Ri(a)}tu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kn(t.pendingLanes);n!==0&&(wa(t,n|1),He(t,me()),!(ie&6)&&(Nn=me()+500,Vt()))}break;case 13:nn(function(){var r=Ot(e,1);if(r!==null){var i=Le();st(r,e,1,i)}}),ns(e,1)}};Ra=function(e){if(e.tag===13){var t=Ot(e,134217728);if(t!==null){var n=Le();st(t,e,134217728,n)}ns(e,134217728)}};nu=function(e){if(e.tag===13){var t=Bt(e),n=Ot(e,t);if(n!==null){var r=Le();st(n,e,t,r)}ns(e,t)}};ru=function(){return oe};iu=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};Lo=function(e,t,n){switch(t){case"input":if(To(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ni(r);if(!i)throw Error(J(90));Ul(r),To(r,i)}}}break;case"textarea":Bl(e,n);break;case"select":t=n.value,t!=null&&Cn(e,!!n.multiple,t,!1)}};Wl=ba;Ql=nn;var rh={usingClientEntryPoint:!1,Events:[wr,dn,Ni,Gl,Vl,ba]},Vn={findFiberByHostInstance:Kt,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ih={bundleType:Vn.bundleType,version:Vn.version,rendererPackageName:Vn.rendererPackageName,rendererConfig:Vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jl(e),e===null?null:e.stateNode},findFiberByHostInstance:Vn.findFiberByHostInstance||th,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gr.isDisabled&&Gr.supportsFiber)try{xi=Gr.inject(ih),dt=Gr}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rh;Ke.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!is(t))throw Error(J(200));return eh(e,t,null,n)};Ke.createRoot=function(e,t){if(!is(e))throw Error(J(299));var n=!1,r="",i=If;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ts(e,1,!1,null,null,n,!1,r,i),e[St]=t.current,cr(e.nodeType===8?e.parentNode:e),new rs(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Jl(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return nn(e)};Ke.hydrate=function(e,t,n){if(!Fi(t))throw Error(J(200));return Hi(null,e,t,!0,n)};Ke.hydrateRoot=function(e,t,n){if(!is(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=If;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=xf(t,null,e,1,n??null,i,!1,o,a),e[St]=t.current,cr(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new zi(t)};Ke.render=function(e,t,n){if(!Fi(t))throw Error(J(200));return Hi(null,e,t,!1,n)};Ke.unmountComponentAtNode=function(e){if(!Fi(e))throw Error(J(40));return e._reactRootContainer?(nn(function(){Hi(null,null,e,!1,function(){e._reactRootContainer=null,e[St]=null})}),!0):!1};Ke.unstable_batchedUpdates=ba;Ke.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fi(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Hi(e,t,n,!1,r)};Ke.version="18.2.0-next-9e3b772b8-20220608";function Pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pf)}catch(e){console.error(e)}}Pf(),Al.exports=Ke;var oh=Al.exports,hl=oh;yo.createRoot=hl.createRoot,yo.hydrateRoot=hl.hydrateRoot;var Mf={exports:{}};/*!
 * @license Copyright 2015-2022 Ably Real-time Ltd (ably.com)
 * 
 * Ably JavaScript Library v1.2.41
 * https://github.com/ably/ably-js
 * 
 * Released under the Apache Licence v2.0
 */(function(e,t){(function(r,i){e.exports=i()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,g){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:g})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var g=Object.create(null);if(i.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var v in o)i.d(g,v,(function(m){return o[m]}).bind(null,v));return g},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=42)}([function(n,r,i){i.r(r),i.d(r,"__extends",function(){return a}),i.d(r,"__assign",function(){return g}),i.d(r,"__rest",function(){return v}),i.d(r,"__decorate",function(){return m}),i.d(r,"__param",function(){return w}),i.d(r,"__metadata",function(){return R}),i.d(r,"__awaiter",function(){return O}),i.d(r,"__generator",function(){return T}),i.d(r,"__createBinding",function(){return d}),i.d(r,"__exportStar",function(){return E}),i.d(r,"__values",function(){return P}),i.d(r,"__read",function(){return y}),i.d(r,"__spread",function(){return c}),i.d(r,"__spreadArrays",function(){return p}),i.d(r,"__spreadArray",function(){return C}),i.d(r,"__await",function(){return f}),i.d(r,"__asyncGenerator",function(){return u}),i.d(r,"__asyncDelegator",function(){return s}),i.d(r,"__asyncValues",function(){return l}),i.d(r,"__makeTemplateObject",function(){return S}),i.d(r,"__importStar",function(){return A}),i.d(r,"__importDefault",function(){return M}),i.d(r,"__classPrivateFieldGet",function(){return x}),i.d(r,"__classPrivateFieldSet",function(){return N});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var o=function(L,_){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,B){k.__proto__=B}||function(k,B){for(var j in B)Object.prototype.hasOwnProperty.call(B,j)&&(k[j]=B[j])},o(L,_)};function a(L,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");o(L,_);function k(){this.constructor=L}L.prototype=_===null?Object.create(_):(k.prototype=_.prototype,new k)}var g=function(){return g=Object.assign||function(_){for(var k,B=1,j=arguments.length;B<j;B++){k=arguments[B];for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(_[F]=k[F])}return _},g.apply(this,arguments)};function v(L,_){var k={};for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&_.indexOf(B)<0&&(k[B]=L[B]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,B=Object.getOwnPropertySymbols(L);j<B.length;j++)_.indexOf(B[j])<0&&Object.prototype.propertyIsEnumerable.call(L,B[j])&&(k[B[j]]=L[B[j]]);return k}function m(L,_,k,B){var j=arguments.length,F=j<3?_:B===null?B=Object.getOwnPropertyDescriptor(_,k):B,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(L,_,k,B);else for(var W=L.length-1;W>=0;W--)(V=L[W])&&(F=(j<3?V(F):j>3?V(_,k,F):V(_,k))||F);return j>3&&F&&Object.defineProperty(_,k,F),F}function w(L,_){return function(k,B){_(k,B,L)}}function R(L,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,_)}function O(L,_,k,B){function j(F){return F instanceof k?F:new k(function(V){V(F)})}return new(k||(k=Promise))(function(F,V){function W(U){try{I(B.next(U))}catch(D){V(D)}}function G(U){try{I(B.throw(U))}catch(D){V(D)}}function I(U){U.done?F(U.value):j(U.value).then(W,G)}I((B=B.apply(L,_||[])).next())})}function T(L,_){var k={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},B,j,F,V;return V={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function W(I){return function(U){return G([I,U])}}function G(I){if(B)throw new TypeError("Generator is already executing.");for(;k;)try{if(B=1,j&&(F=I[0]&2?j.return:I[0]?j.throw||((F=j.return)&&F.call(j),0):j.next)&&!(F=F.call(j,I[1])).done)return F;switch(j=0,F&&(I=[I[0]&2,F.value]),I[0]){case 0:case 1:F=I;break;case 4:return k.label++,{value:I[1],done:!1};case 5:k.label++,j=I[1],I=[0];continue;case 7:I=k.ops.pop(),k.trys.pop();continue;default:if(F=k.trys,!(F=F.length>0&&F[F.length-1])&&(I[0]===6||I[0]===2)){k=0;continue}if(I[0]===3&&(!F||I[1]>F[0]&&I[1]<F[3])){k.label=I[1];break}if(I[0]===6&&k.label<F[1]){k.label=F[1],F=I;break}if(F&&k.label<F[2]){k.label=F[2],k.ops.push(I);break}F[2]&&k.ops.pop(),k.trys.pop();continue}I=_.call(L,k)}catch(U){I=[6,U],j=0}finally{B=F=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}}var d=Object.create?function(L,_,k,B){B===void 0&&(B=k),Object.defineProperty(L,B,{enumerable:!0,get:function(){return _[k]}})}:function(L,_,k,B){B===void 0&&(B=k),L[B]=_[k]};function E(L,_){for(var k in L)k!=="default"&&!Object.prototype.hasOwnProperty.call(_,k)&&d(_,L,k)}function P(L){var _=typeof Symbol=="function"&&Symbol.iterator,k=_&&L[_],B=0;if(k)return k.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&B>=L.length&&(L=void 0),{value:L&&L[B++],done:!L}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(L,_){var k=typeof Symbol=="function"&&L[Symbol.iterator];if(!k)return L;var B=k.call(L),j,F=[],V;try{for(;(_===void 0||_-- >0)&&!(j=B.next()).done;)F.push(j.value)}catch(W){V={error:W}}finally{try{j&&!j.done&&(k=B.return)&&k.call(B)}finally{if(V)throw V.error}}return F}function c(){for(var L=[],_=0;_<arguments.length;_++)L=L.concat(y(arguments[_]));return L}function p(){for(var L=0,_=0,k=arguments.length;_<k;_++)L+=arguments[_].length;for(var B=Array(L),j=0,_=0;_<k;_++)for(var F=arguments[_],V=0,W=F.length;V<W;V++,j++)B[j]=F[V];return B}function C(L,_,k){if(k||arguments.length===2)for(var B=0,j=_.length,F;B<j;B++)(F||!(B in _))&&(F||(F=Array.prototype.slice.call(_,0,B)),F[B]=_[B]);return L.concat(F||Array.prototype.slice.call(_))}function f(L){return this instanceof f?(this.v=L,this):new f(L)}function u(L,_,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B=k.apply(L,_||[]),j,F=[];return j={},V("next"),V("throw"),V("return"),j[Symbol.asyncIterator]=function(){return this},j;function V(z){B[z]&&(j[z]=function(Q){return new Promise(function(X,Y){F.push([z,Q,X,Y])>1||W(z,Q)})})}function W(z,Q){try{G(B[z](Q))}catch(X){D(F[0][3],X)}}function G(z){z.value instanceof f?Promise.resolve(z.value.v).then(I,U):D(F[0][2],z)}function I(z){W("next",z)}function U(z){W("throw",z)}function D(z,Q){z(Q),F.shift(),F.length&&W(F[0][0],F[0][1])}}function s(L){var _,k;return _={},B("next"),B("throw",function(j){throw j}),B("return"),_[Symbol.iterator]=function(){return this},_;function B(j,F){_[j]=L[j]?function(V){return(k=!k)?{value:f(L[j](V)),done:j==="return"}:F?F(V):V}:F}}function l(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=L[Symbol.asyncIterator],k;return _?_.call(L):(L=typeof P=="function"?P(L):L[Symbol.iterator](),k={},B("next"),B("throw"),B("return"),k[Symbol.asyncIterator]=function(){return this},k);function B(F){k[F]=L[F]&&function(V){return new Promise(function(W,G){V=L[F](V),j(W,G,V.done,V.value)})}}function j(F,V,W,G){Promise.resolve(G).then(function(I){F({value:I,done:W})},V)}}function S(L,_){return Object.defineProperty?Object.defineProperty(L,"raw",{value:_}):L.raw=_,L}var h=Object.create?function(L,_){Object.defineProperty(L,"default",{enumerable:!0,value:_})}:function(L,_){L.default=_};function A(L){if(L&&L.__esModule)return L;var _={};if(L!=null)for(var k in L)k!=="default"&&Object.prototype.hasOwnProperty.call(L,k)&&d(_,L,k);return h(_,L),_}function M(L){return L&&L.__esModule?L:{default:L}}function x(L,_,k,B){if(k==="a"&&!B)throw new TypeError("Private accessor was defined without a getter");if(typeof _=="function"?L!==_||!B:!_.has(L))throw new TypeError("Cannot read private member from an object whose class did not declare it");return k==="m"?B:k==="a"?B.call(L):B?B.value:_.get(L)}function N(L,_,k,B,j){if(B==="m")throw new TypeError("Private method is not writable");if(B==="a"&&!j)throw new TypeError("Private accessor was defined without a setter");if(typeof _=="function"?L!==_||!j:!_.has(L))throw new TypeError("Cannot write private member to an object whose class did not declare it");return B==="a"?j.call(L,k):j?j.value=k:_.set(L,k),k}},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0}),r.allToUpperCase=r.allToLowerCase=r.encodeBody=r.decodeBody=r.Format=r.promisify=r.trim=r.arrChooseN=r.randomHexString=r.randomString=r.cheapRandStr=r.dataSizeBytes=r.inspectBody=r.inspectError=r.isErrorInfoOrPartialErrorInfo=r.now=r.parseQueryString=r.toQueryString=r.arrPopRandomElement=r.defaultPostHeaders=r.defaultGetHeaders=r.allSame=r.arrEvery=r.arrFilter=r.arrMap=r.safeArrForEach=r.arrForEach=r.forInOwnNonNullProperties=r.valuesArray=r.keysArray=r.arrWithoutValue=r.arrDeleteValue=r.arrIn=r.arrIndexOf=r.arrSubtract=r.arrIntersectOb=r.arrIntersect=r.intersect=r.containsValue=r.inherits=r.prototypicalClone=r.shallowClone=r.isEmptyArg=r.isOnlyPropIn=r.isEmpty=r.isObject=r.ensureArray=r.isArray=r.copy=r.mixin=void 0,r.toBase64=r.matchDerivedChannel=r.shallowEquals=r.getGlobalObject=r.getJitterCoefficient=r.getBackoffCoefficient=void 0;var a=i(0),g=a.__importDefault(i(3)),v=a.__importStar(i(8)),m=a.__importDefault(i(4)),w=i(11),R=i(30);function O(H){return Math.floor(Math.random()*H.length)}function T(H){for(var K=[],$=1;$<arguments.length;$++)K[$-1]=arguments[$];for(var q=0;q<K.length;q++){var ne=K[q];if(!ne)break;var Ue=Object.prototype.hasOwnProperty;for(var Un in ne)(!Ue||Ue.call(ne,Un))&&(H[Un]=ne[Un])}return H}r.mixin=T;function d(H){return T({},H)}r.copy=d,r.isArray=Array.isArray||function(H){return Object.prototype.toString.call(H)=="[object Array]"};function E(H){return p(H)?[]:(0,r.isArray)(H)?H:[H]}r.ensureArray=E;function P(H){return Object.prototype.toString.call(H)=="[object Object]"}r.isObject=P;function y(H){for(var K in H)return!1;return!0}r.isEmpty=y;function c(H,K){for(var $ in H)if($!==K)return!1;return!0}r.isOnlyPropIn=c;function p(H){return H==null}r.isEmptyArg=p;function C(H){var K=new Object;for(var $ in H)K[$]=H[$];return K}r.shallowClone=C;function f(H,K){var $=function(){function ne(){}return ne}();$.prototype=H;var q=new $;return K&&T(q,K),q}r.prototypicalClone=f;var u=function(H,K){if(g.default.Config.inherits){g.default.Config.inherits(H,K);return}H.super_=K,H.prototype=f(K.prototype,{constructor:H})};r.inherits=u;function s(H,K){for(var $ in H)if(H[$]==K)return!0;return!1}r.containsValue=s;function l(H,K){return(0,r.isArray)(K)?S(H,K):h(H,K)}r.intersect=l;function S(H,K){for(var $=[],q=0;q<H.length;q++){var ne=H[q];(0,r.arrIndexOf)(K,ne)!=-1&&$.push(ne)}return $}r.arrIntersect=S;function h(H,K){for(var $=[],q=0;q<H.length;q++){var ne=H[q];ne in K&&$.push(ne)}return $}r.arrIntersectOb=h;function A(H,K){for(var $=[],q=0;q<H.length;q++){var ne=H[q];(0,r.arrIndexOf)(K,ne)==-1&&$.push(ne)}return $}r.arrSubtract=A,r.arrIndexOf=Array.prototype.indexOf?function(H,K,$){return H.indexOf(K,$)}:function(H,K,$){$=$||0;for(var q=H.length;$<q;$++)if(H[$]===K)return $;return-1};function M(H,K){return(0,r.arrIndexOf)(H,K)!==-1}r.arrIn=M;function x(H,K){var $=(0,r.arrIndexOf)(H,K),q=$!=-1;return q&&H.splice($,1),q}r.arrDeleteValue=x;function N(H,K){var $=H.slice();return x($,K),$}r.arrWithoutValue=N;function L(H,K){var $=[];for(var q in H)K&&!Object.prototype.hasOwnProperty.call(H,q)||$.push(q);return $}r.keysArray=L;function _(H,K){var $=[];for(var q in H)K&&!Object.prototype.hasOwnProperty.call(H,q)||$.push(H[q]);return $}r.valuesArray=_;function k(H,K){for(var $ in H)Object.prototype.hasOwnProperty.call(H,$)&&H[$]&&K($)}r.forInOwnNonNullProperties=k,r.arrForEach=Array.prototype.forEach?function(H,K){H.forEach(K)}:function(H,K){for(var $=H.length,q=0;q<$;q++)K(H[q],q,H)};function B(H,K){return(0,r.arrForEach)(H.slice(),K)}r.safeArrForEach=B,r.arrMap=Array.prototype.map?function(H,K){return H.map(K)}:function(H,K){for(var $=[],q=H.length,ne=0;ne<q;ne++)$.push(K(H[ne],ne,H));return $},r.arrFilter=Array.prototype.filter?function(H,K){return H.filter(K)}:function(H,K){for(var $=[],q=H.length,ne=0;ne<q;ne++)K(H[ne])&&$.push(H[ne]);return $},r.arrEvery=Array.prototype.every?function(H,K){return H.every(K)}:function(H,K){for(var $=H.length,q=0;q<$;q++)if(!K(H[q],q,H))return!1;return!0};function j(H,K){if(H.length===0)return!0;var $=H[0][K];return(0,r.arrEvery)(H,function(q){return q[K]===$})}r.allSame=j;var F={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function V(H,K){var $=F[K||ce.json];return{accept:$,"X-Ably-Version":v.default.protocolVersion.toString(),"Ably-Agent":(0,v.getAgentString)(H)}}r.defaultGetHeaders=V;function W(H,K){var $,q=$=F[K||ce.json];return{accept:q,"content-type":$,"X-Ably-Version":v.default.protocolVersion.toString(),"Ably-Agent":(0,v.getAgentString)(H)}}r.defaultPostHeaders=W;function G(H){return H.splice(O(H),1)[0]}r.arrPopRandomElement=G;function I(H){var K=[];if(H)for(var $ in H)K.push(encodeURIComponent($)+"="+encodeURIComponent(H[$]));return K.length?"?"+K.join("&"):""}r.toQueryString=I;function U(H){for(var K,$=/([^?&=]+)=?([^&]*)/g,q={};K=$.exec(H);)q[decodeURIComponent(K[1])]=decodeURIComponent(K[2]);return q}r.parseQueryString=U,r.now=Date.now||function(){return new Date().getTime()};function D(H){return typeof H=="object"&&H!==null&&(H.constructor.name=="ErrorInfo"||H.constructor.name=="PartialErrorInfo")}r.isErrorInfoOrPartialErrorInfo=D;function z(H){var K,$;return H instanceof Error||((K=H==null?void 0:H.constructor)===null||K===void 0?void 0:K.name)==="ErrorInfo"||(($=H==null?void 0:H.constructor)===null||$===void 0?void 0:$.name)==="PartialErrorInfo"?g.default.Config.inspect(H):H.toString()}r.inspectError=z;function Q(H){return g.default.BufferUtils.isBuffer(H)?H.toString():typeof H=="string"?H:g.default.Config.inspect(H)}r.inspectBody=Q;function X(H){if(g.default.BufferUtils.isBuffer(H))return g.default.BufferUtils.byteLength(H);if(typeof H=="string")return g.default.Config.stringByteSize(H);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof H)}r.dataSizeBytes=X;function Y(){return String(Math.random()).substr(2)}r.cheapRandStr=Y;var ee=function(H){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var K=new Uint8Array(H);return g.default.Config.getRandomValues(K),g.default.BufferUtils.base64Encode(K)}for(var $=g.default.BufferUtils.base64CharSet,q=Math.round(H*4/3),ne="",Ue=0;Ue<q;Ue++)ne+=$[O($)];return ne};r.randomString=ee;var te=function(H){if(g.default.Config.getRandomValues&&typeof Uint8Array<"u"){var K=new Uint8Array(H);return g.default.Config.getRandomValues(K),g.default.BufferUtils.hexEncode(K)}for(var $=g.default.BufferUtils.hexCharSet,q=H*2,ne="",Ue=0;Ue<q;Ue++)ne+=$[O($)];return ne};r.randomHexString=te;function ae(H,K){for(var $=Math.min(K,H.length),q=H.slice(),ne=[],Ue=0;Ue<$;Ue++)ne.push(G(q));return ne}r.arrChooseN=ae,r.trim=String.prototype.trim?function(H){return H.trim()}:function(H){return H.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Z(H,K,$){return new Promise(function(q,ne){H[K].apply(H,a.__spreadArray(a.__spreadArray([],$,!1),[function(Ue,Un){Ue?ne(Ue):q(Un)}],!1))})}r.promisify=Z;var ce;(function(H){H.msgpack="msgpack",H.json="json"})(ce=r.Format||(r.Format={}));function le(H,K){return K=="msgpack"?g.default.Config.msgpack.decode(H):JSON.parse(String(H))}r.decodeBody=le;function Je(H,K){return K=="msgpack"?g.default.Config.msgpack.encode(H,!0):JSON.stringify(H)}r.encodeBody=Je;function tt(H){return H.map(function(K){return K&&K.toLowerCase()})}r.allToLowerCase=tt;function Ae(H){return H.map(function(K){return K&&K.toUpperCase()})}r.allToUpperCase=Ae;function Tr(H){return Math.min((H+2)/3,2)}r.getBackoffCoefficient=Tr;function Gi(){return 1-Math.random()*.2}r.getJitterCoefficient=Gi;function Vi(){return o||(typeof window<"u"?window:self)}r.getGlobalObject=Vi;function Nf(H,K){return Object.keys(H).every(function($){return H[$]===K[$]})&&Object.keys(K).every(function($){return K[$]===H[$]})}r.shallowEquals=Nf;function Lf(H){var K=/^(\[([^?]*)(?:(.*))\])?(.+)$/,$=H.match(K);if(!$||!$.length||$.length<5)throw new m.default("regex match failed",400,40010);if($[2])throw new m.default("cannot use a derived option with a ".concat($[2]," channel"),400,40010);return{qualifierParam:$[3]||"",channelName:$[4]}}r.matchDerivedChannel=Lf;function kf(H){return g.default.Config.createHmac?Buffer.from(H,"ascii").toString("base64"):(0,w.stringify)((0,R.parse)(H))}r.toBase64=kf}).call(this,i(13))},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),g=a.__importDefault(i(3)),v=o||(typeof window<"u"?window:self),m;(function(d){d[d.None=0]="None",d[d.Error=1]="Error",d[d.Major=2]="Major",d[d.Minor=3]="Minor",d[d.Micro=4]="Micro"})(m||(m={}));function w(d,E){return"".concat(d).padStart(E?3:2,"0")}function R(d){return g.default.Config.logTimestamps?function(E){var P=new Date;d(w(P.getHours())+":"+w(P.getMinutes())+":"+w(P.getSeconds())+"."+w(P.getMilliseconds(),1)+" "+E)}:d}var O=function(){var d,E,P,y;return typeof Window>"u"&&typeof WorkerGlobalScope>"u"||typeof((E=(d=v==null?void 0:v.console)===null||d===void 0?void 0:d.log)===null||E===void 0?void 0:E.apply)=="function"?(P=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];console.log.apply(console,c)},y=console.warn?function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];console.warn.apply(console,c)}:P):v!=null&&v.console.log?P=y=function(){Function.prototype.apply.call(console.log,console,arguments)}:P=y=function(){},[P,y].map(R)},T=function(){function d(){d.logLevel=d.LOG_DEFAULT}return d.initLogHandlers=function(){var E=O(),P=E[0],y=E[1];this.logHandler=P,this.logErrorHandler=y},d.logLevel=m.Error,d.LOG_NONE=m.None,d.LOG_ERROR=m.Error,d.LOG_MAJOR=m.Major,d.LOG_MINOR=m.Minor,d.LOG_MICRO=m.Micro,d.LOG_DEFAULT=m.Error,d.LOG_DEBUG=m.Micro,d.logAction=function(E,P,y){d.shouldLog(E)&&(E===m.Error?d.logErrorHandler:d.logHandler)("Ably: "+P+": "+y)},d.deprecated=function(E,P){d.deprecatedWithMsg(E,"Please use '"+P+"' instead.")},d.deprecatedWithMsg=function(E,P){d.shouldLog(m.Error)&&d.logErrorHandler("Ably: Deprecation warning - '"+E+"' is deprecated and will be removed from a future version. "+P)},d.shouldLog=function(E){return E<=d.logLevel},d.setLog=function(E,P){E!==void 0&&(d.logLevel=E),P!==void 0&&(d.logHandler=d.logErrorHandler=P)},d}();r.default=T}).call(this,i(13))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function a(){}return a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.PartialErrorInfo=void 0;var o=i(0),a=o.__importDefault(i(3)),g=o.__importStar(i(1));function v(R){var O="["+R.constructor.name;return R.message&&(O+=": "+R.message),R.statusCode&&(O+="; statusCode="+R.statusCode),R.code&&(O+="; code="+R.code),R.cause&&(O+="; cause="+g.inspectError(R.cause)),R.href&&!(R.message&&R.message.indexOf("help.ably.io")>-1)&&(O+="; see "+R.href+" "),O+="]",O}var m=function(R){o.__extends(O,R);function O(T,d,E,P){var y=R.call(this,T)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(y,O.prototype),y.code=d,y.statusCode=E,y.cause=P,y}return O.prototype.toString=function(){return v(this)},O.fromValues=function(T){var d=T,E=d.message,P=d.code,y=d.statusCode;if(typeof E!="string"||typeof P!="number"||typeof y!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+a.default.Config.inspect(T));var c=Object.assign(new O(E,P,y),T);return c.code&&!c.href&&(c.href="https://help.ably.io/error/"+c.code),c},O}(Error);r.default=m;var w=function(R){o.__extends(O,R);function O(T,d,E,P){var y=R.call(this,T)||this;return typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(y,O.prototype),y.code=d,y.statusCode=E,y.cause=P,y}return O.prototype.toString=function(){return v(this)},O}(Error);r.PartialErrorInfo=w},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(){if(typeof ArrayBuffer=="function"){var a=o,g=a.lib,v=g.WordArray,m=v.init,w=v.init=function(R){if(R instanceof ArrayBuffer&&(R=new Uint8Array(R)),(R instanceof Int8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)&&(R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength)),R instanceof Uint8Array){for(var O=R.byteLength,T=[],d=0;d<O;d++)T[d>>>2]|=R[d]<<24-d%4*8;m.call(this,T,O)}else m.apply(this,arguments)};w.prototype=v}}(),o.lib.WordArray})},function(n,r,i){(function(o){(function(a,g){n.exports=g()})(this,function(){var a=a||function(g,v){var m;if(typeof window<"u"&&window.crypto&&(m=window.crypto),!m&&typeof window<"u"&&window.msCrypto&&(m=window.msCrypto),!m&&typeof o<"u"&&o.crypto&&(m=o.crypto),!m)try{m=i(44)}catch{}var w=function(){if(m){if(typeof m.getRandomValues=="function")try{return m.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof m.randomBytes=="function")try{return m.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},R=Object.create||function(){function u(){}return function(s){var l;return u.prototype=s,l=new u,u.prototype=null,l}}(),O={},T=O.lib={},d=T.Base=function(){return{extend:function(u){var s=R(this);return u&&s.mixIn(u),(!s.hasOwnProperty("init")||this.init===s.init)&&(s.init=function(){s.$super.init.apply(this,arguments)}),s.init.prototype=s,s.$super=this,s},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var s in u)u.hasOwnProperty(s)&&(this[s]=u[s]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),E=T.WordArray=d.extend({init:function(u,s){u=this.words=u||[],s!=v?this.sigBytes=s:this.sigBytes=u.length*4},toString:function(u){return(u||y).stringify(this)},concat:function(u){var s=this.words,l=u.words,S=this.sigBytes,h=u.sigBytes;if(this.clamp(),S%4)for(var A=0;A<h;A++){var M=l[A>>>2]>>>24-A%4*8&255;s[S+A>>>2]|=M<<24-(S+A)%4*8}else for(var A=0;A<h;A+=4)s[S+A>>>2]=l[A>>>2];return this.sigBytes+=h,this},clamp:function(){var u=this.words,s=this.sigBytes;u[s>>>2]&=4294967295<<32-s%4*8,u.length=g.ceil(s/4)},clone:function(){var u=d.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var s=[],l=0;l<u;l+=4)s.push(w());return new E.init(s,u)}}),P=O.enc={},y=P.Hex={stringify:function(u){for(var s=u.words,l=u.sigBytes,S=[],h=0;h<l;h++){var A=s[h>>>2]>>>24-h%4*8&255;S.push((A>>>4).toString(16)),S.push((A&15).toString(16))}return S.join("")},parse:function(u){for(var s=u.length,l=[],S=0;S<s;S+=2)l[S>>>3]|=parseInt(u.substr(S,2),16)<<24-S%8*4;return new E.init(l,s/2)}},c=P.Latin1={stringify:function(u){for(var s=u.words,l=u.sigBytes,S=[],h=0;h<l;h++){var A=s[h>>>2]>>>24-h%4*8&255;S.push(String.fromCharCode(A))}return S.join("")},parse:function(u){for(var s=u.length,l=[],S=0;S<s;S++)l[S>>>2]|=(u.charCodeAt(S)&255)<<24-S%4*8;return new E.init(l,s)}},p=P.Utf8={stringify:function(u){try{return decodeURIComponent(escape(c.stringify(u)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(u){return c.parse(unescape(encodeURIComponent(u)))}},C=T.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new E.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=p.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var s,l=this._data,S=l.words,h=l.sigBytes,A=this.blockSize,M=A*4,x=h/M;u?x=g.ceil(x):x=g.max((x|0)-this._minBufferSize,0);var N=x*A,L=g.min(N*4,h);if(N){for(var _=0;_<N;_+=A)this._doProcessBlock(S,_);s=S.splice(0,N),l.sigBytes-=L}return new E.init(s,L)},clone:function(){var u=d.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});T.Hasher=C.extend({cfg:d.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){u&&this._append(u);var s=this._doFinalize();return s},blockSize:16,_createHelper:function(u){return function(s,l){return new u.init(l).finalize(s)}},_createHmacHelper:function(u){return function(s,l){return new f.HMAC.init(u,l).finalize(s)}}});var f=O.algo={};return O}(Math);return a})}).call(this,i(13))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(2)),v=o.__importDefault(i(3));function m(O,T,d){try{T.apply(O,d)}catch(E){g.default.logAction(g.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+E+"; stack = "+(E&&E.stack))}}function w(O,T,d){for(var E,P,y,c=0;c<O.length;c++)if(E=O[c],d&&(E=E[d]),a.isArray(E)){for(;(P=a.arrIndexOf(E,T))!==-1;)E.splice(P,1);d&&E.length===0&&delete O[c][d]}else if(a.isObject(E))for(y in E)Object.prototype.hasOwnProperty.call(E,y)&&a.isArray(E[y])&&w([E],T,y)}var R=function(){function O(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return O.prototype.on=function(){for(var T=this,d=[],E=0;E<arguments.length;E++)d[E]=arguments[E];if(d.length===1){var P=d[0];if(typeof P=="function")this.any.push(P);else throw new Error("EventListener.on(): Invalid arguments: "+v.default.Config.inspect(d))}if(d.length===2){var y=d[0],c=d[1];if(typeof c!="function")throw new Error("EventListener.on(): Invalid arguments: "+v.default.Config.inspect(d));if(a.isEmptyArg(y))this.any.push(c);else if(a.isArray(y))y.forEach(function(C){T.on(C,c)});else{if(typeof y!="string")throw new Error("EventListener.on(): Invalid arguments: "+v.default.Config.inspect(d));var p=this.events[y]||(this.events[y]=[]);p.push(c)}}},O.prototype.off=function(){for(var T,d=this,E=[],P=0;P<arguments.length;P++)E[P]=arguments[P];if(E.length==0||a.isEmptyArg(E[0])&&a.isEmptyArg(E[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}var y=E[0],c=E[1],p=null,C=null;if(E.length===1||!c)typeof y=="function"?p=y:C=y;else{if(typeof c!="function")throw new Error("EventEmitter.off(): invalid arguments:"+v.default.Config.inspect(E));T=[y,c],C=T[0],p=T[1]}if(p&&a.isEmptyArg(C)){w([this.any,this.events,this.anyOnce,this.eventsOnce],p);return}if(a.isArray(C)){C.forEach(function(f){d.off(f,p)});return}if(typeof C!="string")throw new Error("EventEmitter.off(): invalid arguments:"+v.default.Config.inspect(E));p?w([this.events,this.eventsOnce],p,C):(delete this.events[C],delete this.eventsOnce[C])},O.prototype.listeners=function(T){if(T){var d=this.events[T]||[];return this.eventsOnce[T]&&Array.prototype.push.apply(d,this.eventsOnce[T]),d.length?d:null}return this.any.length?this.any:null},O.prototype.emit=function(T){for(var d=[],E=1;E<arguments.length;E++)d[E-1]=arguments[E];var P={event:T},y=[];this.anyOnce.length&&(Array.prototype.push.apply(y,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(y,this.any);var c=this.eventsOnce[T];c&&(Array.prototype.push.apply(y,c),delete this.eventsOnce[T]);var p=this.events[T];p&&Array.prototype.push.apply(y,p),a.arrForEach(y,function(C){m(P,C,d)})},O.prototype.once=function(){for(var T=this,d=[],E=0;E<arguments.length;E++)d[E]=arguments[E];var P=d.length;if((P===0||P===1&&typeof d[0]!="function")&&v.default.Config.Promise){var y=d[0];return new v.default.Config.Promise(function(s){T.once(y,s)})}var c=d[0],p=d[1];if(d.length===1&&typeof c=="function")this.anyOnce.push(c);else if(a.isEmptyArg(c)){if(typeof p!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+v.default.Config.inspect(d));this.anyOnce.push(p)}else if(a.isArray(c)){var C=this,f=function(){var s=Array.prototype.slice.call(arguments);if(a.arrForEach(c,function(l){C.off(l,f)}),typeof p!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+v.default.Config.inspect(d));p.apply(this,s)};a.arrForEach(c,function(s){C.on(s,f)})}else{if(typeof c!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+v.default.Config.inspect(d));var u=this.eventsOnce[c]||(this.eventsOnce[c]=[]);if(p){if(typeof p!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+v.default.Config.inspect(d));u.push(p)}}},O.prototype.whenState=function(T,d,E){for(var P=this,y=[],c=3;c<arguments.length;c++)y[c-3]=arguments[c];var p={event:T};if(typeof T!="string"||typeof d!="string")throw"whenState requires a valid event String argument";if(typeof E!="function"&&v.default.Config.Promise)return new v.default.Config.Promise(function(C){O.prototype.whenState.apply(P,[T,d,C].concat(y))});T===d?m(p,E,y):this.once(T,E)},O}();r.default=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaults=r.normaliseOptions=r.objectifyOptions=r.getAgentString=r.getHosts=r.getFallbackHosts=r.environmentFallbackHosts=r.getHttpScheme=r.getPort=r.getHost=void 0;var o=i(0),a=o.__importDefault(i(3)),g=o.__importStar(i(1)),v=o.__importDefault(i(2)),m=o.__importDefault(i(4)),w=i(43),R="ably-js/"+w.version,O={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:w.version,protocolVersion:2,agent:R,getHost:T,getPort:d,getHttpScheme:E,environmentFallbackHosts:P,getFallbackHosts:y,getHosts:c,checkHost:p,objectifyOptions:s,normaliseOptions:l};function T(h,A,M){return M?A=A==h.restHost&&h.realtimeHost||A||h.realtimeHost:A=A||h.restHost,A}r.getHost=T;function d(h,A){return A||h.tls?h.tlsPort:h.port}r.getPort=d;function E(h){return h.tls?"https://":"http://"}r.getHttpScheme=E;function P(h){return[h+"-a-fallback.ably-realtime.com",h+"-b-fallback.ably-realtime.com",h+"-c-fallback.ably-realtime.com",h+"-d-fallback.ably-realtime.com",h+"-e-fallback.ably-realtime.com"]}r.environmentFallbackHosts=P;function y(h){var A=h.fallbackHosts,M=typeof h.httpMaxRetryCount<"u"?h.httpMaxRetryCount:O.httpMaxRetryCount;return A?g.arrChooseN(A,M):[]}r.getFallbackHosts=y;function c(h){return[h.restHost].concat(y(h))}r.getHosts=c;function p(h){if(typeof h!="string")throw new m.default("host must be a string; was a "+typeof h,4e4,400);if(!h.length)throw new m.default("host must not be zero-length",4e4,400)}function C(h,A,M){return h.realtimeHost?h.realtimeHost:h.restHost?(v.default.logAction(v.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+h.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+h.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),h.restHost):A?O.REALTIME_HOST:M+"-"+O.REALTIME_HOST}function f(h){var A={};for(var M in O.TIMEOUTS)A[M]=h[M]||O.TIMEOUTS[M];return A}function u(h){var A=O.agent;if(h.agents)for(var M in h.agents)A+=" "+M+"/"+h.agents[M];return A}r.getAgentString=u;function s(h){return typeof h=="string"?h.indexOf(":")==-1?{token:h}:{key:h}:h}r.objectifyOptions=s;function l(h){if(h.host&&(v.default.deprecated("host","restHost"),h.restHost=h.host),h.wsHost&&(v.default.deprecated("wsHost","realtimeHost"),h.realtimeHost=h.wsHost),h.queueEvents&&(v.default.deprecated("queueEvents","queueMessages"),h.queueMessages=h.queueEvents),h.fallbackHostsUseDefault){if(h.fallbackHosts){var A="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw v.default.logAction(v.default.LOG_ERROR,"Defaults.normaliseOptions",A),new m.default(A,4e4,400)}if(h.port||h.tlsPort){var A="fallbackHostsUseDefault cannot be set when port or tlsPort are set";throw v.default.logAction(v.default.LOG_ERROR,"Defaults.normaliseOptions",A),new m.default(A,4e4,400)}h.environment?v.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):v.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),h.fallbackHosts=O.FALLBACK_HOSTS}h.recover===!0&&(v.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),h.recover=function(G,I){I(!0)}),typeof h.recover=="function"&&h.closeOnUnload===!0&&(v.default.logAction(v.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),h.recover=void 0),"closeOnUnload"in h||(h.closeOnUnload=!h.recover),h.transports&&g.arrIn(h.transports,"xhr")&&(v.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),g.arrDeleteValue(h.transports,"xhr"),h.transports.push("xhr_streaming")),"queueMessages"in h||(h.queueMessages=!0);var M=h.environment&&String(h.environment).toLowerCase()||O.ENVIRONMENT,x=!M||M==="production";!h.fallbackHosts&&!h.restHost&&!h.realtimeHost&&!h.port&&!h.tlsPort&&(h.fallbackHosts=x?O.FALLBACK_HOSTS:P(M));var N=h.restHost||(x?O.REST_HOST:M+"-"+O.REST_HOST),L=C(h,x,M);g.arrForEach((h.fallbackHosts||[]).concat(N,L),p),h.port=h.port||O.PORT,h.tlsPort=h.tlsPort||O.TLS_PORT,"tls"in h||(h.tls=!0);var _=f(h);if("useBinaryProtocol"in h?h.useBinaryProtocol=a.default.Config.supportsBinary&&h.useBinaryProtocol:h.useBinaryProtocol=a.default.Config.preferBinary,h.clientId){var k=h.headers=h.headers||{};k["X-Ably-ClientId"]=a.default.BufferUtils.base64Encode(a.default.BufferUtils.utf8Encode(h.clientId))}"idempotentRestPublishing"in h||(h.idempotentRestPublishing=!0),h.promises&&!a.default.Config.Promise&&(v.default.logAction(v.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),h.promises=!1);var B=null,j=h.connectivityCheckUrl;if(h.connectivityCheckUrl){var F=h.connectivityCheckUrl.split("?"),V=F[0],W=F[1];B=W?g.parseQueryString(W):{},V.indexOf("://")===-1&&(V="https://"+V),j=V}return o.__assign(o.__assign({},h),{useBinaryProtocol:"useBinaryProtocol"in h?a.default.Config.supportsBinary&&h.useBinaryProtocol:a.default.Config.preferBinary,realtimeHost:L,restHost:N,maxMessageSize:h.maxMessageSize||O.maxMessageSize,timeouts:_,connectivityCheckParams:B,connectivityCheckUrl:j})}r.normaliseOptions=l,r.default=O;function S(h){return Object.assign(O,h)}r.getDefaults=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(3)),g=o.__importDefault(i(2)),v=o.__importDefault(i(4)),m=o.__importStar(i(1));function w(d){return!d||!d.channelOptions?{channelOptions:d,plugins:{},baseEncodedPreviousPayload:void 0}:d}function R(d){if(d&&d.cipher){if(!a.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var E=a.default.Crypto.getCipher(d.cipher);return{cipher:E.cipherParams,channelCipher:E.cipher}}return d??{}}function O(d){var E=0;return d.name&&(E+=d.name.length),d.clientId&&(E+=d.clientId.length),d.extras&&(E+=JSON.stringify(d.extras).length),d.data&&(E+=m.dataSizeBytes(d.data)),E}var T=function(){function d(){}return d.prototype.toJSON=function(){var E=this.encoding,P=this.data;return P&&a.default.BufferUtils.isBuffer(P)&&(arguments.length>0?(E=E?E+"/base64":"base64",P=a.default.BufferUtils.base64Encode(P)):P=a.default.BufferUtils.toBuffer(P)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:E,data:P}},d.prototype.toString=function(){var E="[Message";return this.name&&(E+="; name="+this.name),this.id&&(E+="; id="+this.id),this.timestamp&&(E+="; timestamp="+this.timestamp),this.clientId&&(E+="; clientId="+this.clientId),this.connectionId&&(E+="; connectionId="+this.connectionId),this.encoding&&(E+="; encoding="+this.encoding),this.extras&&(E+="; extras ="+JSON.stringify(this.extras)),this.data&&(typeof this.data=="string"?E+="; data="+this.data:a.default.BufferUtils.isBuffer(this.data)?E+="; data (buffer)="+a.default.BufferUtils.base64Encode(this.data):E+="; data (json)="+JSON.stringify(this.data)),this.extras&&(E+="; extras="+JSON.stringify(this.extras)),E+="]",E},d.encrypt=function(E,P,y){var c=E.data,p=E.encoding,C=P.channelCipher;p=p?p+"/":"",a.default.BufferUtils.isBuffer(c)||(c=a.default.BufferUtils.utf8Encode(String(c)),p=p+"utf-8/"),C.encrypt(c,function(f,u){if(f){y(f);return}E.data=u,E.encoding=p+"cipher+"+C.algorithm,y(null,E)})},d.encode=function(E,P,y){var c=E.data,p=typeof c=="string"||a.default.BufferUtils.isBuffer(c)||c===null||c===void 0;if(!p)if(m.isObject(c)||m.isArray(c))E.data=JSON.stringify(c),E.encoding=E.encoding?E.encoding+"/json":"json";else throw new v.default("Data type is unsupported",40013,400);P!=null&&P.cipher?d.encrypt(E,P,y):y(null,E)},d.encodeArray=function(E,P,y){for(var c=0,p=0;p<E.length;p++)d.encode(E[p],P,function(C){if(C){y(C);return}c++,c==E.length&&y(null,E)})},d.decode=function(E,P){var y=w(P),c=E.data,p=E.encoding;if(p){var C=p.split("/"),f=void 0,u=C.length,s=E.data,l="";try{for(;(f=u)>0;){var S=C[--u].match(/([-\w]+)(\+([\w-]+))?/);if(!S)break;switch(l=S[1],l){case"base64":s=a.default.BufferUtils.base64Decode(String(s)),f==C.length&&(c=s);continue;case"utf-8":s=a.default.BufferUtils.utf8Decode(s);continue;case"json":s=JSON.parse(s);continue;case"cipher":if(y.channelOptions!=null&&y.channelOptions.cipher&&y.channelOptions.channelCipher){var h=S[3],A=y.channelOptions.channelCipher;if(h!=A.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");s=A.decrypt(s);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!y.plugins||!y.plugins.vcdiff)throw new v.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new v.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var M=y.baseEncodedPreviousPayload;typeof M=="string"&&(M=a.default.BufferUtils.utf8Encode(M)),M=a.default.BufferUtils.toBuffer(M),s=a.default.BufferUtils.toBuffer(s),s=a.default.BufferUtils.typedArrayToBuffer(y.plugins.vcdiff.decode(s,M)),c=s}catch(N){throw new v.default("Vcdiff delta decode failed with "+N,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(N){var x=N;throw new v.default("Error processing the "+l+" encoding, decoder returned "+x.message+"",x.code||40013,400)}finally{E.encoding=f<=0?null:C.slice(0,f).join("/"),E.data=s}}y.baseEncodedPreviousPayload=c},d.fromResponseBody=function(E,P,y){y&&(E=m.decodeBody(E,y));for(var c=0;c<E.length;c++){var p=E[c]=d.fromValues(E[c]);try{d.decode(p,P)}catch(C){g.default.logAction(g.default.LOG_ERROR,"Message.fromResponseBody()",C.toString())}}return E},d.fromValues=function(E){return Object.assign(new d,E)},d.fromValuesArray=function(E){for(var P=E.length,y=new Array(P),c=0;c<P;c++)y[c]=d.fromValues(E[c]);return y},d.fromEncoded=function(E,P){var y=d.fromValues(E),c=R(P??null);try{d.decode(y,c)}catch(p){g.default.logAction(g.default.LOG_ERROR,"Message.fromEncoded()",p.toString())}return y},d.fromEncodedArray=function(E,P){return E.map(function(y){return d.fromEncoded(y,P)})},d.getMessagesSize=function(E){for(var P,y=0,c=0;c<E.length;c++)P=E[c],y+=P.size||(P.size=O(P));return y},d.serialize=m.encodeBody,d}();r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(4)),v=o.__importDefault(i(9)),m=o.__importDefault(i(14)),w={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},R=[];Object.keys(w).forEach(function(y){R[w[y]]=y});var O={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},T=Object.keys(O);O.MODE_ALL=O.PRESENCE|O.PUBLISH|O.SUBSCRIBE|O.PRESENCE_SUBSCRIBE;function d(y){var c=[];if(y)for(var p=0;p<y.length;p++)c.push(y[p].toString());return"[ "+c.join(", ")+" ]"}var E="id channel channelSerial connectionId count msgSerial timestamp".split(" "),P=function(){function y(){var c=this;this.hasFlag=function(p){return(c.flags&O[p])>0}}return y.prototype.setFlag=function(c){return this.flags=this.flags|O[c]},y.prototype.getMode=function(){return this.flags&&this.flags&O.MODE_ALL},y.prototype.encodeModesToFlags=function(c){var p=this;c.forEach(function(C){return p.setFlag(C)})},y.prototype.decodeModesFromFlags=function(){var c=this,p=[];return y.channelModes.forEach(function(C){c.hasFlag(C)&&p.push(C)}),p.length>0?p:void 0},y.fromValues=function(c){return Object.assign(new y,c)},y.Action=w,y.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],y.ActionName=R,y.serialize=a.encodeBody,y.deserialize=function(c,p){var C=a.decodeBody(c,p);return y.fromDeserialized(C)},y.fromDeserialized=function(c){var p=c.error;p&&(c.error=g.default.fromValues(p));var C=c.messages;if(C)for(var f=0;f<C.length;f++)C[f]=v.default.fromValues(C[f]);var u=c.presence;if(u)for(var f=0;f<u.length;f++)u[f]=m.default.fromValues(u[f],!0);return Object.assign(new y,c)},y.stringify=function(c){var p="[ProtocolMessage";c.action!==void 0&&(p+="; action="+y.ActionName[c.action]||!1);for(var C,f=0;f<E.length;f++)C=E[f],c[C]!==void 0&&(p+="; "+C+"="+c[C]);if(c.messages&&(p+="; messages="+d(v.default.fromValuesArray(c.messages))),c.presence&&(p+="; presence="+d(m.default.fromValuesArray(c.presence))),c.error&&(p+="; error="+g.default.fromValues(c.error).toString()),c.auth&&c.auth.accessToken&&(p+="; token="+c.auth.accessToken),c.flags&&(p+="; flags="+T.filter(c.hasFlag).join(",")),c.params){var u="";a.forInOwnNonNullProperties(c.params,function(s){u.length>0&&(u+="; "),u+=s+"="+c.params[s]}),u.length>0&&(p+="; params=["+u+"]")}return p+="]",p},y}();r.default=P},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(){var a=o,g=a.lib,v=g.WordArray,m=a.enc;m.Base64={stringify:function(R){var O=R.words,T=R.sigBytes,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";R.clamp();for(var E=[],P=0;P<T;P+=3)for(var y=O[P>>>2]>>>24-P%4*8&255,c=O[P+1>>>2]>>>24-(P+1)%4*8&255,p=O[P+2>>>2]>>>24-(P+2)%4*8&255,C=y<<16|c<<8|p,f=0;f<4&&P+f*.75<T;f++)E.push(d.charAt(C>>>6*(3-f)&63));var u=d.charAt(64);if(u)for(;E.length%4;)E.push(u);return E.join("")},parse:function(R){var O=R.length,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var E=0;E<T.length;E++)d[T.charCodeAt(E)]=E}var P=T.charAt(64);if(P){var y=R.indexOf(P);y!==-1&&(O=y)}return w(R,O,d)}};function w(R,O,T){for(var d=[],E=0,P=0;P<O;P++)if(P%4){var y=T[R.charCodeAt(P-1)]<<P%4*2,c=T[R.charCodeAt(P)]>>>6-P%4*2,p=y|c;d[E>>>2]|=p<<24-E%4*8,E++}return v.create(d,E)}}(),o.enc.Base64})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(10)),v=o.__importDefault(i(25)),m=o.__importDefault(i(2)),w=o.__importDefault(i(8)),R=o.__importDefault(i(19)),O=o.__importDefault(i(16)),T=o.__importDefault(i(4)),d=o.__importDefault(i(20)),E=o.__importDefault(i(3));function P(p){var C=[80015,80017,80030];return p.code?O.default.isTokenErr(p)?!1:a.arrIn(C,p.code)?!0:p.code>=4e4&&p.code<5e4:!1}function y(p){return P(p)?[g.default.fromValues({action:g.default.Action.ERROR,error:p})]:[g.default.fromValues({action:g.default.Action.DISCONNECTED,error:p})]}var c=function(p){o.__extends(C,p);function C(f,u,s){var l=p.call(this,f,u,s,!0)||this;return l.onAuthUpdated=function(S){l.authParams={access_token:S.token}},l.stream="stream"in s?s.stream:!0,l.sendRequest=null,l.recvRequest=null,l.pendingCallback=null,l.pendingItems=null,l}return C.prototype.connect=function(){var f=this;m.default.logAction(m.default.LOG_MINOR,"CometTransport.connect()","starting"),v.default.prototype.connect.call(this);var u=this.params,s=u.options,l=w.default.getHost(s,u.host),S=w.default.getPort(s),h=s.tls?"https://":"http://";this.baseUri=h+l+":"+S+"/comet/";var A=this.baseUri+"connect";m.default.logAction(m.default.LOG_MINOR,"CometTransport.connect()","uri: "+A),this.auth.getAuthParams(function(M,x){if(M){f.disconnect(M);return}if(!f.isDisposed){f.authParams=x;var N=f.params.getConnectParams(x);"stream"in N&&(f.stream=N.stream),m.default.logAction(m.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+a.toQueryString(N));var L=!1,_=f.recvRequest=f.createRequest(A,null,N,null,f.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV);_.on("data",function(k){f.recvRequest&&(L||(L=!0,f.emit("preconnect")),f.onData(k))}),_.on("complete",function(k){if(f.recvRequest||(k=k||new T.default("Request cancelled",80003,400)),f.recvRequest=null,!L&&!k&&(L=!0,f.emit("preconnect")),f.onActivity(),k){k.code?f.onData(y(k)):f.disconnect(k);return}E.default.Config.nextTick(function(){f.recv()})}),_.exec()}})},C.prototype.requestClose=function(){m.default.logAction(m.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},C.prototype.requestDisconnect=function(){m.default.logAction(m.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},C.prototype._requestCloseOrDisconnect=function(f){var u=this,s=f?this.closeUri:this.disconnectUri;if(s){var l=this.createRequest(s,null,this.authParams,null,d.default.REQ_SEND);l.on("complete",function(S){S&&(m.default.logAction(m.default.LOG_ERROR,"CometTransport.request"+(f?"Close()":"Disconnect()"),"request returned err = "+a.inspectError(S)),u.finish("disconnected",S))}),l.exec()}},C.prototype.dispose=function(){var f=this;m.default.logAction(m.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(m.default.logAction(m.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",R.default.disconnected()),E.default.Config.nextTick(function(){f.emit("disposed")}))},C.prototype.onConnect=function(f){var u;if(!this.isDisposed){var s=(u=f.connectionDetails)===null||u===void 0?void 0:u.connectionKey;v.default.prototype.onConnect.call(this,f);var l=this.baseUri+s;m.default.logAction(m.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+l),this.sendUri=l+"/send",this.recvUri=l+"/recv",this.closeUri=l+"/close",this.disconnectUri=l+"/disconnect"}},C.prototype.send=function(f){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(f);return}var u=this.pendingItems||[];u.push(f),this.pendingItems=null,this.sendItems(u)},C.prototype.sendAnyPending=function(){var f=this.pendingItems;f&&(this.pendingItems=null,this.sendItems(f))},C.prototype.sendItems=function(f){var u=this,s=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(f),d.default.REQ_SEND);s.on("complete",function(l,S){if(l&&m.default.logAction(m.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+a.inspectError(l)),u.sendRequest=null,l){l.code?u.onData(y(l)):u.disconnect(l);return}S&&u.onData(S),u.pendingItems&&E.default.Config.nextTick(function(){u.sendRequest||u.sendAnyPending()})}),s.exec()},C.prototype.recv=function(){var f=this;if(!this.recvRequest&&this.isConnected){var u=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV_POLL);u.on("data",function(s){f.onData(s)}),u.on("complete",function(s){if(f.recvRequest=null,f.onActivity(),s){s.code?f.onData(y(s)):f.disconnect(s);return}E.default.Config.nextTick(function(){f.recv()})}),u.exec()}},C.prototype.onData=function(f){try{var u=this.decodeResponse(f);if(u&&u.length)for(var s=0;s<u.length;s++)this.onProtocolMessage(g.default.fromDeserialized(u[s]))}catch(l){m.default.logAction(m.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+l.stack)}},C.prototype.encodeRequest=function(f){return JSON.stringify(f)},C.prototype.decodeResponse=function(f){return typeof f=="string"?JSON.parse(f):f},C}(v.default);r.default=c},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(2)),g=o.__importDefault(i(3)),v=o.__importDefault(i(9)),m=o.__importStar(i(1));function w(O){return R.Actions.indexOf(O)}var R=function(){function O(){}return O.prototype.isSynthesized=function(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId},O.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var T=this.id.split(":");return{connectionId:T[0],msgSerial:parseInt(T[1],10),index:parseInt(T[2],10)}},O.prototype.toJSON=function(){var T=this.data,d=this.encoding;return T&&g.default.BufferUtils.isBuffer(T)&&(arguments.length>0?(d=d?d+"/base64":"base64",T=g.default.BufferUtils.base64Encode(T)):T=g.default.BufferUtils.toBuffer(T)),{id:this.id,clientId:this.clientId,action:w(this.action),data:T,encoding:d}},O.prototype.toString=function(){var T="[PresenceMessage";return T+="; action="+this.action,this.id&&(T+="; id="+this.id),this.timestamp&&(T+="; timestamp="+this.timestamp),this.clientId&&(T+="; clientId="+this.clientId),this.connectionId&&(T+="; connectionId="+this.connectionId),this.encoding&&(T+="; encoding="+this.encoding),this.data&&(typeof this.data=="string"?T+="; data="+this.data:g.default.BufferUtils.isBuffer(this.data)?T+="; data (buffer)="+g.default.BufferUtils.base64Encode(this.data):T+="; data (json)="+JSON.stringify(this.data)),T+="]",T},O.fromResponseBody=function(T,d,E){var P=[];E&&(T=m.decodeBody(T,E));for(var y=0;y<T.length;y++){var c=P[y]=O.fromValues(T[y],!0);try{O.decode(c,d)}catch(p){a.default.logAction(a.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",p.toString())}}return P},O.fromValues=function(T,d){return d&&(T.action=O.Actions[T.action]),Object.assign(new O,T)},O.fromValuesArray=function(T){for(var d=T.length,E=new Array(d),P=0;P<d;P++)E[P]=O.fromValues(T[P]);return E},O.fromEncoded=function(T,d){var E=O.fromValues(T,!0);try{O.decode(E,d??{})}catch(P){a.default.logAction(a.default.LOG_ERROR,"PresenceMessage.fromEncoded()",P.toString())}return E},O.fromEncodedArray=function(T,d){return T.map(function(E){return O.fromEncoded(E,d)})},O.Actions=["absent","present","enter","leave","update"],O.encode=v.default.encode,O.decode=v.default.decode,O.getMessagesSize=v.default.getMessagesSize,O}();r.default=R},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),g=a.__importStar(i(1)),v=a.__importDefault(i(7)),m=a.__importStar(i(4)),w=a.__importDefault(i(2)),R=a.__importDefault(i(8)),O=a.__importDefault(i(20)),T=a.__importDefault(i(3));function d(h,A){return g.arrIn(g.allToLowerCase(g.keysArray(A)),"x-ably-errorcode")}function E(h,A){if(d(h,A))return h.error&&m.default.fromValues(h.error)}var P=function(){},y=0,c={},p=typeof o<"u"&&o.XDomainRequest;function C(){var h=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/);return h&&Number(h[1])}function f(){var h;return p&&(h=C())&&h===10}function u(h,A){return h.getResponseHeader&&h.getResponseHeader(A)}function s(h){return h.getResponseHeader&&(h.getResponseHeader("transfer-encoding")||!h.getResponseHeader("content-length"))}function l(h){for(var A=g.trim(h.getAllResponseHeaders()).split(`\r
`),M={},x=0;x<A.length;x++){var N=A[x].split(":").map(g.trim);M[N[0].toLowerCase()]=N[1]}return M}var S=function(h){a.__extends(A,h);function A(M,x,N,L,_,k,B){var j=h.call(this)||this;return N=N||{},N.rnd=g.cheapRandStr(),f()&&!N.envelope&&(N.envelope="json"),j.uri=M+g.toQueryString(N),j.headers=x||{},j.body=L,j.method=B?B.toUpperCase():g.isEmptyArg(L)?"GET":"POST",j.requestMode=_,j.timeouts=k,j.timedOut=!1,j.requestComplete=!1,j.id=String(++y),c[j.id]=j,j}return A.createRequest=function(M,x,N,L,_,k,B){var j=k||R.default.TIMEOUTS;return new A(M,x,g.copy(N),L,_,j,B)},A.prototype.complete=function(M,x,N,L,_){this.requestComplete||(this.requestComplete=!0,!M&&x&&this.emit("data",x),this.emit("complete",M,x,N,L,_),this.dispose())},A.prototype.abort=function(){this.dispose()},A.prototype.exec=function(){var M=this,x=this.headers,N=this.requestMode==O.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,L=this.timer=setTimeout(function(){M.timedOut=!0,k.abort()},N),_=this.method,k=this.xhr=new XMLHttpRequest,B=x.accept,j=this.body,F="text";if(B?B.indexOf("application/x-msgpack")===0&&(F="arraybuffer"):x.accept="application/json",j){var V=x["content-type"]||(x["content-type"]="application/json");V.indexOf("application/json")>-1&&typeof j!="string"&&(j=JSON.stringify(j))}k.open(_,this.uri,!0),k.responseType=F,"authorization"in x&&(k.withCredentials=!0);for(var W in x)k.setRequestHeader(W,x[W]);var G=function(Z,ce,le,Je){var tt,Ae=ce+" (event type: "+Z.type+")";!((tt=M==null?void 0:M.xhr)===null||tt===void 0)&&tt.statusText&&(Ae+=", current statusText is "+M.xhr.statusText),w.default.logAction(w.default.LOG_ERROR,"Request.on"+Z.type+"()",Ae),M.complete(new m.PartialErrorInfo(Ae,le,Je))};k.onerror=function(Z){G(Z,"XHR error occurred",null,400)},k.onabort=function(Z){M.timedOut?G(Z,"Request aborted due to request timeout expiring",null,408):G(Z,"Request cancelled",null,400)},k.ontimeout=function(Z){G(Z,"Request timed out",null,408)};var I,U,D,z=0,Q=!1,X=function(){if(clearTimeout(L),D=U<400,U==204){M.complete(null,null,null,null,U);return}I=M.requestMode==O.default.REQ_RECV_STREAM&&D&&s(k)},Y=function(){var Z;try{var ce=u(k,"content-type"),le=ce?ce.indexOf("application/json")>=0:k.responseType=="text";if(le){var Je=k.responseType==="arraybuffer"?T.default.BufferUtils.utf8Decode(k.response):String(k.responseText);Je.length?Z=JSON.parse(Je):Z=Je,Q=!0}else Z=k.response;Z.response!==void 0?(U=Z.statusCode,D=U<400,x=Z.headers,Z=Z.response):x=l(k)}catch(Ae){M.complete(new m.PartialErrorInfo("Malformed response body from server: "+Ae.message,null,400));return}if(D||g.isArray(Z)){M.complete(null,Z,x,Q,U);return}var tt=E(Z,x);tt||(tt=new m.PartialErrorInfo("Error response received from server: "+U+" body was: "+T.default.Config.inspect(Z),null,U)),M.complete(tt,Z,x,Q,U)};function ee(){for(var Z=k.responseText,ce=Z.length-1,le,Je;z<ce&&(le=Z.indexOf(`
`,z))>-1;)Je=Z.slice(z,le),z=le+1,te(Je)}var te=function(Z){try{Z=JSON.parse(Z)}catch(ce){M.complete(new m.PartialErrorInfo("Malformed response body from server: "+ce.message,null,400));return}M.emit("data",Z)},ae=function(){ee(),M.streamComplete=!0,T.default.Config.nextTick(function(){M.complete()})};k.onreadystatechange=function(){var Z=k.readyState;Z<3||k.status!==0&&(U===void 0&&(U=k.status,U===1223&&(U=204),X()),Z==3&&I?ee():Z==4&&(I?ae():Y()))},k.send(j)},A.prototype.dispose=function(){var M=this.xhr;if(M){M.onreadystatechange=M.onerror=M.onabort=M.ontimeout=P,this.xhr=null;var x=this.timer;x&&(clearTimeout(x),this.timer=null),this.requestComplete||M.abort()}delete c[this.id]},A}(v.default);r.default=S}).call(this,i(13))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(2)),g=o.__importStar(i(1)),v=o.__importDefault(i(22)),m=o.__importDefault(i(4)),w=o.__importDefault(i(45)),R=i(11),O=o.__importDefault(i(17)),T=o.__importDefault(i(3)),d=Math.pow(2,17);function E(){}function P(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function y(M){return!!M.connection}function c(M){return g.isErrorInfoOrPartialErrorInfo(M)?(M.code||(M.statusCode===403?M.code=40300:(M.code=40170,M.statusCode=401)),M):new m.default(g.inspectError(M),M.code||40170,M.statusCode||401)}var p=function(M,x){if(T.default.Config.createHmac){var N=T.default.Config.createHmac("SHA256",x);return N.update(M),N.digest("base64")}return(0,R.stringify)((0,w.default)(M,x))};function C(M){if(!M)return"";typeof M=="string"&&(M=JSON.parse(M));var x=Object.create(null),N=g.keysArray(M,!0);if(!N)return"";N.sort();for(var L=0;L<N.length;L++)x[N[L]]=M[N[L]].sort();return JSON.stringify(x)}function f(M){if(M.authCallback)a.default.logAction(a.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(M.authUrl)a.default.logAction(a.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(M.key)a.default.logAction(a.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(M.tokenDetails)a.default.logAction(a.default.LOG_MINOR,"Auth()","using token auth with supplied token only");else{var x="authOptions must include valid authentication parameters";throw a.default.logAction(a.default.LOG_ERROR,"Auth()",x),new Error(x)}}function u(M){return"useTokenAuth"in M&&!M.useTokenAuth}function s(M){return M.useTokenAuth||!u(M)&&(M.authCallback||M.authUrl||M.token||M.tokenDetails)}function l(M){return!M.key&&!M.authCallback&&!M.authUrl}var S=0;function h(){return S++}var A=function(){function M(x,N){if(this.authOptions={},this.client=x,this.tokenParams=N.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,s(N)){if(N.key&&!p){var L="client-side token request signing not supported";throw a.default.logAction(a.default.LOG_ERROR,"Auth()",L),new Error(L)}l(N)&&a.default.logAction(a.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(N.defaultTokenParams,N),f(this.authOptions)}else{if(!N.key){var L="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw a.default.logAction(a.default.LOG_ERROR,"Auth()",L),new m.default(L,40160,401)}a.default.logAction(a.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(N)}}return M.prototype.authorize=function(x,N,L){var _=this,k;if(typeof x=="function"&&!L?(L=x,k=x=null):typeof N=="function"&&!L?(L=N,k=null):k=N,!L&&this.client.options.promises)return g.promisify(this,"authorize",arguments);if(k&&k.key&&this.authOptions.key!==k.key)throw new m.default("Unable to update auth options with incompatible key",40102,401);k&&"force"in k&&(a.default.logAction(a.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),g.isOnlyPropIn(k,"force")&&(k=null)),this._forceNewToken(x,k,function(B,j){if(B){_.client.connection&&_.client.connection.connectionManager.actOnErrorFromAuthorize(B),L==null||L(B);return}y(_.client)?_.client.connection.connectionManager.onAuthUpdated(j,L||E):L==null||L(null,j)})},M.prototype.authorise=function(x,N,L){a.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(x,N,L)},M.prototype._forceNewToken=function(x,N,L){var _=this;this.tokenDetails=null,this._saveTokenOptions(x,N),f(this.authOptions),this._ensureValidAuthCredentials(!0,function(k,B){delete _.tokenParams.timestamp,delete _.authOptions.queryTime,L(k,B)})},M.prototype.requestToken=function(x,N,L){var _=this;if(typeof x=="function"&&!L?(L=x,N=x=null):typeof N=="function"&&!L&&(L=N,N=null),!L&&this.client.options.promises)return g.promisify(this,"requestToken",arguments);N=N||this.authOptions,x=x||g.copy(this.tokenParams);var k=L||E,B,j=this.client;if(N.authCallback)a.default.logAction(a.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),B=N.authCallback;else if(N.authUrl)a.default.logAction(a.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),B=function(U,D){var z=g.mixin({accept:"application/json, text/plain"},N.authHeaders),Q=N.authMethod&&N.authMethod.toLowerCase()==="post",X,Y=N.authUrl.indexOf("?");Y>-1&&(X=g.parseQueryString(N.authUrl.slice(Y)),N.authUrl=N.authUrl.slice(0,Y),Q||(N.authParams=g.mixin(X,N.authParams)));var ee=g.mixin({},N.authParams||{},U),te=function(ce,le,Je,tt){var Ae;if(ce?a.default.logAction(a.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+g.inspectError(ce)):(Ae=Je["content-type"],a.default.logAction(a.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Ae+"; body: "+g.inspectBody(le))),ce||tt)return D(ce,le);if(T.default.BufferUtils.isBuffer(le)&&(le=le.toString()),!Ae){D(new m.default("authUrl response is missing a content-type header",40170,401));return}var Tr=Ae.indexOf("application/json")>-1,Gi=Ae.indexOf("text/plain")>-1||Ae.indexOf("application/jwt")>-1;if(!Tr&&!Gi){D(new m.default("authUrl responded with unacceptable content-type "+Ae+", should be either text/plain, application/jwt or application/json",40170,401));return}if(Tr){if(le.length>d){D(new m.default("authUrl response exceeded max permitted length",40170,401));return}try{le=JSON.parse(le)}catch(Vi){D(new m.default("Unexpected error processing authURL response; err = "+Vi.message,40170,401));return}}D(null,le,Ae)};if(a.default.logAction(a.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+N.authUrl+"; Params: "+JSON.stringify(ee)+"; method: "+(Q?"POST":"GET")),Q){var ae=z||{};ae["content-type"]="application/x-www-form-urlencoded";var Z=g.toQueryString(ee).slice(1);_.client.http.doUri(O.default.Post,j,N.authUrl,ae,Z,X,te)}else _.client.http.doUri(O.default.Get,j,N.authUrl,z||{},null,ee,te)};else if(N.key)a.default.logAction(a.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),B=function(U,D){_.createTokenRequest(U,N,D)};else{var F="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";a.default.logAction(a.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),k(new m.default(F,40171,403));return}"capability"in x&&(x.capability=C(x.capability));var V=function(U,D){var z=U.keyName,Q="/keys/"+z+"/requestToken",X=function(ee){return j.baseUri(ee)+Q},Y=g.defaultPostHeaders(_.client.options);N.requestHeaders&&g.mixin(Y,N.requestHeaders),a.default.logAction(a.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+Q+"; Token params: "+JSON.stringify(U)),_.client.http.do(O.default.Post,j,X,Y,JSON.stringify(U),null,D)},W=!1,G=this.client.options.timeouts.realtimeRequestTimeout,I=setTimeout(function(){W=!0;var U="Token request callback timed out after "+G/1e3+" seconds";a.default.logAction(a.default.LOG_ERROR,"Auth.requestToken()",U),k(new m.default(U,40170,401))},G);B(x,function(U,D,z){if(!W){if(clearTimeout(I),U){a.default.logAction(a.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+g.inspectError(U)),k(c(U));return}if(typeof D=="string"){D.length===0?k(new m.default("Token string is empty",40170,401)):D.length>d?k(new m.default("Token string exceeded max permitted length (was "+D.length+" bytes)",40170,401)):D==="undefined"||D==="null"?k(new m.default("Token string was literal null/undefined",40170,401)):D[0]==="{"&&!(z&&z.indexOf("application/jwt")>-1)?k(new m.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):k(null,{token:D});return}if(typeof D!="object"){var Q="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof D;a.default.logAction(a.default.LOG_ERROR,"Auth.requestToken()",Q),k(new m.default(Q,40170,401));return}var X=JSON.stringify(D).length;if(X>d&&!N.suppressMaxLengthCheck){k(new m.default("Token request/details object exceeded max permitted stringified size (was "+X+" bytes)",40170,401));return}if("issued"in D){k(null,D);return}if(!("keyName"in D)){var Q="Expected token request callback to call back with a token string, token request object, or token details object";a.default.logAction(a.default.LOG_ERROR,"Auth.requestToken()",Q),k(new m.default(Q,40170,401));return}V(D,function(Y,ee,te,ae){if(Y){a.default.logAction(a.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+g.inspectError(Y)),k(c(Y));return}ae||(ee=JSON.parse(ee)),a.default.logAction(a.default.LOG_MINOR,"Auth.getToken()","token received"),k(null,ee)})}})},M.prototype.createTokenRequest=function(x,N,L){var _=this;if(typeof x=="function"&&!L?(L=x,N=x=null):typeof N=="function"&&!L&&(L=N,N=null),!L&&this.client.options.promises)return g.promisify(this,"createTokenRequest",arguments);N=N||this.authOptions,x=x||g.copy(this.tokenParams);var k=N.key;if(!k){L(new m.default("No key specified",40101,403));return}var B=k.split(":"),j=B[0],F=B[1];if(!F){L(new m.default("Invalid key specified",40101,403));return}if(x.clientId===""){L(new m.default("clientId cant be an empty string",40012,400));return}"capability"in x&&(x.capability=C(x.capability));var V=g.mixin({keyName:j},x),W=x.clientId||"",G=x.ttl||"",I=x.capability||"";(function(U){if(V.timestamp){U();return}_.getTimestamp(N&&N.queryTime,function(D,z){if(D){L(D);return}V.timestamp=z,U()})})(function(){var U=V.nonce||(V.nonce=P()),D=V.timestamp,z=V.keyName+`
`+G+`
`+I+`
`+W+`
`+D+`
`+U+`
`;V.mac=V.mac||p(z,F),a.default.logAction(a.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),L(null,V)})},M.prototype.getAuthParams=function(x){this.method=="basic"?x(null,{key:this.key}):this._ensureValidAuthCredentials(!1,function(N,L){if(N){x(N);return}if(!L)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");x(null,{access_token:L.token})})},M.prototype.getAuthHeaders=function(x){this.method=="basic"?x(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,function(N,L){if(N){x(N);return}if(!L)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");x(null,{authorization:"Bearer "+g.toBase64(L.token)})})},M.prototype.getTimestamp=function(x,N){!this.isTimeOffsetSet()&&(x||this.authOptions.queryTime)?this.client.time(N):N(null,this.getTimestampUsingOffset())},M.prototype.getTimestampUsingOffset=function(){return g.now()+(this.client.serverTimeOffset||0)},M.prototype.isTimeOffsetSet=function(){return this.client.serverTimeOffset!==null},M.prototype._saveBasicOptions=function(x){this.method="basic",this.key=x.key,this.basicKey=g.toBase64(x.key),this.authOptions=x||{},"clientId"in x&&this._userSetClientId(x.clientId)},M.prototype._saveTokenOptions=function(x,N){this.method="token",x&&(this.tokenParams=x),N&&(N.token&&(N.tokenDetails=typeof N.token=="string"?{token:N.token}:N.token),N.tokenDetails&&(this.tokenDetails=N.tokenDetails),"clientId"in N&&this._userSetClientId(N.clientId),this.authOptions=N)},M.prototype._ensureValidAuthCredentials=function(x,N){var L=this,_=this.tokenDetails;if(_){if(this._tokenClientIdMismatch(_.clientId)){N(new m.default("Mismatch between clientId in token ("+_.clientId+") and current clientId ("+this.clientId+")",40102,403));return}if(!this.isTimeOffsetSet()||!_.expires||_.expires>=this.getTimestampUsingOffset()){a.default.logAction(a.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+_.expires),N(null,_);return}a.default.logAction(a.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=v.default.create())).push(N),!(this.currentTokenRequestId!==null&&!x)){var k=this.currentTokenRequestId=h();this.requestToken(this.tokenParams,this.authOptions,function(B,j){if(L.currentTokenRequestId>k){a.default.logAction(a.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");return}L.currentTokenRequestId=null;var F=L.waitingForTokenRequest||E;if(L.waitingForTokenRequest=null,B){F(B);return}F(null,L.tokenDetails=j)})}},M.prototype._userSetClientId=function(x){if(typeof x=="string"||x===null){if(x==="*")throw new m.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var N=this._uncheckedSetClientId(x);if(N)throw N}else throw new m.default("clientId must be either a string or null",40012,400)},M.prototype._uncheckedSetClientId=function(x){if(this._tokenClientIdMismatch(x)){var N="Unexpected clientId mismatch: client has "+this.clientId+", requested "+x,L=new m.default(N,40102,401);return a.default.logAction(a.default.LOG_ERROR,"Auth._uncheckedSetClientId()",N),L}else return this.clientId=this.tokenParams.clientId=x,null},M.prototype._tokenClientIdMismatch=function(x){return!!(this.clientId&&this.clientId!=="*"&&x&&x!=="*"&&this.clientId!==x)},M.isTokenErr=function(x){return x.code&&x.code>=40140&&x.code<40150},M}();r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o;(function(a){a.Get="get",a.Delete="delete",a.Post="post",a.Put="put",a.Patch="patch"})(o||(o={})),r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.HttpPaginatedResponse=r.PaginatedResult=void 0;var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(2)),v=o.__importDefault(i(24));function m(E){var P=E.match(/^\.\/(\w+)\?(.*)$/);return P&&P[2]&&a.parseQueryString(P[2])}function w(E){typeof E=="string"&&(E=E.split(","));for(var P={},y=0;y<E.length;y++){var c=E[y].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(c){var p=m(c[1]);p&&(P[c[2]]=p)}}return P}function R(E,P,y){return!(y&&(P||typeof E.code=="number"))}var O=function(){function E(P,y,c,p,C,f){this.rest=P,this.path=y,this.headers=c,this.envelope=p??null,this.bodyHandler=C,this.useHttpPaginatedResponse=f||!1}return E.prototype.get=function(P,y){var c=this;v.default.get(this.rest,this.path,this.headers,P,this.envelope,function(p,C,f,u,s){c.handlePage(p,C,f,u,s,y)})},E.prototype.delete=function(P,y){var c=this;v.default.delete(this.rest,this.path,this.headers,P,this.envelope,function(p,C,f,u,s){c.handlePage(p,C,f,u,s,y)})},E.prototype.post=function(P,y,c){var p=this;v.default.post(this.rest,this.path,y,this.headers,P,this.envelope,function(C,f,u,s,l){c&&p.handlePage(C,f,u,s,l,c)})},E.prototype.put=function(P,y,c){var p=this;v.default.put(this.rest,this.path,y,this.headers,P,this.envelope,function(C,f,u,s,l){c&&p.handlePage(C,f,u,s,l,c)})},E.prototype.patch=function(P,y,c){var p=this;v.default.patch(this.rest,this.path,y,this.headers,P,this.envelope,function(C,f,u,s,l){c&&p.handlePage(C,f,u,s,l,c)})},E.prototype.handlePage=function(P,y,c,p,C,f){if(P&&R(P,y,this.useHttpPaginatedResponse)){g.default.logAction(g.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+a.inspectError(P)),f==null||f(P);return}var u,s,l;try{u=this.bodyHandler(y,c||{},p)}catch(S){f==null||f(P||S);return}c&&(s=c.Link||c.link)&&(l=w(s)),this.useHttpPaginatedResponse?f(null,new d(this,u,c||{},C,l,P)):f(null,new T(this,u,l))},E}(),T=function(){function E(P,y,c){var p=this;this.resource=P,this.items=y;var C=this;c&&("first"in c&&(this.first=function(f){if(!f&&C.resource.rest.options.promises)return a.promisify(C,"first",[]);C.get(c.first,f)}),"current"in c&&(this.current=function(f){if(!f&&C.resource.rest.options.promises)return a.promisify(C,"current",[]);C.get(c.current,f)}),this.next=function(f){if(!f&&C.resource.rest.options.promises)return a.promisify(C,"next",[]);"next"in c?C.get(c.next,f):f(null)},this.hasNext=function(){return"next"in c},this.isLast=function(){var f;return!(!((f=p.hasNext)===null||f===void 0)&&f.call(p))})}return E.prototype.get=function(P,y){var c=this.resource;v.default.get(c.rest,c.path,c.headers,P,c.envelope,function(p,C,f,u,s){c.handlePage(p,C,f,u,s,y)})},E}();r.PaginatedResult=T;var d=function(E){o.__extends(P,E);function P(y,c,p,C,f,u){var s=E.call(this,y,c,f)||this;return s.statusCode=C,s.success=C<300&&C>=200,s.headers=p,s.errorCode=u&&u.code,s.errorMessage=u&&u.message,s}return P.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},P}(T);r.HttpPaginatedResponse=d,r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.isRetriable=void 0;var o=i(0),a=o.__importDefault(i(4)),g={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},v={disconnected:function(){return a.default.fromValues({statusCode:400,code:g.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return a.default.fromValues({statusCode:400,code:g.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return a.default.fromValues({statusCode:400,code:g.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return a.default.fromValues({statusCode:400,code:g.CLOSING,message:"Connection closing"})},closed:function(){return a.default.fromValues({statusCode:400,code:g.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return a.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return a.default.fromValues({statusCode:500,code:g.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};function m(w){return!w.statusCode||!w.code||w.statusCode>=500?!0:Object.values(g).includes(w.code)}r.isRetriable=m,r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o;(function(a){a[a.REQ_SEND=0]="REQ_SEND",a[a.REQ_RECV=1]="REQ_RECV",a[a.REQ_RECV_POLL=2]="REQ_RECV_POLL",a[a.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"})(o||(o={})),r.default=o},function(n,r,i){(function(o,a){n.exports=a(i(6),i(5),i(58),i(11),i(40),i(31),i(23),i(26),i(27),i(59),i(60))})(this,function(o){return o})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(2)),g=function(){function v(m){this.members=m||[]}return v.prototype.call=function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];for(var R=0,O=this.members;R<O.length;R++){var T=O[R];if(T)try{T.apply(void 0,m)}catch(d){a.default.logAction(a.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+d+"; stack = "+d.stack)}}},v.prototype.push=function(){for(var m,w=[],R=0;R<arguments.length;R++)w[R]=arguments[R];(m=this.members).push.apply(m,w)},v.create=function(m){var w=new v(m);return Object.assign(function(){for(var R=[],O=0;O<arguments.length;O++)R[O]=arguments[O];return w.call.apply(w,R)},{push:function(R){return w.push(R)}})},v}();r.default=g},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){(function(){var a=o,g=a.lib,v=g.Base,m=a.enc,w=m.Utf8,R=a.algo;R.HMAC=v.extend({init:function(O,T){O=this._hasher=new O.init,typeof T=="string"&&(T=w.parse(T));var d=O.blockSize,E=d*4;T.sigBytes>E&&(T=O.finalize(T)),T.clamp();for(var P=this._oKey=T.clone(),y=this._iKey=T.clone(),c=P.words,p=y.words,C=0;C<d;C++)c[C]^=1549556828,p[C]^=909522486;P.sigBytes=y.sigBytes=E,this.reset()},reset:function(){var O=this._hasher;O.reset(),O.update(this._iKey)},update:function(O){return this._hasher.update(O),this},finalize:function(O){var T=this._hasher,d=T.finalize(O);T.reset();var E=T.finalize(this._oKey.clone().concat(d));return E}})})()})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(3)),g=o.__importStar(i(1)),v=o.__importDefault(i(2)),m=o.__importDefault(i(16)),w=o.__importDefault(i(17)),R=i(4);function O(c,p,C,f,u){c.http.supportsAuthHeaders?c.auth.getAuthHeaders(function(s,l){s?f(s):u(g.mixin(l,p),C)}):c.auth.getAuthParams(function(s,l){s?f(s):u(p,g.mixin(l,C))})}function T(c,p){return function(C,f,u,s,l){if(C&&!f){c(C);return}if(!s)try{f=g.decodeBody(f,p)}catch(N){g.isErrorInfoOrPartialErrorInfo(N)?c(N):c(new R.PartialErrorInfo(g.inspectError(N),null));return}if(!f){c(new R.PartialErrorInfo("unenvelope(): Response body is missing",null));return}var S=f,h=S.statusCode,A=S.response,M=S.headers;if(h===void 0){c(C,f,u,!0,l);return}if(h<200||h>=300){var x=A&&A.error||C;x||(x=new Error("Error in unenveloping "+f),x.statusCode=h),c(x,A,M,!0,h);return}c(C,A,M,!0,h)}}function d(c){var p=[];if(c)for(var C in c)p.push(C+"="+c[C]);return p.join("&")}function E(c,p){return c+(p?"?":"")+d(p)}function P(c,p,C,f){return function(u,s,l,S,h){u?v.default.logAction(v.default.LOG_MICRO,"Resource."+p+"()","Received Error; "+E(C,f)+"; Error: "+g.inspectError(u)):v.default.logAction(v.default.LOG_MICRO,"Resource."+p+"()","Received; "+E(C,f)+"; Headers: "+d(l)+"; StatusCode: "+h+"; Body: "+(a.default.BufferUtils.isBuffer(s)?s.toString():s)),c&&c(u,s,l,S,h)}}var y=function(){function c(){}return c.get=function(p,C,f,u,s,l){c.do(w.default.Get,p,C,null,f,u,s,l)},c.delete=function(p,C,f,u,s,l){c.do(w.default.Delete,p,C,null,f,u,s,l)},c.post=function(p,C,f,u,s,l,S){c.do(w.default.Post,p,C,f,u,s,l,S)},c.patch=function(p,C,f,u,s,l,S){c.do(w.default.Patch,p,C,f,u,s,l,S)},c.put=function(p,C,f,u,s,l,S){c.do(w.default.Put,p,C,f,u,s,l,S)},c.do=function(p,C,f,u,s,l,S,h){v.default.shouldLog(v.default.LOG_MICRO)&&(h=P(h,p,f,l)),S&&(h=h&&T(h,S),(l=l||{}).envelope=S);function A(M,x){var N;if(v.default.shouldLog(v.default.LOG_MICRO)&&v.default.logAction(v.default.LOG_MICRO,"Resource."+p+"()","Sending; "+E(f,x)),v.default.shouldLog(v.default.LOG_MICRO)){var L=u;if(((N=M["content-type"])===null||N===void 0?void 0:N.indexOf("msgpack"))>0)try{L=a.default.Config.msgpack.decode(u)}catch(_){v.default.logAction(v.default.LOG_MICRO,"Resource."+p+"()","Sending MsgPack Decoding Error: "+g.inspectError(_))}v.default.logAction(v.default.LOG_MICRO,"Resource."+p+"()","Sending; "+E(f,x)+"; Body: "+L)}C.http.do(p,C,f,M,u,x,function(_,k,B,j,F){if(_&&m.default.isTokenErr(_)){C.auth.authorize(null,null,function(V){if(V){h(V);return}O(C,B,x,h,A)});return}h(_,k,B,j,F)})}O(C,s,l,h,A)},c}();r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(10)),g=o.__importStar(i(1)),v=o.__importDefault(i(7)),m=o.__importDefault(i(2)),w=o.__importDefault(i(19)),R=o.__importDefault(i(4)),O=o.__importDefault(i(3)),T=a.default.Action,d=a.default.fromValues({action:T.CLOSE}),E=a.default.fromValues({action:T.DISCONNECT}),P=function(y){o.__extends(c,y);function c(p,C,f,u){var s=y.call(this)||this;return u&&(f.format=void 0,f.heartbeats=!0),s.connectionManager=p,p.registerProposedTransport(s),s.auth=C,s.params=f,s.timeouts=f.options.timeouts,s.format=f.format,s.isConnected=!1,s.isFinished=!1,s.isDisposed=!1,s.maxIdleInterval=null,s.idleTimer=null,s.lastActivity=null,s}return c.prototype.connect=function(){},c.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",w.default.closed())},c.prototype.disconnect=function(p){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",p||w.default.disconnected())},c.prototype.fail=function(p){this.isConnected&&this.requestDisconnect(),this.finish("failed",p||w.default.failed())},c.prototype.finish=function(p,C){var f;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((f=this.idleTimer)!==null&&f!==void 0?f:void 0),this.idleTimer=null,this.emit(p,C),this.dispose())},c.prototype.onProtocolMessage=function(p){switch(m.default.shouldLog(m.default.LOG_MICRO)&&m.default.logAction(m.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+a.default.stringify(p)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),p.action){case T.HEARTBEAT:m.default.logAction(m.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",p.id);break;case T.CONNECTED:this.onConnect(p),this.emit("connected",p.error,p.connectionId,p.connectionDetails,p);break;case T.CLOSED:this.onClose(p);break;case T.DISCONNECTED:this.onDisconnect(p);break;case T.ACK:this.emit("ack",p.msgSerial,p.count);break;case T.NACK:this.emit("nack",p.msgSerial,p.count,p.error);break;case T.SYNC:this.connectionManager.onChannelMessage(p,this);break;case T.ACTIVATE:break;case T.AUTH:this.auth.authorize(function(C){C&&m.default.logAction(m.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+g.inspectError(C))});break;case T.ERROR:if(m.default.logAction(m.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+O.default.Config.inspect(p.error)+(p.channel?", channel: "+p.channel:"")),p.channel===void 0){this.onFatalError(p);break}this.connectionManager.onChannelMessage(p,this);break;default:this.connectionManager.onChannelMessage(p,this)}},c.prototype.onConnect=function(p){if(this.isConnected=!0,!p.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var C=p.connectionDetails.maxIdleInterval;C&&(this.maxIdleInterval=C+this.timeouts.realtimeRequestTimeout,this.onActivity())},c.prototype.onDisconnect=function(p){var C=p&&p.error;m.default.logAction(m.default.LOG_MINOR,"Transport.onDisconnect()","err = "+g.inspectError(C)),this.finish("disconnected",C)},c.prototype.onFatalError=function(p){var C=p&&p.error;m.default.logAction(m.default.LOG_MINOR,"Transport.onFatalError()","err = "+g.inspectError(C)),this.finish("failed",C)},c.prototype.onClose=function(p){var C=p&&p.error;m.default.logAction(m.default.LOG_MINOR,"Transport.onClose()","err = "+g.inspectError(C)),this.finish("closed",C)},c.prototype.requestClose=function(){m.default.logAction(m.default.LOG_MINOR,"Transport.requestClose()",""),this.send(d)},c.prototype.requestDisconnect=function(){m.default.logAction(m.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(E)},c.prototype.ping=function(p){var C={action:a.default.Action.HEARTBEAT};p&&(C.id=p),this.send(a.default.fromValues(C))},c.prototype.dispose=function(){m.default.logAction(m.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},c.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=g.now(),this.setIdleTimer(this.maxIdleInterval+100))},c.prototype.setIdleTimer=function(p){var C=this;this.idleTimer||(this.idleTimer=setTimeout(function(){C.onIdleTimerExpire()},p))},c.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var p=g.now()-this.lastActivity,C=this.maxIdleInterval-p;if(C<=0){var f="No activity seen from realtime in "+p+"ms; assuming connection has dropped";m.default.logAction(m.default.LOG_ERROR,"Transport.onIdleTimerExpire()",f),this.disconnect(new R.default(f,80003,408))}else this.setIdleTimer(C+100)},c.tryConnect=function(p,C,f,u,s){var l=new p(C,f,u),S,h=function(M){clearTimeout(S),s({event:this.event,error:M})},A=C.options.timeouts.realtimeRequestTimeout;S=setTimeout(function(){l.off(["preconnect","disconnected","failed"]),l.dispose(),h.call({event:"disconnected"},new R.default("Timeout waiting for transport to indicate itself viable",5e4,500))},A),l.on(["failed","disconnected"],h),l.on("preconnect",function(){m.default.logAction(m.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+l),clearTimeout(S),l.off(["failed","disconnected"],h),s(null,l)}),l.connect()},c}(v.default);r.default=P},function(n,r,i){(function(o,a){n.exports=a(i(6),i(40),i(23))})(this,function(o){return function(){var a=o,g=a.lib,v=g.Base,m=g.WordArray,w=a.algo,R=w.MD5,O=w.EvpKDF=v.extend({cfg:v.extend({keySize:128/32,hasher:R,iterations:1}),init:function(T){this.cfg=this.cfg.extend(T)},compute:function(T,d){for(var E,P=this.cfg,y=P.hasher.create(),c=m.create(),p=c.words,C=P.keySize,f=P.iterations;p.length<C;){E&&y.update(E),E=y.update(T).finalize(d),y.reset();for(var u=1;u<f;u++)E=y.finalize(E),y.reset();c.concat(E)}return c.sigBytes=C*4,c}});a.EvpKDF=function(T,d,E){return O.create(E).compute(T,d)}}(),o.EvpKDF})},function(n,r,i){(function(o,a){n.exports=a(i(6),i(26))})(this,function(o){o.lib.Cipher||function(a){var g=o,v=g.lib,m=v.Base,w=v.WordArray,R=v.BufferedBlockAlgorithm,O=g.enc;O.Utf8;var T=O.Base64,d=g.algo,E=d.EvpKDF,P=v.Cipher=R.extend({cfg:m.extend(),createEncryptor:function(x,N){return this.create(this._ENC_XFORM_MODE,x,N)},createDecryptor:function(x,N){return this.create(this._DEC_XFORM_MODE,x,N)},init:function(x,N,L){this.cfg=this.cfg.extend(L),this._xformMode=x,this._key=N,this.reset()},reset:function(){R.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(N){return typeof N=="string"?M:S}return function(N){return{encrypt:function(L,_,k){return x(_).encrypt(N,L,_,k)},decrypt:function(L,_,k){return x(_).decrypt(N,L,_,k)}}}}()});v.StreamCipher=P.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1});var y=g.mode={},c=v.BlockCipherMode=m.extend({createEncryptor:function(x,N){return this.Encryptor.create(x,N)},createDecryptor:function(x,N){return this.Decryptor.create(x,N)},init:function(x,N){this._cipher=x,this._iv=N}}),p=y.CBC=function(){var x=c.extend();x.Encryptor=x.extend({processBlock:function(L,_){var k=this._cipher,B=k.blockSize;N.call(this,L,_,B),k.encryptBlock(L,_),this._prevBlock=L.slice(_,_+B)}}),x.Decryptor=x.extend({processBlock:function(L,_){var k=this._cipher,B=k.blockSize,j=L.slice(_,_+B);k.decryptBlock(L,_),N.call(this,L,_,B),this._prevBlock=j}});function N(L,_,k){var B,j=this._iv;j?(B=j,this._iv=a):B=this._prevBlock;for(var F=0;F<k;F++)L[_+F]^=B[F]}return x}(),C=g.pad={},f=C.Pkcs7={pad:function(x,N){for(var L=N*4,_=L-x.sigBytes%L,k=_<<24|_<<16|_<<8|_,B=[],j=0;j<_;j+=4)B.push(k);var F=w.create(B,_);x.concat(F)},unpad:function(x){var N=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=N}};v.BlockCipher=P.extend({cfg:P.cfg.extend({mode:p,padding:f}),reset:function(){var x;P.reset.call(this);var N=this.cfg,L=N.iv,_=N.mode;this._xformMode==this._ENC_XFORM_MODE?x=_.createEncryptor:(x=_.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,L&&L.words):(this._mode=x.call(_,this,L&&L.words),this._mode.__creator=x)},_doProcessBlock:function(x,N){this._mode.processBlock(x,N)},_doFinalize:function(){var x,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),N.unpad(x)),x},blockSize:128/32});var u=v.CipherParams=m.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),s=g.format={},l=s.OpenSSL={stringify:function(x){var N,L=x.ciphertext,_=x.salt;return _?N=w.create([1398893684,1701076831]).concat(_).concat(L):N=L,N.toString(T)},parse:function(x){var N,L=T.parse(x),_=L.words;return _[0]==1398893684&&_[1]==1701076831&&(N=w.create(_.slice(2,4)),_.splice(0,4),L.sigBytes-=16),u.create({ciphertext:L,salt:N})}},S=v.SerializableCipher=m.extend({cfg:m.extend({format:l}),encrypt:function(x,N,L,_){_=this.cfg.extend(_);var k=x.createEncryptor(L,_),B=k.finalize(N),j=k.cfg;return u.create({ciphertext:B,key:L,iv:j.iv,algorithm:x,mode:j.mode,padding:j.padding,blockSize:x.blockSize,formatter:_.format})},decrypt:function(x,N,L,_){_=this.cfg.extend(_),N=this._parse(N,_.format);var k=x.createDecryptor(L,_).finalize(N.ciphertext);return k},_parse:function(x,N){return typeof x=="string"?N.parse(x,this):x}}),h=g.kdf={},A=h.OpenSSL={execute:function(x,N,L,_){_||(_=w.random(64/8));var k=E.create({keySize:N+L}).compute(x,_),B=w.create(k.words.slice(N),L*4);return k.sigBytes=N*4,u.create({key:k,iv:B,salt:_})}},M=v.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:A}),encrypt:function(x,N,L,_){_=this.cfg.extend(_);var k=_.kdf.execute(L,x.keySize,x.ivSize);_.iv=k.iv;var B=S.encrypt.call(this,x,N,k.key,_);return B.mixIn(k),B},decrypt:function(x,N,L,_){_=this.cfg.extend(_),N=this._parse(N,_.format);var k=_.kdf.execute(L,x.keySize,x.ivSize,N.salt);_.iv=k.iv;var B=S.decrypt.call(this,x,N,k.key,_);return B}})}()})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.Request=r.createRequest=void 0;var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(12)),v=o.__importDefault(i(3)),m=o.__importDefault(i(7)),w=i(4),R=o.__importDefault(i(8)),O=o.__importDefault(i(2)),T=o.__importDefault(i(20)),d=a.getGlobalObject(),E=function(){},P=d._ablyjs_jsonp={};P._=function(s){return P["_"+s]||E};var y=1,c="jsonp";function p(s,l,S,h,A,M,x){return M=M||R.default.TIMEOUTS,new f(void 0,s,l,a.copy(S),h,A,M,x)}r.createRequest=p;var C=function(s){o.__extends(l,s);function l(S,h,A){var M=s.call(this,S,h,A)||this;return M.shortName=c,A.stream=!1,M}return l.isAvailable=function(){return v.default.Config.jsonpSupported&&v.default.Config.allowComet},l.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},l.prototype.createRequest=function(S,h,A,M,x,N,L){return N=(this===null||this===void 0?void 0:this.timeouts)||N||R.default.TIMEOUTS,p(S,h,A,M,x,N,L)},l}(g.default),f=function(s){o.__extends(l,s);function l(S,h,A,M,x,N,L,_){var k=s.call(this)||this;return S===void 0&&(S=y++),k.id=S,k.uri=h,k.params=M||{},k.params.rnd=a.cheapRandStr(),A&&(A["X-Ably-Version"]&&(k.params.v=A["X-Ably-Version"]),A["X-Ably-Lib"]&&(k.params.lib=A["X-Ably-Lib"])),k.body=x,k.method=_,k.requestMode=N,k.timeouts=L,k.requestComplete=!1,k}return l.prototype.exec=function(){var S=this,h=this.id,A=this.body,M=this.method,x=this.uri,N=this.params;N.callback="_ablyjs_jsonp._("+h+")",N.envelope="jsonp",A&&(N.body=A),M&&M!=="get"&&(N.method=M);var L=this.script=document.createElement("script"),_=x+a.toQueryString(N);L.src=_,L.src.split("/").slice(-1)[0]!==_.split("/").slice(-1)[0]&&O.default.logAction(O.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),L.async=!0,L.type="text/javascript",L.charset="UTF-8",L.onerror=function(j){S.complete(new w.PartialErrorInfo("JSONP script error (event: "+v.default.Config.inspect(j)+")",null,400))},P["_"+h]=function(j){if(j.statusCode){var F=j.response;if(j.statusCode==204)S.complete(null,null,null,j.statusCode);else if(!F)S.complete(new w.PartialErrorInfo("Invalid server response: no envelope detected",null,500));else if(j.statusCode<400||a.isArray(F))S.complete(null,F,j.headers,j.statusCode);else{var V=F.error||new w.PartialErrorInfo("Error response received from server",null,j.statusCode);S.complete(V)}}else S.complete(null,j)};var k=this.requestMode==T.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),k);var B=document.getElementsByTagName("head")[0];B.insertBefore(L,B.firstChild)},l.prototype.complete=function(S,h,A,M){if(A=A||{},!this.requestComplete){this.requestComplete=!0;var x=void 0;h&&(x=typeof h=="string"?"text/plain":"application/json",A["content-type"]=x,this.emit("data",h)),this.emit("complete",S,h,A,!0,M),this.dispose()}},l.prototype.abort=function(){this.dispose()},l.prototype.dispose=function(){var S=this.timer;S&&(clearTimeout(S),this.timer=null);var h=this.script;h.parentNode&&h.parentNode.removeChild(h),delete P[this.id],this.emit("disposed")},l}(m.default);r.Request=f;function u(s){return d.JSONPTransport=C,C.isAvailable()&&(s.supportedTransports[c]=C),C}r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(2)),v=o.__importDefault(i(8)),m=o.__importDefault(i(16)),w=o.__importDefault(i(46)),R=o.__importDefault(i(18)),O=o.__importDefault(i(32)),T=o.__importDefault(i(4)),d=o.__importDefault(i(49)),E=o.__importDefault(i(17)),P=o.__importDefault(i(3)),y=o.__importDefault(i(9)),c=o.__importDefault(i(14)),p=function(){},C=function(){function u(s){if(!s){var l="no options provided";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",l),new Error(l)}var S=v.default.objectifyOptions(s);S.log&&g.default.setLog(S.log.level,S.log.handler),g.default.logAction(g.default.LOG_MICRO,"Rest()","initialized with clientOptions "+P.default.Config.inspect(s));var h=this.options=v.default.normaliseOptions(S);if(h.key){var A=h.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!A){var l="invalid key parameter";throw g.default.logAction(g.default.LOG_ERROR,"Rest()",l),new T.default(l,40400,404)}h.keyName=A[1],h.keySecret=A[2]}if("clientId"in h)if(typeof h.clientId=="string"||h.clientId===null){if(h.clientId==="*")throw new T.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new T.default("clientId must be either a string or null",40012,400);g.default.logAction(g.default.LOG_MINOR,"Rest()","started; version = "+v.default.version),this.baseUri=this.authority=function(M){return v.default.getHttpScheme(h)+M+":"+v.default.getPort(h,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new P.default.Http(h),this.auth=new m.default(this,h),this.channels=new f(this),this.push=new w.default(this)}return u.prototype.stats=function(s,l){if(l===void 0)if(typeof s=="function")l=s,s=null;else{if(this.options.promises)return a.promisify(this,"stats",[s]);l=p}var S=a.defaultGetHeaders(this.options),h=this.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,A=this.http.supportsLinkHeaders?void 0:h;this.options.headers&&a.mixin(S,this.options.headers),new R.default(this,"/stats",S,A,function(M,x,N){for(var L=N?M:JSON.parse(M),_=0;_<L.length;_++)L[_]=d.default.fromValues(L[_]);return L}).get(s,l)},u.prototype.time=function(s,l){var S=this;if(l===void 0){if(typeof s=="function")l=s,s=null;else if(this.options.promises)return a.promisify(this,"time",[s])}var h=l||p,A=a.defaultGetHeaders(this.options);this.options.headers&&a.mixin(A,this.options.headers);var M=function(x){return S.authority(x)+"/time"};this.http.do(E.default.Get,this,M,A,null,s,function(x,N,L,_){if(x){h(x);return}_||(N=JSON.parse(N));var k=N[0];if(!k){h(new T.default("Internal error (unexpected result type from GET /time)",5e4,500));return}S.serverTimeOffset=k-a.now(),h(null,k)})},u.prototype.request=function(s,l,S,h,A,M){var x=this.options.useBinaryProtocol,N=x?P.default.Config.msgpack.encode:JSON.stringify,L=x?P.default.Config.msgpack.decode:JSON.parse,_=x?a.Format.msgpack:a.Format.json,k=this.http.supportsLinkHeaders?void 0:_;S=S||{};var B=s.toLowerCase(),j=B=="get"?a.defaultGetHeaders(this.options,_):a.defaultPostHeaders(this.options,_);if(M===void 0){if(this.options.promises)return a.promisify(this,"request",[s,l,S,h,A]);M=p}typeof h!="string"&&(h=N(h)),this.options.headers&&a.mixin(j,this.options.headers),A&&a.mixin(j,A);var F=new R.default(this,l,j,k,function(V,W,G){return a.ensureArray(G?V:L(V))},!0);if(!a.arrIn(P.default.Http.methods,B))throw new T.default("Unsupported method "+B,40500,405);a.arrIn(P.default.Http.methodsWithBody,B)?F[B](S,h,M):F[B](S,M)},u.prototype.setLog=function(s){g.default.setLog(s.level,s.handler)},u.Promise=function(s){return s=v.default.objectifyOptions(s),s.promises=!0,new u(s)},u.Callbacks=u,u.Platform=P.default,u.Message=y.default,u.PresenceMessage=c.default,u}(),f=function(){function u(s){this.rest=s,this.all=Object.create(null)}return u.prototype.get=function(s,l){s=String(s);var S=this.all[s];return S?l&&S.setOptions(l):this.all[s]=S=new O.default(this.rest,s,l),S},u.prototype.release=function(s){delete this.all[String(s)]},u}();r.default=C},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return o.enc.Utf8})},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(a){var g=o,v=g.lib,m=v.WordArray,w=v.Hasher,R=g.algo,O=[],T=[];(function(){function P(C){for(var f=a.sqrt(C),u=2;u<=f;u++)if(!(C%u))return!1;return!0}function y(C){return(C-(C|0))*4294967296|0}for(var c=2,p=0;p<64;)P(c)&&(p<8&&(O[p]=y(a.pow(c,1/2))),T[p]=y(a.pow(c,1/3)),p++),c++})();var d=[],E=R.SHA256=w.extend({_doReset:function(){this._hash=new m.init(O.slice(0))},_doProcessBlock:function(P,y){for(var c=this._hash.words,p=c[0],C=c[1],f=c[2],u=c[3],s=c[4],l=c[5],S=c[6],h=c[7],A=0;A<64;A++){if(A<16)d[A]=P[y+A]|0;else{var M=d[A-15],x=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,N=d[A-2],L=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;d[A]=x+d[A-7]+L+d[A-16]}var _=s&l^~s&S,k=p&C^p&f^C&f,B=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),j=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),F=h+j+_+T[A]+d[A],V=B+k;h=S,S=l,l=s,s=u+F|0,u=f,f=C,C=p,p=F+V|0}c[0]=c[0]+p|0,c[1]=c[1]+C|0,c[2]=c[2]+f|0,c[3]=c[3]+u|0,c[4]=c[4]+s|0,c[5]=c[5]+l|0,c[6]=c[6]+S|0,c[7]=c[7]+h|0},_doFinalize:function(){var P=this._data,y=P.words,c=this._nDataBytes*8,p=P.sigBytes*8;return y[p>>>5]|=128<<24-p%32,y[(p+64>>>9<<4)+14]=a.floor(c/4294967296),y[(p+64>>>9<<4)+15]=c,P.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var P=w.clone.call(this);return P._hash=this._hash.clone(),P}});g.SHA256=w._createHelper(E),g.HmacSHA256=w._createHmacHelper(E)}(Math),o.SHA256})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(7)),v=o.__importDefault(i(2)),m=o.__importDefault(i(33)),w=o.__importDefault(i(9)),R=o.__importDefault(i(4)),O=o.__importDefault(i(18)),T=o.__importDefault(i(24)),d=o.__importDefault(i(3));function E(){}var P=9;function y(C){return a.arrEvery(C,function(f){return!f.id})}function c(C){var f=C||{};if(f.cipher){if(!d.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var u=d.default.Crypto.getCipher(f.cipher);f.cipher=u.cipherParams,f.channelCipher=u.cipher}else"cipher"in f&&(f.cipher=void 0,f.channelCipher=null);return f}var p=function(C){o.__extends(f,C);function f(u,s,l){var S=C.call(this)||this;return v.default.logAction(v.default.LOG_MINOR,"Channel()","started; name = "+s),S.rest=u,S.name=s,S.basePath="/channels/"+encodeURIComponent(s),S.presence=new m.default(S),S.channelOptions=c(l),S}return f.prototype.setOptions=function(u){this.channelOptions=c(u)},f.prototype.history=function(u,s){if(v.default.logAction(v.default.LOG_MICRO,"Channel.history()","channel = "+this.name),s===void 0)if(typeof u=="function")s=u,u=null;else{if(this.rest.options.promises)return a.promisify(this,"history",arguments);s=E}this._history(u,s)},f.prototype._history=function(u,s){var l=this.rest,S=l.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,h=this.rest.http.supportsLinkHeaders?void 0:S,A=a.defaultGetHeaders(l.options,S);l.options.headers&&a.mixin(A,l.options.headers);var M=this.channelOptions;new O.default(l,this.basePath+"/messages",A,h,function(x,N,L){return w.default.fromResponseBody(x,M,L?void 0:S)}).get(u,s)},f.prototype.publish=function(){var u=this,s=arguments.length,l=arguments[0],S=arguments[1],h=arguments[s-1],A,M;if(typeof h!="function"){if(this.rest.options.promises)return a.promisify(this,"publish",arguments);h=E}if(typeof l=="string"||l===null)A=[w.default.fromValues({name:l,data:S})],M=arguments[2];else if(a.isObject(l))A=[w.default.fromValues(l)],M=arguments[1];else if(a.isArray(l))A=w.default.fromValuesArray(l),M=arguments[1];else throw new R.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);(typeof M!="object"||!M)&&(M={});var x=this.rest,N=x.options,L=N.useBinaryProtocol?a.Format.msgpack:a.Format.json,_=x.options.idempotentRestPublishing,k=a.defaultPostHeaders(x.options,L);if(N.headers&&a.mixin(k,N.headers),_&&y(A)){var B=a.randomString(P);a.arrForEach(A,function(j,F){j.id=B+":"+F.toString()})}w.default.encodeArray(A,this.channelOptions,function(j){if(j){h(j);return}var F=w.default.getMessagesSize(A),V=N.maxMessageSize;if(F>V){h(new R.default("Maximum size of messages that can be published at once exceeded ( was "+F+" bytes; limit is "+V+" bytes)",40009,400));return}u._publish(w.default.serialize(A,L),k,M,h)})},f.prototype._publish=function(u,s,l,S){T.default.post(this.rest,this.basePath+"/messages",u,s,l,null,S)},f.prototype.status=function(u){if(typeof u!="function"&&this.rest.options.promises)return a.promisify(this,"status",[]);var s=this.rest.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,l=a.defaultPostHeaders(this.rest.options,s);T.default.get(this.rest,this.basePath,l,{},s,u||E)},f}(g.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(7)),v=o.__importDefault(i(2)),m=o.__importDefault(i(18)),w=o.__importDefault(i(14));function R(){}var O=function(T){o.__extends(d,T);function d(E){var P=T.call(this)||this;return P.channel=E,P.basePath=E.basePath+"/presence",P}return d.prototype.get=function(E,P){if(v.default.logAction(v.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),P===void 0)if(typeof E=="function")P=E,E=null;else{if(this.channel.rest.options.promises)return a.promisify(this,"get",arguments);P=R}var y=this.channel.rest,c=y.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,p=this.channel.rest.http.supportsLinkHeaders?void 0:c,C=a.defaultGetHeaders(y.options,c);y.options.headers&&a.mixin(C,y.options.headers);var f=this.channel.channelOptions;new m.default(y,this.basePath,C,p,function(u,s,l){return w.default.fromResponseBody(u,f,l?void 0:c)}).get(E,P)},d.prototype.history=function(E,P){return v.default.logAction(v.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(E,P)},d.prototype._history=function(E,P){if(P===void 0)if(typeof E=="function")P=E,E=null;else{if(this.channel.rest.options.promises)return a.promisify(this,"_history",[E]);P=R}var y=this.channel.rest,c=y.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,p=this.channel.rest.http.supportsLinkHeaders?void 0:c,C=a.defaultGetHeaders(y.options,c);y.options.headers&&a.mixin(C,y.options.headers);var f=this.channel.channelOptions;new m.default(y,this.basePath+"/history",C,p,function(u,s,l){return w.default.fromResponseBody(u,f,l?void 0:c)}).get(E,P)},d}(g.default);r.default=O},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0}),r.TransportParams=void 0;var a=i(0),g=a.__importDefault(i(10)),v=a.__importStar(i(1)),m=a.__importStar(i(52)),w=a.__importStar(i(8)),R=a.__importDefault(i(3)),O=a.__importDefault(i(7)),T=a.__importDefault(i(35)),d=a.__importDefault(i(2)),E=a.__importDefault(i(36)),P=a.__importStar(i(19)),y=a.__importStar(i(4)),c=a.__importDefault(i(16)),p=a.__importDefault(i(9)),C=a.__importDefault(i(22)),f=a.__importDefault(i(53)),u=a.__importDefault(i(25)),s=a.__importDefault(i(37)),l=function(){var W;return typeof R.default.WebStorage<"u"&&((W=R.default.WebStorage)===null||W===void 0?void 0:W.localSupported)},S=function(){var W;return typeof R.default.WebStorage<"u"&&((W=R.default.WebStorage)===null||W===void 0?void 0:W.sessionSupported)},h=g.default.Action,A=function(){},M="ably-transport-preference",x="ably-connection-recovery";function N(){var W,G;return S()&&((G=(W=R.default.WebStorage)===null||W===void 0?void 0:W.getSession)===null||G===void 0?void 0:G.call(W,x))}function L(W){var G,I;return S()&&((I=(G=R.default.WebStorage)===null||G===void 0?void 0:G.setSession)===null||I===void 0?void 0:I.call(G,x,W))}function _(){var W,G;return S()&&((G=(W=R.default.WebStorage)===null||W===void 0?void 0:W.removeSession)===null||G===void 0?void 0:G.call(W,x))}function k(W,G){return v.arrIndexOf(R.default.Defaults.transportPreferenceOrder,W.shortName)>v.arrIndexOf(R.default.Defaults.transportPreferenceOrder,G.shortName)}function B(W,G,I){var U;if(W.channel!==G.channel||(U=W.action)!==h.PRESENCE&&U!==h.MESSAGE||U!==G.action)return!1;var D=U===h.PRESENCE?"presence":"messages",z=W[D].concat(G[D]),Q=p.default.getMessagesSize(z);return Q>I||!v.allSame(z,"clientId")||!v.arrEvery(z,function(X){return!X.id})?!1:(W[D]=z,!0)}function j(W){try{return JSON.parse(W)}catch{return null}}var F=function(){function W(G,I,U,D){this.options=G,this.host=I,this.mode=U,this.connectionKey=D,this.format=G.useBinaryProtocol?v.Format.msgpack:v.Format.json}return W.prototype.getConnectParams=function(G){var I=G?v.copy(G):{},U=this.options;switch(this.mode){case"upgrade":I.upgrade=this.connectionKey;break;case"resume":I.resume=this.connectionKey;break;case"recover":{var D=j(U.recover);D&&(I.recover=D.connectionKey);break}}return U.clientId!==void 0&&(I.clientId=U.clientId),U.echoMessages===!1&&(I.echo="false"),this.format!==void 0&&(I.format=this.format),this.stream!==void 0&&(I.stream=this.stream),this.heartbeats!==void 0&&(I.heartbeats=this.heartbeats),I.v=w.default.protocolVersion,I.agent=encodeURIComponent((0,w.getAgentString)(this.options)),U.transportParams!==void 0&&v.mixin(I,U.transportParams),I},W.prototype.toString=function(){var G="[mode="+this.mode;return this.host&&(G+=",host="+this.host),this.connectionKey&&(G+=",connectionKey="+this.connectionKey),this.format&&(G+=",format="+this.format),G+="]",G},W}();r.TransportParams=F;var V=function(W){a.__extends(G,W);function G(I,U){var D=W.call(this)||this;D.disconnectedRetryCount=0,G.initTransports(),D.realtime=I,D.options=U;var z=U.timeouts,Q=z.preferenceConnectTimeout+z.realtimeRequestTimeout;if(D.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:Q,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:z.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:z.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:z.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},D.state=D.states.initialized,D.errorReason=null,D.queuedMessages=new T.default,D.msgSerial=0,D.connectionDetails=void 0,D.connectionId=void 0,D.connectionKey=void 0,D.connectionStateTtl=z.connectionStateTtl,D.maxIdleInterval=null,D.transports=v.intersect(U.transports||w.default.defaultTransports,G.supportedTransports),D.baseTransport=v.intersect(w.default.baseTransportOrder,D.transports)[0],D.upgradeTransports=v.intersect(D.transports,w.default.upgradeTransports),D.transportPreference=null,D.httpHosts=w.default.getHosts(U),D.activeProtocol=null,D.proposedTransports=[],D.pendingTransports=[],D.host=null,D.lastAutoReconnectAttempt=null,D.lastActivity=null,D.forceFallbackHost=!1,D.connectCounter=0,d.default.logAction(d.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(U.transports||w.default.defaultTransports)+"]"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+D.transports+"]"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+D.httpHosts+"]"),!D.transports.length){var X="no requested transports available";throw d.default.logAction(d.default.LOG_ERROR,"realtime.ConnectionManager()",X),new Error(X)}var Y=R.default.Config.addEventListener;return Y&&(S()&&typeof U.recover=="function"&&Y("beforeunload",D.persistConnection.bind(D)),U.closeOnUnload===!0&&Y("beforeunload",function(){d.default.logAction(d.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),D.requestState({state:"closing"})}),Y("online",function(){D.state==D.states.disconnected||D.state==D.states.suspended?(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),D.requestState({state:"connecting"})):D.state==D.states.connecting&&(D.pendingTransports.forEach(function(ee){ee.off()}),D.disconnectAllTransports(),D.startConnect())}),Y("offline",function(){D.state==D.states.connected&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),D.disconnectAllTransports())})),D}return G.initTransports=function(){(0,f.default)(G),v.arrForEach(R.default.Transports,function(I){I(G)})},G.prototype.createTransportParams=function(I,U){return new F(this.options,I,U,this.connectionKey)},G.prototype.getTransportParams=function(I){var U=this,D=function(z){if(U.connectionKey){z("resume");return}if(typeof U.options.recover=="string"){z("recover");return}var Q=U.options.recover,X=N();if(X&&typeof Q=="function"){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),Q(X,function(Y){Y?(U.options.recover=X.recoveryKey,z("recover")):z("clean")});return}z("clean")};D(function(z){var Q=U.createTransportParams(null,z);if(z==="recover"){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+U.options.recover);var X=j(U.options.recover);X&&(U.msgSerial=X.msgSerial)}else d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+Q.toString());I(Q)})},G.prototype.tryATransport=function(I,U,D){var z=this;d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+U),u.default.tryConnect(G.supportedTransports[U],this,this.realtime.auth,I,function(Q,X){var Y=z.state;if(Y==z.states.closing||Y==z.states.closed||Y==z.states.failed){X&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+Y.state+" while we were attempting the transport; closing "+X),X.close()),D(!0);return}if(Q){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+U+" "+Q.event+", err: "+Q.error.toString()),c.default.isTokenErr(Q.error)&&!(z.errorReason&&c.default.isTokenErr(z.errorReason))?(z.errorReason=Q.error,z.realtime.auth._forceNewToken(null,null,function(ee){if(ee){z.actOnErrorFromAuthorize(ee);return}z.tryATransport(I,U,D)})):Q.event==="failed"?(z.notifyState({state:"failed",error:Q.error}),D(!0)):Q.event==="disconnected"&&((0,P.isRetriable)(Q.error)?D(!1):(z.notifyState({state:z.states.connecting.failState,error:Q.error}),D(!0)));return}d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+U+"; setting pending"),z.setTransportPending(X,I),D(null,X)})},G.prototype.setTransportPending=function(I,U){var D=this,z=U.mode;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+I+"; mode = "+z),v.arrDeleteValue(this.proposedTransports,I),this.pendingTransports.push(I);var Q=R.default.Defaults.transportPreferenceOrder[R.default.Defaults.transportPreferenceOrder.length-1];I.once("connected",function(Y,ee,te){z=="upgrade"&&D.activeProtocol?I.shortName!==Q&&v.arrIn(D.getUpgradePossibilities(),Q)&&D.activeProtocol?setTimeout(function(){D.scheduleTransportActivation(Y,I,ee,te)},D.options.timeouts.parallelUpgradeDelay):D.scheduleTransportActivation(Y,I,ee,te):(D.activateTransport(Y,I,ee,te),R.default.Config.nextTick(function(){D.connectImpl(U)})),z==="recover"&&D.options.recover&&(D.options.recover=null,D.unpersistConnection())});var X=this;I.on(["disconnected","closed","failed"],function(Y){X.deactivateTransport(I,this.event,Y)}),this.emit("transport.pending",I)},G.prototype.scheduleTransportActivation=function(I,U,D,z){var Q=this,X=this.activeProtocol&&this.activeProtocol.getTransport(),Y=function(){U.disconnect(),v.arrDeleteValue(Q.pendingTransports,U)};if(this.state!==this.states.connected&&this.state!==this.states.connecting){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+U.shortName),Y();return}if(X&&!k(U,X)){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+U.shortName+" is no better than current active transport "+X.shortName+" - abandoning upgrade"),Y();return}d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+U);var ee=null;if(!U.isConnected){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+U.shortName+"is no longer connected; abandoning upgrade"),Y();return}if(this.state===this.states.connected)d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,ee=this.activeProtocol;else if(this.state!==this.states.connecting){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+U.shortName),Y();return}d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+U);var te=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+U),U.send(g.default.fromValues({action:h.ACTIVATE})),Q.activateTransport(I,U,D,z),Q.state===Q.states.synchronizing?(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+U),Q.state=Q.states.connected):d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+Q.state.state+", so leaving unchanged"),Q.state.sendEvents&&Q.sendQueuedMessages()};ee?ee.onceIdle(te):te()},G.prototype.activateTransport=function(I,U,D,z){var Q=this;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+U),I&&d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+I),D&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+D),z&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(z)),this.persistTransportPreference(U);var X=this.state,Y=this.states.connected.state;if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+X.state),X.state==this.states.closing.state||X.state==this.states.closed.state||X.state==this.states.failed.state)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),U.disconnect(),!1;if(v.arrDeleteValue(this.pendingTransports,U),!U.isConnected)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+U+" since it appears to no longer be connected"),!1;var ee=this.activeProtocol;this.activeProtocol=new m.default(U),this.host=U.params.host;var te=z.connectionKey;if(te&&this.connectionKey!=te&&this.setConnection(D,z,!!I),this.onConnectionDetailsUpdate(z,U),R.default.Config.nextTick(function(){U.on("connected",function(Z,ce,le){Q.onConnectionDetailsUpdate(le,U),Q.emit("update",new E.default(Y,Y,null,Z))})}),X.state===this.states.connected.state?I&&(this.errorReason=this.realtime.connection.errorReason=I,this.emit("update",new E.default(Y,Y,null,I))):(this.notifyState({state:"connected",error:I}),this.errorReason=this.realtime.connection.errorReason=I||null),this.emit("transport.active",U),ee)if(ee.messageQueue.count()>0&&d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+ee.transport.shortName+", new one is "+U.shortName+") finishing with "+ee.messageQueue.count()+" messages still pending"),ee.transport===U){var ae="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+U.shortName+"; stack = "+new Error().stack;d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()",ae)}else ee.finish();return v.safeArrForEach(this.pendingTransports,function(Z){if(Z===U){var ce="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+U.shortName+"; stack = "+new Error().stack;d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()",ce),v.arrDeleteValue(Q.pendingTransports,U)}else Z.disconnect()}),v.safeArrForEach(this.proposedTransports,function(Z){Z===U?(d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+U.shortName+"; stack = "+new Error().stack),v.arrDeleteValue(Q.proposedTransports,U)):Z.dispose()}),!0},G.prototype.deactivateTransport=function(I,U,D){var z=this.activeProtocol,Q=z&&z.getTransport()===I,X=v.arrDeleteValue(this.pendingTransports,I),Y=v.arrDeleteValue(this.proposedTransports,I),ee=this.noTransportsScheduledForActivation();if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+I),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+U+(Q?"; was active":X?"; was pending":Y?"; was proposed":"")+(ee?"":"; another transport is scheduled for activation")),D&&D.message&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+D.message),Q&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(z.getPendingMessages()),R.default.Config.nextTick(function(){z.clearPendingMessages()}),this.activeProtocol=this.host=null),this.emit("transport.inactive",I),Q&&ee||Q&&U==="failed"||U==="closed"||z===null&&X&&this.pendingTransports.length===0){if(U==="disconnected"&&D&&D.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:U,error:D,retryImmediately:!0});return}var te=U==="failed"&&c.default.isTokenErr(D)?"disconnected":U;this.notifyState({state:te,error:D});return}Q&&U==="disconnected"&&this.state!==this.states.synchronizing&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:D}))},G.prototype.noTransportsScheduledForActivation=function(){return v.isEmpty(this.pendingTransports)||this.pendingTransports.every(function(I){return!I.isConnected})},G.prototype.setConnection=function(I,U,D){var z=this.connectionId,Q=z&&z!==I,X=!z&&D;(Q||X)&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==I&&d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=I,this.realtime.connection.key=this.connectionKey=U.connectionKey},G.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},G.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},G.prototype.checkConnectionStateFreshness=function(){if(!(!this.lastActivity||!this.connectionId)){var I=v.now()-this.lastActivity;I>this.connectionStateTtl+this.maxIdleInterval&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+I+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},G.prototype.persistConnection=function(){if(S()){var I=this.createRecoveryKey();I&&L({recoveryKey:I,disconnectedAt:v.now(),location:o.location,clientId:this.realtime.auth.clientId})}},G.prototype.unpersistConnection=function(){_()},G.prototype.getError=function(){return this.errorReason||this.getStateError()},G.prototype.getStateError=function(){var I,U;return(U=(I=P.default)[this.state.state])===null||U===void 0?void 0:U.call(I)},G.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},G.prototype.enactStateChange=function(I){var U=I.current==="failed"?d.default.LOG_ERROR:d.default.LOG_MAJOR;d.default.logAction(U,"Connection state",I.current+(I.reason?"; reason: "+I.reason:"")),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+I.current+"; reason = "+(I.reason&&I.reason.message));var D=this.state=this.states[I.current];I.reason&&(this.errorReason=I.reason,this.realtime.connection.errorReason=I.reason),(D.terminal||D.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",I)},G.prototype.startTransitionTimer=function(I){var U=this;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+I.state),this.transitionTimer&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(function(){U.transitionTimer&&(U.transitionTimer=null,d.default.logAction(d.default.LOG_MINOR,"ConnectionManager "+I.state+" timer expired","requesting new state: "+I.failState),U.notifyState({state:I.failState}))},I.retryDelay)},G.prototype.cancelTransitionTimer=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},G.prototype.startSuspendTimer=function(){var I=this;this.suspendTimer||(this.suspendTimer=setTimeout(function(){I.suspendTimer&&(I.suspendTimer=null,d.default.logAction(d.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),I.states.connecting.failState="suspended",I.notifyState({state:"suspended"}))},this.connectionStateTtl))},G.prototype.checkSuspendTimer=function(I){I!=="disconnected"&&I!=="suspended"&&I!=="connecting"&&this.cancelSuspendTimer()},G.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},G.prototype.startRetryTimer=function(I){var U=this;this.retryTimer=setTimeout(function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),U.retryTimer=null,U.requestState({state:"connecting"})},I)},G.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},G.prototype.notifyState=function(I){var U=this,D,z,Q=I.state,X=Q==="disconnected"&&(this.state===this.states.connected||this.state===this.states.synchronizing||I.retryImmediately||this.state===this.states.connecting&&I.error&&c.default.isTokenErr(I.error)&&!(this.errorReason&&c.default.isTokenErr(this.errorReason)));if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+Q+(X?"; will retry connection immediately":"")),Q!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(I.state),(Q==="suspended"||Q==="connected")&&(this.disconnectedRetryCount=0),!this.state.terminal)){var Y=this.states[I.state],ee=Y.retryDelay;Y.state==="disconnected"&&(this.disconnectedRetryCount++,ee=Y.retryDelay*v.getBackoffCoefficient(this.disconnectedRetryCount)*v.getJitterCoefficient());var te=new E.default(this.state.state,Y.state,ee,I.error||((z=(D=P.default)[Y.state])===null||z===void 0?void 0:z.call(D)));if(X){var ae=function(){U.state===U.states.disconnected&&(U.lastAutoReconnectAttempt=v.now(),U.requestState({state:"connecting"}))},Z=this.lastAutoReconnectAttempt&&v.now()-this.lastAutoReconnectAttempt+1;Z&&Z<1e3?(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+Z+"ms ago, waiting another "+(1e3-Z)+"ms before trying again"),setTimeout(ae,1e3-Z)):R.default.Config.nextTick(ae)}else(Q==="disconnected"||Q==="suspended")&&this.startRetryTimer(ee);(Q==="disconnected"&&!X||Q==="suspended"||Y.terminal)&&R.default.Config.nextTick(function(){U.disconnectAllTransports()}),Q=="connected"&&!this.activeProtocol&&d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(te),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(Q,te.reason),this.failQueuedMessages(te.reason))}},G.prototype.requestState=function(I){var U=this,D,z,Q=I.state;if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+Q+"; current state: "+this.state.state),Q!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(Q),!(Q=="connecting"&&this.state.state=="connected")&&!(Q=="closing"&&this.state.state=="closed"))){var X=this.states[Q],Y=new E.default(this.state.state,X.state,null,I.error||((z=(D=P.default)[X.state])===null||z===void 0?void 0:z.call(D)));this.enactStateChange(Y),Q=="connecting"&&R.default.Config.nextTick(function(){U.startConnect()}),Q=="closing"&&this.closeImpl()}},G.prototype.startConnect=function(){var I=this;if(this.state!==this.states.connecting){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}var U=this.realtime.auth,D=++this.connectCounter,z=function(){I.checkConnectionStateFreshness(),I.getTransportParams(function(X){if(X.mode==="recover"&&X.options.recover){var Y=j(X.options.recover);Y&&I.realtime.channels.recoverChannels(Y.channelSerials)}D===I.connectCounter&&I.connectImpl(X,D)})};if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),U.method==="basic")z();else{var Q=function(X){D===I.connectCounter&&(X?I.actOnErrorFromAuthorize(X):z())};this.errorReason&&c.default.isTokenErr(this.errorReason)?U._forceNewToken(null,null,Q):U._ensureValidAuthCredentials(!1,Q)}},G.prototype.connectImpl=function(I,U){var D=this.state.state;D!==this.states.connecting.state&&D!==this.states.connected.state?d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+D):this.pendingTransports.length?d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):D==this.states.connected.state?this.upgradeIfNeeded(I):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(I,U):this.connectBase(I,U)},G.prototype.connectPreference=function(I,U){var D=this,z=this.getTransportPreference(),Q=!1;v.arrIn(this.transports,z)||(this.unpersistTransportPreference(),this.connectImpl(I,U)),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+z);var X=setTimeout(function(){Q=!0,D.state.state!==D.states.connected.state&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+z+" failed; clearing preference and trying from scratch"),D.disconnectAllTransports(),D.unpersistTransportPreference()),D.connectImpl(I,U)},this.options.timeouts.preferenceConnectTimeout);I.host=this.httpHosts[0],this.tryATransport(I,z,function(Y,ee){clearTimeout(X),Q&&ee?(ee.off(),ee.disconnect(),v.arrDeleteValue(D.pendingTransports,ee)):!ee&&!Y&&(D.unpersistTransportPreference(),D.connectImpl(I,U))})},G.prototype.connectBase=function(I,U){var D=this,z=function(te){D.notifyState({state:D.states.connecting.failState,error:te})},Q=this.httpHosts.slice(),X=function(te,ae){U===D.connectCounter&&!ae&&!te&&ee()};d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var Y=Q.shift();if(!Y){z(new y.default("Unable to connect (no available host)",80003,404));return}I.host=Y;var ee=function(){if(!Q.length){z(new y.default("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!D.realtime.http.checkConnectivity){z(new y.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500));return}D.realtime.http.checkConnectivity(function(te,ae){if(U===D.connectCounter){if(te){z(te);return}if(!ae){z(new y.default("Unable to connect (network unreachable)",80003,404));return}I.host=v.arrPopRandomElement(Q),D.tryATransport(I,D.baseTransport,X)}})};if(this.forceFallbackHost&&Q.length){this.forceFallbackHost=!1,ee();return}this.tryATransport(I,this.baseTransport,X)},G.prototype.getUpgradePossibilities=function(){var I=this.activeProtocol.getTransport().shortName,U=v.arrIndexOf(this.upgradeTransports,I);return this.upgradeTransports.slice(U+1)},G.prototype.upgradeIfNeeded=function(I){var U=this,D=this.getUpgradePossibilities();d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+R.default.Config.inspect(D)),D.length&&v.arrForEach(D,function(z){var Q=U.createTransportParams(I.host,"upgrade");U.tryATransport(Q,z,A)})},G.prototype.closeImpl=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),v.safeArrForEach(this.pendingTransports,function(I){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+I),I&&I.close()}),v.safeArrForEach(this.proposedTransports,function(I){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+I),I&&I.dispose()}),this.activeProtocol&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},G.prototype.onAuthUpdated=function(I,U){var D=this,z;switch(this.state.state){case"connected":{if(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var Q=this.activeProtocol.getTransport().params;R.default.Config.nextTick(function(){D.state.state==="connected"&&D.upgradeIfNeeded(Q)})}var X=(z=this.activeProtocol)===null||z===void 0?void 0:z.getTransport();X&&X.onAuthUpdated&&X.onAuthUpdated(I);var Y=g.default.fromValues({action:h.AUTH,auth:{accessToken:I.token}});this.send(Y);var ee=function(){D.off(te),U(null,I)},te=function(Z){Z.current==="failed"&&(D.off(ee),D.off(te),U(Z.reason||D.getStateError()))};this.once("connectiondetails",ee),this.on("connectionstate",te);break}case"connecting":d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var ae=function(Z){switch(Z.current){case"connected":D.off(ae),U(null,I);break;case"failed":case"closed":case"suspended":D.off(ae),U(Z.reason||D.getStateError());break}};this.on("connectionstate",ae),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}},G.prototype.disconnectAllTransports=function(I){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(I?" except the active transport":"")),this.connectCounter++,v.safeArrForEach(this.pendingTransports,function(U){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+U),U&&U.disconnect()}),this.pendingTransports=[],v.safeArrForEach(this.proposedTransports,function(U){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+U),U&&U.dispose()}),this.proposedTransports=[],this.activeProtocol&&!I&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},G.prototype.send=function(I,U,D){D=D||A;var z=this.state;if(z.sendEvents){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new m.PendingMessage(I,D));return}var Q=U&&z.queueEvents||z.forceQueueEvents;if(!Q){var X="rejecting event, queueEvent was "+U+", state was "+z.state;d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()",X),D(this.errorReason||new y.default(X,9e4,400));return}d.default.shouldLog(d.default.LOG_MICRO)&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+g.default.stringify(I)),this.queue(I,D)},G.prototype.sendImpl=function(I){var U=I.message;I.ackRequired&&!I.sendAttempted&&(U.msgSerial=this.msgSerial++);try{this.activeProtocol.send(I)}catch(D){d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+D.stack)}},G.prototype.queue=function(I,U){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var D=this.queuedMessages.last(),z=this.options.maxMessageSize;D&&!D.sendAttempted&&B(D.message,I,z)?(D.merged||(D.callback=C.default.create([D.callback]),D.merged=!0),D.callback.push(U)):this.queuedMessages.push(new m.PendingMessage(I,U))},G.prototype.sendQueuedMessages=function(){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");for(var I;I=this.queuedMessages.shift();)this.sendImpl(I)},G.prototype.queuePendingMessages=function(I){I&&I.length&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+I.length+" pending messages"),this.queuedMessages.prepend(I))},G.prototype.failQueuedMessages=function(I){var U=this.queuedMessages.count();U>0&&(d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+U+" queued messages, err = "+v.inspectError(I)),this.queuedMessages.completeAllMessages(I))},G.prototype.onChannelMessage=function(I,U){var D=this.activeProtocol&&U===this.activeProtocol.getTransport(),z=v.arrIn(this.pendingTransports,U)&&this.state==this.states.synchronizing;D||z?this.realtime.channels.onChannelMessage(I):v.arrIndexOf([h.ACK,h.NACK,h.ERROR],I.action)>-1?this.realtime.channels.onChannelMessage(I):d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(I)+"on defunct transport; discarding")},G.prototype.ping=function(I,U){var D=this;if(I){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+I);var z=function(){I.off("heartbeat",Y),U(new y.default("Timeout waiting for heartbeat response",5e4,500))},Q=v.now(),X=v.cheapRandStr(),Y=function(ce){if(ce===X){I.off("heartbeat",Y),clearTimeout(ee);var le=v.now()-Q;U(null,le)}},ee=setTimeout(z,this.options.timeouts.realtimeRequestTimeout);I.on("heartbeat",Y),I.ping(X);return}if(this.state.state!=="connected"){U(new y.default("Unable to ping service; not connected",4e4,400));return}var te=!1,ae=function(ce,le){D.off("transport.active",Z),te||(te=!0,U(ce,le))},Z=function(){te||(te=!0,R.default.Config.nextTick(function(){D.ping(null,U)}))};this.on("transport.active",Z),this.ping(this.activeProtocol.getTransport(),ae)},G.prototype.abort=function(I){this.activeProtocol.getTransport().fail(I)},G.prototype.registerProposedTransport=function(I){this.proposedTransports.push(I)},G.prototype.getTransportPreference=function(){var I,U;return this.transportPreference||l()&&((U=(I=R.default.WebStorage)===null||I===void 0?void 0:I.get)===null||U===void 0?void 0:U.call(I,M))},G.prototype.persistTransportPreference=function(I){var U,D;v.arrIn(w.default.upgradeTransports,I.shortName)&&(this.transportPreference=I.shortName,l()&&((D=(U=R.default.WebStorage)===null||U===void 0?void 0:U.set)===null||D===void 0||D.call(U,M,I.shortName)))},G.prototype.unpersistTransportPreference=function(){var I,U;this.transportPreference=null,l()&&((U=(I=R.default.WebStorage)===null||I===void 0?void 0:I.remove)===null||U===void 0||U.call(I,M))},G.prototype.actOnErrorFromAuthorize=function(I){if(I.code===40171)this.notifyState({state:"failed",error:I});else if(I.code===40102)this.notifyState({state:"failed",error:I});else if(I.statusCode===s.default.Forbidden){var U="Client configured authentication provider returned 403; failing the connection";d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",U),this.notifyState({state:"failed",error:new y.default(U,80019,403,I)})}else{var U="Client configured authentication provider request failed";d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",U),this.notifyState({state:this.state.failState,error:new y.default(U,80019,401,I)})}},G.prototype.onConnectionDetailsUpdate=function(I,U){if(I){this.connectionDetails=I,I.maxMessageSize&&(this.options.maxMessageSize=I.maxMessageSize);var D=I.clientId;if(D){var z=this.realtime.auth._uncheckedSetClientId(D);if(z){d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",z.message),U.fail(z);return}}var Q=I.connectionStateTtl;Q&&(this.connectionStateTtl=Q),this.maxIdleInterval=I.maxIdleInterval,this.emit("connectiondetails",I)}},G.supportedTransports={},G}(O.default);r.default=V}).call(this,i(13))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(7)),g=o.__importDefault(i(2)),v=function(m){o.__extends(w,m);function w(){var R=m.call(this)||this;return R.messages=[],R}return w.prototype.count=function(){return this.messages.length},w.prototype.push=function(R){this.messages.push(R)},w.prototype.shift=function(){return this.messages.shift()},w.prototype.last=function(){return this.messages[this.messages.length-1]},w.prototype.copyAll=function(){return this.messages.slice()},w.prototype.append=function(R){this.messages.push.apply(this.messages,R)},w.prototype.prepend=function(R){this.messages.unshift.apply(this.messages,R)},w.prototype.completeMessages=function(R,O,T){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+R+"; count = "+O),T=T||null;var d=this.messages;if(d.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var E=d[0];if(E){var P=E.message.msgSerial,y=R+O;if(y>P)for(var c=d.splice(0,y-P),p=0,C=c;p<C.length;p++){var f=C[p];f.callback(T)}d.length==0&&this.emit("idle")}},w.prototype.completeAllMessages=function(R){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,R)},w.prototype.resetSendAttempted=function(){for(var R=0,O=this.messages;R<O.length;R++){var T=O[R];T.sendAttempted=!1}},w.prototype.clear=function(){g.default.logAction(g.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},w}(a.default);r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function a(g,v,m,w){this.previous=g,this.current=v,m&&(this.retryIn=m),w&&(this.reason=w)}return a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.isSuccessCode=void 0;var o;(function(g){g[g.Success=200]="Success",g[g.NoContent=204]="NoContent",g[g.BadRequest=400]="BadRequest",g[g.Unauthorized=401]="Unauthorized",g[g.Forbidden=403]="Forbidden",g[g.RequestTimeout=408]="RequestTimeout",g[g.InternalServerError=500]="InternalServerError"})(o||(o={}));function a(g){return g>=o.Success&&g<o.BadRequest}r.isSuccessCode=a,r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(10)),g=o.__importDefault(i(7)),v=o.__importStar(i(1)),m=o.__importDefault(i(32)),w=o.__importDefault(i(2)),R=o.__importDefault(i(54)),O=o.__importDefault(i(9)),T=o.__importDefault(i(39)),d=o.__importStar(i(4)),E=o.__importDefault(i(14)),P=o.__importDefault(i(19)),y=a.default.Action,c=function(){};function p(f){if(f&&"params"in f&&!v.isObject(f.params))return new d.default("options.params must be an object",4e4,400);if(f&&"modes"in f){if(!v.isArray(f.modes))return new d.default("options.modes must be an array",4e4,400);for(var u=0;u<f.modes.length;u++){var s=f.modes[u];if(!s||typeof s!="string"||!v.arrIn(a.default.channelModes,String.prototype.toUpperCase.call(s)))return new d.default("Invalid channel mode: "+s,4e4,400)}}}var C=function(f){o.__extends(u,f);function u(s,l,S){var h=f.call(this,s,l,S)||this;return h.retryCount=0,h.history=function(A,M){if(w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),M===void 0)if(typeof A=="function")M=A,A=null;else{if(this.rest.options.promises)return v.promisify(this,"history",arguments);M=c}if(A&&A.untilAttach){if(this.state!=="attached"){M(new d.default("option untilAttach requires the channel to be attached",4e4,400));return}if(!this.properties.attachSerial){M(new d.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));return}delete A.untilAttach,A.from_serial=this.properties.attachSerial}m.default.prototype._history.call(this,A,M)},h.whenState=function(A,M){return g.default.prototype.whenState.call(h,A,h.state,M)},w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel()","started; name = "+l),h.realtime=s,h.presence=new R.default(h),h.connectionManager=s.connection.connectionManager,h.state="initialized",h.subscriptions=new g.default,h.syncChannelSerial=void 0,h.properties={attachSerial:void 0,channelSerial:void 0},h.setOptions(S),h.errorReason=null,h._requestedFlags=null,h._mode=null,h._attachResume=!1,h._decodingContext={channelOptions:h.channelOptions,plugins:s.options.plugins||{},baseEncodedPreviousPayload:void 0},h._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},h._allChannelChanges=new g.default,h}return u.prototype.invalidStateError=function(){return new d.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},u.processListenerArgs=function(s){return s=Array.prototype.slice.call(s),typeof s[0]=="function"&&s.unshift(null),s[s.length-1]==null&&s.pop(),s},u.prototype.setOptions=function(s,l){if(!l&&this.rest.options.promises)return v.promisify(this,"setOptions",arguments);var S=l||function(A){A&&w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+A.toString())},h=p(s);if(h){S(h);return}m.default.prototype.setOptions.call(this,s),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(s)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],function(A){switch(this.event){case"update":case"attached":S==null||S(null);return;default:S==null||S(A.reason);return}})):S()},u.prototype._shouldReattachToSetOptions=function(s){return(this.state==="attached"||this.state==="attaching")&&((s==null?void 0:s.params)||(s==null?void 0:s.modes))},u.prototype.publish=function(){for(var s=this,l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];var h=l[0],A=l.length,M=l[A-1];if(typeof M!="function"){if(this.realtime.options.promises)return v.promisify(this,"publish",arguments);M=c,++A}if(!this.connectionManager.activeState()){M(this.connectionManager.getError());return}if(A==2)if(v.isObject(h))h=[O.default.fromValues(h)];else if(v.isArray(h))h=O.default.fromValuesArray(h);else throw new d.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else h=[O.default.fromValues({name:l[0],data:l[1]})];var x=this.realtime.options.maxMessageSize;O.default.encodeArray(h,this.channelOptions,function(N){if(N){M(N);return}var L=O.default.getMessagesSize(h);if(L>x){M(new d.default("Maximum size of messages that can be published at once exceeded ( was "+L+" bytes; limit is "+x+" bytes)",40009,400));return}s.__publish(h,M)})},u.prototype.__publish=function(s,l){w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+s.length);var S=this.state;switch(S){case"failed":case"suspended":l(d.default.fromValues(this.invalidStateError()));break;default:{w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+S);var h=new a.default;h.action=y.MESSAGE,h.channel=this.name,h.messages=s,this.sendMessage(h,l);break}}},u.prototype.onEvent=function(s){w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var l=this.subscriptions,S=0;S<s.length;S++){var h=s[S];l.emit(h.name,h)}},u.prototype.attach=function(s,l){var S;if(typeof s=="function"?(l=s,S=null):S=s,!l){if(this.realtime.options.promises)return v.promisify(this,"attach",arguments);l=function(h){h&&w.default.logAction(w.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+h.toString())}}if(S)w.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=S;else if(this.state==="attached"){l(null,null);return}this._attach(!1,null,l)},u.prototype._attach=function(s,l,S){S||(S=function(A){A&&w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+A.toString())});var h=this.connectionManager;if(!h.activeState()){S(h.getError());return}(this.state!=="attaching"||s)&&this.requestState("attaching",l),this.once(function(A){switch(this.event){case"attached":S==null||S(null,A);break;case"detached":case"suspended":case"failed":S==null||S(A.reason||h.getError()||new d.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":S==null||S(new d.default("Attach request superseded by a subsequent detach request",9e4,409));break}})},u.prototype.attachImpl=function(){w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var s=a.default.fromValues({action:y.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?s.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&s.encodeModesToFlags(v.allToUpperCase(this.channelOptions.modes)),this._attachResume&&s.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(s.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(s,c)},u.prototype.detach=function(s){if(!s){if(this.realtime.options.promises)return v.promisify(this,"detach",arguments);s=c}var l=this.connectionManager;if(!l.activeState()){s(l.getError());return}switch(this.state){case"suspended":this.notifyState("detached"),s();break;case"detached":s();break;case"failed":s(new d.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once(function(S){switch(this.event){case"detached":s();break;case"attached":case"suspended":case"failed":s(S.reason||l.getError()||new d.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":s(new d.default("Detach request superseded by a subsequent attach request",9e4,409));break}})}},u.prototype.detachImpl=function(s){w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var l=a.default.fromValues({action:y.DETACH,channel:this.name});this.sendMessage(l,s||c)},u.prototype.subscribe=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var S=u.processListenerArgs(s),h=S[0],A=S[1],M=S[2];if(!M&&this.realtime.options.promises)return v.promisify(this,"subscribe",[h,A]);if(this.state==="failed"){M==null||M(d.default.fromValues(this.invalidStateError()));return}return h&&typeof h=="object"&&!Array.isArray(h)?this._subscribeFilter(h,A):this.subscriptions.on(h,A),this.attach(M||c)},u.prototype._subscribeFilter=function(s,l){var S=function(h){var A,M,x,N,L,_,k={name:h.name,refTimeserial:(M=(A=h.extras)===null||A===void 0?void 0:A.ref)===null||M===void 0?void 0:M.timeserial,refType:(N=(x=h.extras)===null||x===void 0?void 0:x.ref)===null||N===void 0?void 0:N.type,isRef:!!(!((_=(L=h.extras)===null||L===void 0?void 0:L.ref)===null||_===void 0)&&_.timeserial),clientId:h.clientId};Object.entries(s).find(function(B){var j=B[0],F=B[1];return F!==void 0?k[j]!==F:!1})||l(h)};this._addFilteredSubscription(s,l,S),this.subscriptions.on(S)},u.prototype._addFilteredSubscription=function(s,l,S){var h;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(l)){var A=this.filteredSubscriptions.get(l);A.set(s,((h=A==null?void 0:A.get(s))===null||h===void 0?void 0:h.concat(S))||[S])}else this.filteredSubscriptions.set(l,new Map([[s,[S]]]))},u.prototype._getAndDeleteFilteredSubscriptions=function(s,l){var S=this;if(!this.filteredSubscriptions)return[];if(!l&&s)return Array.from(this.filteredSubscriptions.entries()).map(function(x){var N,L=x[0],_=x[1],k=_.get(s);return _.delete(s),_.size===0&&((N=S.filteredSubscriptions)===null||N===void 0||N.delete(L)),k}).reduce(function(x,N){var L;return N?(L=x).concat.apply(L,N):x},[]);if(!l||!this.filteredSubscriptions.has(l))return[];var h=this.filteredSubscriptions.get(l);if(!s){var A=Array.from(h.values()).reduce(function(x,N){return x.concat.apply(x,N)},[]);return this.filteredSubscriptions.delete(l),A}var M=h.get(s);return h.delete(s),M||[]},u.prototype.unsubscribe=function(){for(var s=this,l,S=[],h=0;h<arguments.length;h++)S[h]=arguments[h];var A=u.processListenerArgs(S),M=A[0],x=A[1];if(typeof M=="object"&&!x||!((l=this.filteredSubscriptions)===null||l===void 0)&&l.has(x)){this._getAndDeleteFilteredSubscriptions(M,x).forEach(function(N){return s.subscriptions.off(N)});return}this.subscriptions.off(M,x)},u.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new d.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var s=this.connectionManager;if(!s.activeState())throw s.getError();var l=a.default.fromValues({action:y.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),s.send(l)},u.prototype.sendMessage=function(s,l){this.connectionManager.send(s,this.realtime.options.queueMessages,l)},u.prototype.sendPresence=function(s,l){var S=a.default.fromValues({action:y.PRESENCE,channel:this.name,presence:v.isArray(s)?E.default.fromValuesArray(s):[E.default.fromValues(s)]});this.sendMessage(S,l)},u.prototype.onMessage=function(s){(s.action===y.ATTACHED||s.action===y.MESSAGE||s.action===y.PRESENCE)&&this.setChannelSerial(s.channelSerial);var l,S=!1;switch(s.action){case y.ATTACHED:{this.properties.attachSerial=s.channelSerial,this._mode=s.getMode(),this.params=s.params||{};var h=s.decodeModesFromFlags();this.modes=h&&v.allToLowerCase(h)||void 0;var A=s.hasFlag("RESUMED"),M=s.hasFlag("HAS_PRESENCE"),x=s.hasFlag("HAS_BACKLOG");if(this.state==="attached"){A||this.presence.onAttached(M);var N=new T.default(this.state,this.state,A,x,s.error);this._allChannelChanges.emit("update",N),(!A||this.channelOptions.updateOnAttached)&&this.emit("update",N)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",s.error,A,M,x);break}case y.DETACHED:{var L=s.error?d.default.fromValues(s.error):new d.default("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",L):this.state==="attaching"?this.notifyState("suspended",L):this.requestState("attaching",L);break}case y.SYNC:if(S=!0,l=this.syncChannelSerial=s.channelSerial,!s.presence)break;case y.PRESENCE:{for(var _=s.presence,k=s.id,B=s.connectionId,j=s.timestamp,F=this.channelOptions,V=void 0,W=0;W<_.length;W++)try{V=_[W],E.default.decode(V,F),V.connectionId||(V.connectionId=B),V.timestamp||(V.timestamp=j),V.id||(V.id=k+":"+W)}catch(Q){w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel.onMessage()",Q.toString())}this.presence.setPresence(_,S,l);break}case y.MESSAGE:{if(this.state!=="attached"){w.default.logAction(w.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+s.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}var G=s.messages,I=G[0],U=G[G.length-1],k=s.id,B=s.connectionId,j=s.timestamp;if(I.extras&&I.extras.delta&&I.extras.delta.from!==this._lastPayload.messageId){var D='Delta message decode failure - previous message not available for message "'+s.id+'" on this channel "'+this.name+'".';w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel.onMessage()",D),this._startDecodeFailureRecovery(new d.default(D,40018,400));break}for(var W=0;W<G.length;W++){var D=G[W];try{O.default.decode(D,this._decodingContext)}catch(ae){switch(w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel.onMessage()",ae.toString()),ae.code){case 40018:this._startDecodeFailureRecovery(ae);return;case 40019:case 40021:this.notifyState("failed",ae);return}}D.connectionId||(D.connectionId=B),D.timestamp||(D.timestamp=j),D.id||(D.id=k+":"+W)}this._lastPayload.messageId=U.id,this._lastPayload.protocolMessageChannelSerial=s.channelSerial,this.onEvent(G);break}case y.ERROR:{var z=s.error;z&&z.code==80016?this.checkPendingState():this.notifyState("failed",d.default.fromValues(z));break}default:w.default.logAction(w.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+s.action+")"),this.connectionManager.abort(P.default.unknownChannelErr())}},u.prototype._startDecodeFailureRecovery=function(s){var l=this;this._lastPayload.decodeFailureRecoveryInProgress||(w.default.logAction(w.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,s,function(){l._lastPayload.decodeFailureRecoveryInProgress=!1}))},u.prototype.onAttached=function(){w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},u.prototype.notifyState=function(s,l,S,h,A){if(w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+s),this.clearStateTimer(),v.arrIn(["detached","suspended","failed"],s)&&(this.properties.channelSerial=null),s!==this.state){this.presence.actOnChannelState(s,h,l),s==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);var M=new T.default(this.state,s,S,A,l),x=s==="failed"?w.default.LOG_ERROR:w.default.LOG_MAJOR;w.default.logAction(x,'Channel state for channel "'+this.name+'"',s+(l?"; reason: "+l:"")),s!=="attaching"&&s!=="suspended"&&(this.retryCount=0),s==="attached"&&this.onAttached(),s==="attached"?this._attachResume=!0:(s==="detaching"||s==="failed")&&(this._attachResume=!1),this.state=s,this._allChannelChanges.emit(s,M),this.emit(s,M)}},u.prototype.requestState=function(s,l){w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+s),this.notifyState(s,l),this.checkPendingState()},u.prototype.checkPendingState=function(){var s=this.connectionManager.state;if(!(s.sendEvents||s.forceQueueEvents)){w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}},u.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":{var s=new d.default("Channel attach timed out",90007,408);this.notifyState("suspended",s);break}case"detaching":{var s=new d.default("Channel detach timed out",90007,408);this.notifyState("attached",s);break}default:this.checkPendingState();break}},u.prototype.startStateTimerIfNotRunning=function(){var s=this;this.stateTimer||(this.stateTimer=setTimeout(function(){w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),s.stateTimer=null,s.timeoutPendingState()},this.realtime.options.timeouts.realtimeRequestTimeout))},u.prototype.clearStateTimer=function(){var s=this.stateTimer;s&&(clearTimeout(s),this.stateTimer=null)},u.prototype.startRetryTimer=function(){var s=this;if(!this.retryTimer){this.retryCount++;var l=this.realtime.options.timeouts.channelRetryTimeout*v.getJitterCoefficient()*v.getBackoffCoefficient(this.retryCount);this.retryTimer=setTimeout(function(){s.state==="suspended"&&s.connectionManager.state.sendEvents&&(s.retryTimer=null,w.default.logAction(w.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),s.requestState("attaching"))},l)}},u.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},u.prototype.getReleaseErr=function(){var s=this.state;return s==="initialized"||s==="detached"||s==="failed"?null:new d.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+s,90001,400)},u.prototype.setChannelSerial=function(s){w.default.logAction(w.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+s+"; previous = "+this.properties.channelSerial),s&&(this.properties.channelSerial=s)},u}(m.default);r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function a(g,v,m,w,R){this.previous=g,this.current=v,v==="attached"&&(this.resumed=m,this.hasBacklog=w),R&&(this.reason=R)}return a}();r.default=o},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(){var a=o,g=a.lib,v=g.WordArray,m=g.Hasher,w=a.algo,R=[],O=w.SHA1=m.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,d){for(var E=this._hash.words,P=E[0],y=E[1],c=E[2],p=E[3],C=E[4],f=0;f<80;f++){if(f<16)R[f]=T[d+f]|0;else{var u=R[f-3]^R[f-8]^R[f-14]^R[f-16];R[f]=u<<1|u>>>31}var s=(P<<5|P>>>27)+C+R[f];f<20?s+=(y&c|~y&p)+1518500249:f<40?s+=(y^c^p)+1859775393:f<60?s+=(y&c|y&p|c&p)-1894007588:s+=(y^c^p)-899497514,C=p,p=c,c=y<<30|y>>>2,y=P,P=s}E[0]=E[0]+P|0,E[1]=E[1]+y|0,E[2]=E[2]+c|0,E[3]=E[3]+p|0,E[4]=E[4]+C|0},_doFinalize:function(){var T=this._data,d=T.words,E=this._nDataBytes*8,P=T.sigBytes*8;return d[P>>>5]|=128<<24-P%32,d[(P+64>>>9<<4)+14]=Math.floor(E/4294967296),d[(P+64>>>9<<4)+15]=E,T.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var T=m.clone.call(this);return T._hash=this._hash.clone(),T}});a.SHA1=m._createHelper(O),a.HmacSHA1=m._createHmacHelper(O)}(),o.SHA1})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(f){if(f===void 0)return"undefined";var u,s;if(f instanceof ArrayBuffer?(s="ArrayBuffer",u=new DataView(f)):f instanceof DataView&&(s="DataView",u=f),!u)return JSON.stringify(f);for(var l=[],S=0;S<f.byteLength;S++){if(S>20){l.push("...");break}var h=u.getUint8(S).toString(16);h.length===1&&(h="0"+h),l.push(h)}return"<"+s+" "+l.join(" ")+">"}function a(f,u,s){for(var l=0,S=s.length;l<S;l++){var h=s.charCodeAt(l);if(h<128){f.setUint8(u++,h>>>0&127|0);continue}if(h<2048){f.setUint8(u++,h>>>6&31|192),f.setUint8(u++,h>>>0&63|128);continue}if(h<65536){f.setUint8(u++,h>>>12&15|224),f.setUint8(u++,h>>>6&63|128),f.setUint8(u++,h>>>0&63|128);continue}if(h<1114112){f.setUint8(u++,h>>>18&7|240),f.setUint8(u++,h>>>12&63|128),f.setUint8(u++,h>>>6&63|128),f.setUint8(u++,h>>>0&63|128);continue}throw new Error("bad codepoint "+h)}}function g(f,u,s){for(var l="",S=u,h=u+s;S<h;S++){var A=f.getUint8(S);if(!(A&128)){l+=String.fromCharCode(A);continue}if((A&224)===192){l+=String.fromCharCode((A&15)<<6|f.getUint8(++S)&63);continue}if((A&240)===224){l+=String.fromCharCode((A&15)<<12|(f.getUint8(++S)&63)<<6|(f.getUint8(++S)&63)<<0);continue}if((A&248)===240){l+=String.fromCharCode((A&7)<<18|(f.getUint8(++S)&63)<<12|(f.getUint8(++S)&63)<<6|(f.getUint8(++S)&63)<<0);continue}throw new Error("Invalid byte "+A.toString(16))}return l}function v(f){for(var u=0,s=0,l=f.length;s<l;s++){var S=f.charCodeAt(s);if(S<128){u+=1;continue}if(S<2048){u+=2;continue}if(S<65536){u+=3;continue}if(S<1114112){u+=4;continue}throw new Error("bad codepoint "+S)}return u}function m(f,u){var s=C(f,u);if(s!==0){var l=new ArrayBuffer(s),S=new DataView(l);return p(f,S,0,u),l}}var w=65536*65536,R=1/w;function O(f,u){return u=u||0,f.getInt32(u)*w+f.getUint32(u+4)}function T(f,u){return u=u||0,f.getUint32(u)*w+f.getUint32(u+4)}function d(f,u,s){s<9223372036854776e3?(f.setInt32(u,Math.floor(s*R)),f.setInt32(u+4,s&-1)):(f.setUint32(u,2147483647),f.setUint32(u+4,2147483647))}function E(f,u,s){s<18446744073709552e3?(f.setUint32(u,Math.floor(s*R)),f.setInt32(u+4,s&-1)):(f.setUint32(u,4294967295),f.setUint32(u+4,4294967295))}var P=function(){function f(u,s){var l=this;this.map=function(S){for(var h={},A=0;A<S;A++){var M=l.parse();h[M]=l.parse()}return h},this.bin=function(S){var h=new ArrayBuffer(S);return new Uint8Array(h).set(new Uint8Array(l.view.buffer,l.offset,S),0),l.offset+=S,h},this.buf=this.bin,this.str=function(S){var h=g(l.view,l.offset,S);return l.offset+=S,h},this.array=function(S){for(var h=new Array(S),A=0;A<S;A++)h[A]=l.parse();return h},this.ext=function(S){return l.offset+=S,{type:l.view.getInt8(l.offset),data:l.buf(S)}},this.parse=function(){var S=l.view.getUint8(l.offset),h,A;if(!(S&128))return l.offset++,S;if((S&240)===128)return A=S&15,l.offset++,l.map(A);if((S&240)===144)return A=S&15,l.offset++,l.array(A);if((S&224)===160)return A=S&31,l.offset++,l.str(A);if((S&224)===224)return h=l.view.getInt8(l.offset),l.offset++,h;switch(S){case 192:return l.offset++,null;case 193:l.offset++;return;case 194:return l.offset++,!1;case 195:return l.offset++,!0;case 196:return A=l.view.getUint8(l.offset+1),l.offset+=2,l.bin(A);case 197:return A=l.view.getUint16(l.offset+1),l.offset+=3,l.bin(A);case 198:return A=l.view.getUint32(l.offset+1),l.offset+=5,l.bin(A);case 199:return A=l.view.getUint8(l.offset+1),l.offset+=2,l.ext(A);case 200:return A=l.view.getUint16(l.offset+1),l.offset+=3,l.ext(A);case 201:return A=l.view.getUint32(l.offset+1),l.offset+=5,l.ext(A);case 202:return h=l.view.getFloat32(l.offset+1),l.offset+=5,h;case 203:return h=l.view.getFloat64(l.offset+1),l.offset+=9,h;case 204:return h=l.view.getUint8(l.offset+1),l.offset+=2,h;case 205:return h=l.view.getUint16(l.offset+1),l.offset+=3,h;case 206:return h=l.view.getUint32(l.offset+1),l.offset+=5,h;case 207:return h=T(l.view,l.offset+1),l.offset+=9,h;case 208:return h=l.view.getInt8(l.offset+1),l.offset+=2,h;case 209:return h=l.view.getInt16(l.offset+1),l.offset+=3,h;case 210:return h=l.view.getInt32(l.offset+1),l.offset+=5,h;case 211:return h=O(l.view,l.offset+1),l.offset+=9,h;case 212:return A=1,l.offset++,l.ext(A);case 213:return A=2,l.offset++,l.ext(A);case 214:return A=4,l.offset++,l.ext(A);case 215:return A=8,l.offset++,l.ext(A);case 216:return A=16,l.offset++,l.ext(A);case 217:return A=l.view.getUint8(l.offset+1),l.offset+=2,l.str(A);case 218:return A=l.view.getUint16(l.offset+1),l.offset+=3,l.str(A);case 219:return A=l.view.getUint32(l.offset+1),l.offset+=5,l.str(A);case 220:return A=l.view.getUint16(l.offset+1),l.offset+=3,l.array(A);case 221:return A=l.view.getUint32(l.offset+1),l.offset+=5,l.array(A);case 222:return A=l.view.getUint16(l.offset+1),l.offset+=3,l.map(A);case 223:return A=l.view.getUint32(l.offset+1),l.offset+=5,l.map(A)}throw new Error("Unknown type 0x"+S.toString(16))},this.offset=s||0,this.view=u}return f}();function y(f){var u=new DataView(f),s=new P(u),l=s.parse();if(s.offset!==f.byteLength)throw new Error(f.byteLength-s.offset+" trailing bytes");return l}function c(f,u){return Object.keys(f).filter(function(s){var l=f[s],S=typeof l;return(!u||l!=null)&&(S!=="function"||!!l.toJSON)})}function p(f,u,s,l){var S=typeof f;if(typeof f=="string"){var h=v(f);if(h<32)return u.setUint8(s,h|160),a(u,s+1,f),1+h;if(h<256)return u.setUint8(s,217),u.setUint8(s+1,h),a(u,s+2,f),2+h;if(h<65536)return u.setUint8(s,218),u.setUint16(s+1,h),a(u,s+3,f),3+h;if(h<4294967296)return u.setUint8(s,219),u.setUint32(s+1,h),a(u,s+5,f),5+h}if(ArrayBuffer.isView&&ArrayBuffer.isView(f)&&(f=f.buffer),f instanceof ArrayBuffer){var A=f.byteLength;if(A<256)return u.setUint8(s,196),u.setUint8(s+1,A),new Uint8Array(u.buffer).set(new Uint8Array(f),s+2),2+A;if(A<65536)return u.setUint8(s,197),u.setUint16(s+1,A),new Uint8Array(u.buffer).set(new Uint8Array(f),s+3),3+A;if(A<4294967296)return u.setUint8(s,198),u.setUint32(s+1,A),new Uint8Array(u.buffer).set(new Uint8Array(f),s+5),5+A}if(typeof f=="number"){if(Math.floor(f)!==f)return u.setUint8(s,203),u.setFloat64(s+1,f),9;if(f>=0){if(f<128)return u.setUint8(s,f),1;if(f<256)return u.setUint8(s,204),u.setUint8(s+1,f),2;if(f<65536)return u.setUint8(s,205),u.setUint16(s+1,f),3;if(f<4294967296)return u.setUint8(s,206),u.setUint32(s+1,f),5;if(f<18446744073709552e3)return u.setUint8(s,207),E(u,s+1,f),9;throw new Error("Number too big 0x"+f.toString(16))}if(f>=-32)return u.setInt8(s,f),1;if(f>=-128)return u.setUint8(s,208),u.setInt8(s+1,f),2;if(f>=-32768)return u.setUint8(s,209),u.setInt16(s+1,f),3;if(f>=-2147483648)return u.setUint8(s,210),u.setInt32(s+1,f),5;if(f>=-9223372036854776e3)return u.setUint8(s,211),d(u,s+1,f),9;throw new Error("Number too small -0x"+(-f).toString(16).substr(1))}if(S==="undefined")return l?0:(u.setUint8(s,212),u.setUint8(s+1,0),u.setUint8(s+2,0),3);if(f===null)return l?0:(u.setUint8(s,192),1);if(S==="boolean")return u.setUint8(s,f?195:194),1;if(typeof f.toJSON=="function")return p(f.toJSON(),u,s,l);if(S==="object"){var M,x=0,N=void 0,L=Array.isArray(f);if(L?M=f.length:(N=c(f,l),M=N.length),M<16?(u.setUint8(s,M|(L?144:128)),x=1):M<65536?(u.setUint8(s,L?220:222),u.setUint16(s+1,M),x=3):M<4294967296&&(u.setUint8(s,L?221:223),u.setUint32(s+1,M),x=5),L)for(var _=0;_<M;_++)x+=p(f[_],u,s+x,l);else if(N)for(var _=0;_<M;_++){var k=N[_];x+=p(k,u,s+x),x+=p(f[k],u,s+x,l)}return x}if(S==="function")return 0;throw new Error("Unknown type "+S)}function C(f,u){var s=typeof f;if(s==="string"){var l=v(f);if(l<32)return 1+l;if(l<256)return 2+l;if(l<65536)return 3+l;if(l<4294967296)return 5+l}if(ArrayBuffer.isView&&ArrayBuffer.isView(f)&&(f=f.buffer),f instanceof ArrayBuffer){var S=f.byteLength;if(S<256)return 2+S;if(S<65536)return 3+S;if(S<4294967296)return 5+S}if(typeof f=="number"){if(Math.floor(f)!==f)return 9;if(f>=0){if(f<128)return 1;if(f<256)return 2;if(f<65536)return 3;if(f<4294967296)return 5;if(f<18446744073709552e3)return 9;throw new Error("Number too big 0x"+f.toString(16))}if(f>=-32)return 1;if(f>=-128)return 2;if(f>=-32768)return 3;if(f>=-2147483648)return 5;if(f>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+f.toString(16).substr(1))}if(s==="boolean")return 1;if(f===null)return u?0:1;if(f===void 0)return u?0:3;if(typeof f.toJSON=="function")return C(f.toJSON(),u);if(s==="object"){var h,A=0;if(Array.isArray(f)){h=f.length;for(var M=0;M<h;M++)A+=C(f[M],u)}else{var x=c(f,u);h=x.length;for(var M=0;M<h;M++){var N=x[M];A+=C(N)+C(f[N],u)}}if(h<16)return 1+A;if(h<65536)return 3+A;if(h<4294967296)return 5+A;throw new Error("Array or object too long 0x"+h.toString(16))}if(s==="function")return 0;throw new Error("Unknown type "+s)}r.default={encode:m,decode:y,inspect:o,utf8Write:a,utf8Read:g,utf8ByteCount:v}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(29)),g=o.__importDefault(i(50)),v=o.__importDefault(i(3)),m=o.__importDefault(i(55)),w=o.__importDefault(i(57)),R=o.__importDefault(i(62)),O=o.__importDefault(i(64)),T=o.__importDefault(i(68)),d=o.__importDefault(i(2)),E=i(8),P=o.__importDefault(i(65)),y=o.__importDefault(i(66)),c=o.__importDefault(i(41)),p=(0,w.default)(O.default,m.default);v.default.Crypto=p,v.default.BufferUtils=m.default,v.default.Http=R.default,v.default.Config=O.default,v.default.Transports=T.default,v.default.WebStorage=P.default,a.default.Crypto=p,g.default.Crypto=p,d.default.initLogHandlers(),v.default.Defaults=(0,E.getDefaults)(y.default),v.default.Config.agent&&(v.default.Defaults.agent+=" "+v.default.Config.agent),v.default.Config.noUpgrade&&(v.default.Defaults.upgradeTransports=[]),r.default={Rest:a.default,Realtime:g.default,msgpack:c.default}},function(n){n.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.41","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","async":"ably-forks/async#requirejs","aws-sdk":"^2.1075.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"~2.7","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.4.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^3.5.2","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","concat":"grunt concat","build":"grunt build:all","build:node":"grunt build:node","build:browser":"grunt build:browser","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')},function(n,r){},function(n,r,i){(function(o,a){n.exports=a(i(6),i(31),i(23))})(this,function(o){return o.HmacSHA256})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(47)),v=o.__importDefault(i(24)),m=o.__importDefault(i(18)),w=o.__importDefault(i(4)),R=o.__importDefault(i(48)),O=function(){},T=function(){function y(c){this.rest=c,this.admin=new d(c)}return y}(),d=function(){function y(c){this.rest=c,this.deviceRegistrations=new E(c),this.channelSubscriptions=new P(c)}return y.prototype.publish=function(c,p,C){var f=this.rest,u=f.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,s=a.defaultPostHeaders(f.options,u),l={},S=a.mixin({recipient:c},p);if(typeof C!="function"){if(this.rest.options.promises)return a.promisify(this,"publish",arguments);C=O}f.options.headers&&a.mixin(s,f.options.headers),f.options.pushFullWait&&a.mixin(l,{fullWait:"true"});var h=a.encodeBody(S,u);v.default.post(f,"/push/publish",h,s,l,null,function(A){return C(A)})},y}(),E=function(){function y(c){this.rest=c}return y.prototype.save=function(c,p){var C=this.rest,f=g.default.fromValues(c),u=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,s=a.defaultPostHeaders(C.options,u),l={};if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"save",arguments);p=O}C.options.headers&&a.mixin(s,C.options.headers),C.options.pushFullWait&&a.mixin(l,{fullWait:"true"});var S=a.encodeBody(f,u);v.default.put(C,"/push/deviceRegistrations/"+encodeURIComponent(c.id),S,s,l,null,function(h,A,M,x){p(h,h?void 0:g.default.fromResponseBody(A,x?void 0:u))})},y.prototype.get=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=a.defaultGetHeaders(C.options,f),s=c.id||c;if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"get",arguments);p=O}if(typeof s!="string"||!s.length){p(new w.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400));return}C.options.headers&&a.mixin(u,C.options.headers),v.default.get(C,"/push/deviceRegistrations/"+encodeURIComponent(s),u,{},null,function(l,S,h,A){p(l,l?void 0:g.default.fromResponseBody(S,A?void 0:f))})},y.prototype.list=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=this.rest.http.supportsLinkHeaders?void 0:f,s=a.defaultGetHeaders(C.options,f);if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"list",arguments);p=O}C.options.headers&&a.mixin(s,C.options.headers),new m.default(C,"/push/deviceRegistrations",s,u,function(l,S,h){return g.default.fromResponseBody(l,h?void 0:f)}).get(c,p)},y.prototype.remove=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=a.defaultGetHeaders(C.options,f),s={},l=c.id||c;if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"remove",arguments);p=O}if(typeof l!="string"||!l.length){p(new w.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400));return}C.options.headers&&a.mixin(u,C.options.headers),C.options.pushFullWait&&a.mixin(s,{fullWait:"true"}),v.default.delete(C,"/push/deviceRegistrations/"+encodeURIComponent(l),u,s,null,function(S){return p(S)})},y.prototype.removeWhere=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=a.defaultGetHeaders(C.options,f);if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"removeWhere",arguments);p=O}C.options.headers&&a.mixin(u,C.options.headers),C.options.pushFullWait&&a.mixin(c,{fullWait:"true"}),v.default.delete(C,"/push/deviceRegistrations",u,c,null,function(s){return p(s)})},y}(),P=function(){function y(c){this.remove=y.prototype.removeWhere,this.rest=c}return y.prototype.save=function(c,p){var C=this.rest,f=R.default.fromValues(c),u=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,s=a.defaultPostHeaders(C.options,u),l={};if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"save",arguments);p=O}C.options.headers&&a.mixin(s,C.options.headers),C.options.pushFullWait&&a.mixin(l,{fullWait:"true"});var S=a.encodeBody(f,u);v.default.post(C,"/push/channelSubscriptions",S,s,l,null,function(h,A,M,x){p(h,!h&&R.default.fromResponseBody(A,x?void 0:u))})},y.prototype.list=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=this.rest.http.supportsLinkHeaders?void 0:f,s=a.defaultGetHeaders(C.options,f);if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"list",arguments);p=O}C.options.headers&&a.mixin(s,C.options.headers),new m.default(C,"/push/channelSubscriptions",s,u,function(l,S,h){return R.default.fromResponseBody(l,h?void 0:f)}).get(c,p)},y.prototype.removeWhere=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=a.defaultGetHeaders(C.options,f);if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"removeWhere",arguments);p=O}C.options.headers&&a.mixin(u,C.options.headers),C.options.pushFullWait&&a.mixin(c,{fullWait:"true"}),v.default.delete(C,"/push/channelSubscriptions",u,c,null,function(s){return p(s)})},y.prototype.listChannels=function(c,p){var C=this.rest,f=C.options.useBinaryProtocol?a.Format.msgpack:a.Format.json,u=this.rest.http.supportsLinkHeaders?void 0:f,s=a.defaultGetHeaders(C.options,f);if(typeof p!="function"){if(this.rest.options.promises)return a.promisify(this,"listChannels",arguments);p=O}C.options.headers&&a.mixin(s,C.options.headers),C.options.pushFullWait&&a.mixin(c,{fullWait:"true"}),new m.default(C,"/push/channels",s,u,function(l,S,h){for(var A=!h&&f?a.decodeBody(l,f):l,M=0;M<A.length;M++)A[M]=String(A[M]);return A}).get(c,p)},y}();r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(4)),v;(function(R){R.Phone="phone",R.Tablet="tablet",R.Desktop="desktop",R.TV="tv",R.Watch="watch",R.Car="car",R.Embedded="embedded",R.Other="other"})(v||(v={}));var m;(function(R){R.Android="android",R.IOS="ios",R.Browser="browser"})(m||(m={}));var w=function(){function R(){}return R.prototype.toJSON=function(){var O,T,d;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(O=this.push)===null||O===void 0?void 0:O.recipient,state:(T=this.push)===null||T===void 0?void 0:T.state,error:(d=this.push)===null||d===void 0?void 0:d.error}}},R.prototype.toString=function(){var O,T,d,E,P="[DeviceDetails";return this.id&&(P+="; id="+this.id),this.platform&&(P+="; platform="+this.platform),this.formFactor&&(P+="; formFactor="+this.formFactor),this.clientId&&(P+="; clientId="+this.clientId),this.metadata&&(P+="; metadata="+this.metadata),this.deviceIdentityToken&&(P+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),!((O=this.push)===null||O===void 0)&&O.recipient&&(P+="; push.recipient="+JSON.stringify(this.push.recipient)),!((T=this.push)===null||T===void 0)&&T.state&&(P+="; push.state="+this.push.state),!((d=this.push)===null||d===void 0)&&d.error&&(P+="; push.error="+JSON.stringify(this.push.error)),!((E=this.push)===null||E===void 0)&&E.metadata&&(P+="; push.metadata="+this.push.metadata),P+="]",P},R.fromResponseBody=function(O,T){return T&&(O=a.decodeBody(O,T)),a.isArray(O)?R.fromValuesArray(O):R.fromValues(O)},R.fromValues=function(O){return O.error=O.error&&g.default.fromValues(O.error),Object.assign(new R,O)},R.fromValuesArray=function(O){for(var T=O.length,d=new Array(T),E=0;E<T;E++)d[E]=R.fromValues(O[E]);return d},R.toRequestBody=a.encodeBody,R}();r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=function(){function v(){}return v.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},v.prototype.toString=function(){var m="[PushChannelSubscription";return this.channel&&(m+="; channel="+this.channel),this.deviceId&&(m+="; deviceId="+this.deviceId),this.clientId&&(m+="; clientId="+this.clientId),m+="]",m},v.fromResponseBody=function(m,w){return w&&(m=a.decodeBody(m,w)),a.isArray(m)?v.fromValuesArray(m):v.fromValues(m)},v.fromValues=function(m){return Object.assign(new v,m)},v.fromValuesArray=function(m){for(var w=m.length,R=new Array(w),O=0;O<w;O++)R[O]=v.fromValues(m[O]);return R},v.toRequestBody=a.encodeBody,v}();r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=function(){function C(f){this.count=f&&f.count||0,this.data=f&&f.data||0,this.uncompressedData=f&&f.uncompressedData||0,this.failed=f&&f.failed||0,this.refused=f&&f.refused||0}return C}(),v=function(C){o.__extends(f,C);function f(u){var s=C.call(this,u)||this;return u&&u.category&&(s.category={},a.forInOwnNonNullProperties(u.category,function(l){s.category[l]=new g(u.category[l])})),s}return f}(g),m=function(){function C(f){this.peak=f&&f.peak||0,this.min=f&&f.min||0,this.mean=f&&f.mean||0,this.opened=f&&f.opened||0,this.refused=f&&f.refused||0}return C}(),w=function(){function C(f){this.succeeded=f&&f.succeeded||0,this.failed=f&&f.failed||0,this.refused=f&&f.refused||0}return C}(),R=function(){function C(f){this.plain=new m(f&&f.plain),this.tls=new m(f&&f.tls),this.all=new m(f&&f.all)}return C}(),O=function(){function C(f){this.messages=new v(f&&f.messages),this.presence=new v(f&&f.presence),this.all=new v(f&&f.all)}return C}(),T=function(){function C(f){this.realtime=new O(f&&f.realtime),this.rest=new O(f&&f.rest),this.webhook=new O(f&&f.webhook),this.sharedQueue=new O(f&&f.sharedQueue),this.externalQueue=new O(f&&f.externalQueue),this.httpEvent=new O(f&&f.httpEvent),this.push=new O(f&&f.push),this.all=new O(f&&f.all)}return C}(),d=function(){function C(f){this.all=new O(f&&f.all),this.inbound=new T(f&&f.inbound),this.outbound=new T(f&&f.outbound)}return C}(),E=function(){function C(f){this.all=new O(f&&f.all),this.producerPaid=new d(f&&f.producerPaid),this.consumerPaid=new d(f&&f.consumerPaid)}return C}(),P=function(){function C(f){this.messages=f&&f.messages||0;var u=f&&f.notifications;this.notifications={invalid:u&&u.invalid||0,attempted:u&&u.attempted||0,successful:u&&u.successful||0,failed:u&&u.failed||0},this.directPublishes=f&&f.directPublishes||0}return C}(),y=function(){function C(f){this.succeeded=f&&f.succeeded||0,this.skipped=f&&f.skipped||0,this.failed=f&&f.failed||0}return C}(),c=function(){function C(f){var u=this;this.delta=void 0,f&&f.delta&&(this.delta={},a.forInOwnNonNullProperties(f.delta,function(s){u.delta[s]=new y(f.delta[s])}))}return C}(),p=function(C){o.__extends(f,C);function f(u){var s=C.call(this,u)||this;return s.persisted=new O(u&&u.persisted),s.connections=new R(u&&u.connections),s.channels=new m(u&&u.channels),s.apiRequests=new w(u&&u.apiRequests),s.tokenRequests=new w(u&&u.tokenRequests),s.xchgProducer=new E(u&&u.xchgProducer),s.xchgConsumer=new E(u&&u.xchgConsumer),s.push=new P(u&&u.pushStats),s.processed=new c(u&&u.processed),s.inProgress=u&&u.inProgress||void 0,s.unit=u&&u.unit||void 0,s.intervalId=u&&u.intervalId||void 0,s}return f.fromValues=function(u){return new f(u)},f}(d);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(29)),v=o.__importDefault(i(7)),m=o.__importDefault(i(2)),w=o.__importDefault(i(51)),R=o.__importDefault(i(38)),O=o.__importDefault(i(8)),T=o.__importDefault(i(4)),d=o.__importDefault(i(10)),E=o.__importDefault(i(34)),P=o.__importDefault(i(3)),y=o.__importDefault(i(9)),c=function(C){o.__extends(f,C);function f(u){var s=C.call(this,u)||this;return m.default.logAction(m.default.LOG_MINOR,"Realtime()",""),s.connection=new w.default(s,s.options),s.channels=new p(s),u.autoConnect!==!1&&s.connect(),s}return f.prototype.connect=function(){m.default.logAction(m.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},f.prototype.close=function(){m.default.logAction(m.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},f.Promise=function(u){return u=O.default.objectifyOptions(u),u.promises=!0,new f(u)},f.Callbacks=f,f.Utils=a,f.ConnectionManager=E.default,f.Platform=P.default,f.ProtocolMessage=d.default,f.Message=y.default,f}(g.default),p=function(C){o.__extends(f,C);function f(u){var s=C.call(this)||this;return s.realtime=u,s.all=Object.create(null),u.connection.connectionManager.on("transport.active",function(){s.onTransportActive()}),s}return f.prototype.channelSerials=function(){for(var u={},s=0,l=a.keysArray(this.all,!0);s<l.length;s++){var S=l[s],h=this.all[S];h.properties.channelSerial&&(u[S]=h.properties.channelSerial)}return u},f.prototype.recoverChannels=function(u){for(var s=0,l=a.keysArray(u,!0);s<l.length;s++){var S=l[s],h=this.get(S);h.properties.channelSerial=u[S]}},f.prototype.onChannelMessage=function(u){var s=u.channel;if(s===void 0){m.default.logAction(m.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+u.action);return}var l=this.all[s];if(!l){m.default.logAction(m.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+s);return}l.onMessage(u)},f.prototype.onTransportActive=function(){for(var u in this.all){var s=this.all[u];s.state==="attaching"||s.state==="detaching"?s.checkPendingState():s.state==="suspended"?s._attach(!1,null):s.state==="attached"&&s.requestState("attaching")}},f.prototype.propogateConnectionInterruption=function(u,s){var l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},S=["attaching","attached","detaching","suspended"],h=l[u];for(var A in this.all){var M=this.all[A];a.arrIn(S,M.state)&&M.notifyState(h,s)}},f.prototype.get=function(u,s){u=String(u);var l=this.all[u];if(!l)l=this.all[u]=new R.default(this.realtime,u,s);else if(s){if(l._shouldReattachToSetOptions(s))throw new T.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(s)}return l},f.prototype.getDerived=function(u,s,l){if(s.filter){var S=a.toBase64(s.filter),h=a.matchDerivedChannel(u);u="[filter=".concat(S).concat(h.qualifierParam,"]").concat(h.channelName)}return this.get(u,l)},f.prototype.release=function(u){u=String(u);var s=this.all[u];if(s){var l=s.getReleaseErr();if(l)throw l;delete this.all[u]}},f}(v.default);r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(7)),v=o.__importDefault(i(34)),m=o.__importDefault(i(2)),w=o.__importDefault(i(36)),R=o.__importDefault(i(3));function O(){}var T=function(d){o.__extends(E,d);function E(P,y){var c=d.call(this)||this;return c.whenState=function(p,C){return g.default.prototype.whenState.call(c,p,c.state,C,new w.default(void 0,p))},c.ably=P,c.connectionManager=new v.default(P,y),c.state=c.connectionManager.state.state,c.key=void 0,c.id=void 0,c.errorReason=null,c.connectionManager.on("connectionstate",function(p){var C=c.state=p.current;R.default.Config.nextTick(function(){c.emit(C,p)})}),c.connectionManager.on("update",function(p){R.default.Config.nextTick(function(){c.emit("update",p)})}),c}return E.prototype.connect=function(){m.default.logAction(m.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},E.prototype.ping=function(P){if(m.default.logAction(m.default.LOG_MINOR,"Connection.ping()",""),!P){if(this.ably.options.promises)return a.promisify(this,"ping",arguments);P=O}this.connectionManager.ping(null,P)},E.prototype.close=function(){m.default.logAction(m.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(E.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),E.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},E}(g.default);r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.PendingMessage=void 0;var o=i(0),a=o.__importDefault(i(10)),g=o.__importStar(i(1)),v=o.__importDefault(i(7)),m=o.__importDefault(i(2)),w=o.__importDefault(i(35)),R=o.__importDefault(i(4)),O=a.default.Action,T=function(){function E(P,y){this.message=P,this.callback=y,this.merged=!1;var c=P.action;this.sendAttempted=!1,this.ackRequired=c==O.MESSAGE||c==O.PRESENCE}return E}();r.PendingMessage=T;var d=function(E){o.__extends(P,E);function P(y){var c=E.call(this)||this;return c.transport=y,c.messageQueue=new w.default,y.on("ack",function(p,C){c.onAck(p,C)}),y.on("nack",function(p,C,f){c.onNack(p,C,f)}),c}return P.prototype.onAck=function(y,c){m.default.logAction(m.default.LOG_MICRO,"Protocol.onAck()","serial = "+y+"; count = "+c),this.messageQueue.completeMessages(y,c)},P.prototype.onNack=function(y,c,p){m.default.logAction(m.default.LOG_ERROR,"Protocol.onNack()","serial = "+y+"; count = "+c+"; err = "+g.inspectError(p)),p||(p=new R.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(y,c,p)},P.prototype.onceIdle=function(y){var c=this.messageQueue;if(c.count()===0){y();return}c.once("idle",y)},P.prototype.send=function(y){y.ackRequired&&this.messageQueue.push(y),m.default.shouldLog(m.default.LOG_MICRO)&&m.default.logAction(m.default.LOG_MICRO,"Protocol.send()","sending msg; "+a.default.stringify(y.message)),y.sendAttempted=!0,this.transport.send(y.message)},P.prototype.getTransport=function(){return this.transport},P.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},P.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},P.prototype.finish=function(){var y=this.transport;this.onceIdle(function(){y.disconnect()})},P}(v.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(3)),g=o.__importStar(i(1)),v=o.__importDefault(i(25)),m=o.__importDefault(i(8)),w=o.__importDefault(i(2)),R=o.__importDefault(i(10)),O=o.__importDefault(i(4)),T="web_socket";function d(y){return!!y.on}var E=function(y){o.__extends(c,y);function c(p,C,f){var u=y.call(this,p,C,f)||this;return u.shortName=T,f.heartbeats=a.default.Config.useProtocolHeartbeats,u.wsHost=m.default.getHost(f.options,f.host,!0),u}return c.isAvailable=function(){return!!a.default.Config.WebSocket},c.prototype.createWebSocket=function(p,C){return this.uri=p+g.toQueryString(C),new a.default.Config.WebSocket(this.uri)},c.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},c.prototype.connect=function(){w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),v.default.prototype.connect.call(this);var p=this,C=this.params,f=C.options,u=f.tls?"wss://":"ws://",s=u+this.wsHost+":"+m.default.getPort(f)+"/";w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+s),this.auth.getAuthParams(function(l,S){if(!p.isDisposed){var h="";for(var A in S)h+=" "+A+": "+S[A]+";";if(w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+h+" err: "+l),l){p.disconnect(l);return}var M=C.getConnectParams(S);try{var x=p.wsConnection=p.createWebSocket(s,M);x.binaryType=a.default.Config.binaryType,x.onopen=function(){p.onWsOpen()},x.onclose=function(N){p.onWsClose(N)},x.onmessage=function(N){p.onWsData(N.data)},x.onerror=function(N){p.onWsError(N)},d(x)&&x.on("ping",function(){p.onActivity()})}catch(N){w.default.logAction(w.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(N.stack||N.message)),p.disconnect(N)}}})},c.prototype.send=function(p){var C=this.wsConnection;if(!C){w.default.logAction(w.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{C.send(R.default.serialize(p,this.params.format))}catch(u){var f="Exception from ws connection when trying to send: "+g.inspectError(u);w.default.logAction(w.default.LOG_ERROR,"WebSocketTransport.send()",f),this.finish("disconnected",new O.default(f,5e4,500))}},c.prototype.onWsData=function(p){w.default.logAction(w.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+p.length+"; type = "+typeof p);try{this.onProtocolMessage(R.default.deserialize(p,this.format))}catch(C){w.default.logAction(w.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+C.stack)}},c.prototype.onWsOpen=function(){w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},c.prototype.onWsClose=function(p){var C,f;if(typeof p=="object"?(f=p.code,C=p.wasClean||f===1e3):(f=p,C=f==1e3),delete this.wsConnection,C){w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var u=new O.default("Websocket closed",80003,400);this.finish("disconnected",u)}else{var s="Unclean disconnection of WebSocket ; code = "+f,u=new O.default(s,80003,400);w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.onWsClose()",s),this.finish("disconnected",u)}this.emit("disposed")},c.prototype.onWsError=function(p){var C=this;w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+p.message),a.default.Config.nextTick(function(){C.disconnect(Error(p.message))})},c.prototype.dispose=function(){w.default.logAction(w.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var p=this.wsConnection;p&&(p.onmessage=function(){},delete this.wsConnection,a.default.Config.nextTick(function(){if(w.default.logAction(w.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!p)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");p.close()}))},c}(v.default);function P(y){return E.isAvailable()&&(y.supportedTransports[T]=E),E}r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(1)),g=o.__importDefault(i(33)),v=o.__importDefault(i(7)),m=o.__importDefault(i(2)),w=o.__importDefault(i(14)),R=o.__importStar(i(4)),O=o.__importDefault(i(38)),T=o.__importDefault(i(22)),d=o.__importDefault(i(39)),E=function(){};function P(u){return u.channel.realtime.auth.clientId}function y(u){var s=u.channel.realtime,l=s.auth.clientId;return(!l||l==="*")&&s.connection.state==="connected"}function c(u,s,l){switch(u.state){case"attached":case"suspended":l();break;case"initialized":case"detached":case"detaching":case"attaching":u.attach(function(S){S?s(S):l()});break;default:s(R.default.fromValues(u.invalidStateError()))}}function p(u,s){if(u.isSynthesized()||s.isSynthesized())return u.timestamp>=s.timestamp;var l=u.parseId(),S=s.parseId();return l.msgSerial===S.msgSerial?l.index>S.index:l.msgSerial>S.msgSerial}var C=function(u){o.__extends(s,u);function s(l){var S=u.call(this,l)||this;return S.channel=l,S.syncComplete=!1,S.members=new f(S,function(h){return h.clientId+":"+h.connectionId}),S._myMembers=new f(S,function(h){return h.clientId}),S.subscriptions=new v.default,S.pendingPresence=[],S}return s.prototype.enter=function(l,S){if(y(this))throw new R.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,l,"enter",S)},s.prototype.update=function(l,S){if(y(this))throw new R.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,l,"update",S)},s.prototype.enterClient=function(l,S,h){return this._enterOrUpdateClient(void 0,l,S,"enter",h)},s.prototype.updateClient=function(l,S,h){return this._enterOrUpdateClient(void 0,l,S,"update",h)},s.prototype._enterOrUpdateClient=function(l,S,h,A,M){var x=this;if(!M)if(typeof h=="function")M=h,h=null;else{if(this.channel.realtime.options.promises)return a.promisify(this,"_enterOrUpdateClient",[l,S,h,A]);M=E}var N=this.channel;if(!N.connectionManager.activeState()){M(N.connectionManager.getError());return}m.default.logAction(m.default.LOG_MICRO,"RealtimePresence."+A+"Client()","channel = "+N.name+", id = "+l+", client = "+(S||"(implicit) "+P(this)));var L=w.default.fromValues({action:A,data:h});l&&(L.id=l),S&&(L.clientId=S),w.default.encode(L,N.channelOptions,function(_){if(_){M(_);return}switch(N.state){case"attached":N.sendPresence(L,M);break;case"initialized":case"detached":N.attach();case"attaching":x.pendingPresence.push({presence:L,callback:M});break;default:_=new R.PartialErrorInfo("Unable to "+A+" presence channel while in "+N.state+" state",90001),_.code=90001,M(_)}})},s.prototype.leave=function(l,S){if(y(this))throw new R.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,l,S)},s.prototype.leaveClient=function(l,S,h){if(!h)if(typeof S=="function")h=S,S=null;else{if(this.channel.realtime.options.promises)return a.promisify(this,"leaveClient",[l,S]);h=E}var A=this.channel;if(!A.connectionManager.activeState()){h==null||h(A.connectionManager.getError());return}m.default.logAction(m.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+l);var M=w.default.fromValues({action:"leave",data:S});switch(l&&(M.clientId=l),A.state){case"attached":A.sendPresence(M,h);break;case"attaching":this.pendingPresence.push({presence:M,callback:h});break;case"initialized":case"failed":{var x=new R.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);h==null||h(x);break}default:h==null||h(A.invalidStateError())}},s.prototype.get=function(l,S){var h=this,A=Array.prototype.slice.call(arguments);A.length==1&&typeof A[0]=="function"&&A.unshift(null),l=A[0],S=A[1];var M=!l||("waitForSync"in l?l.waitForSync:!0);if(!S){if(this.channel.realtime.options.promises)return a.promisify(this,"get",A);S=E}function x(N){S(null,l?N.list(l):N.values())}if(this.channel.state==="suspended"){M?S(R.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):x(this.members);return}c(this.channel,S,function(){var N=h.members;M?N.waitSync(function(){x(N)}):x(N)})},s.prototype.history=function(l,S){if(m.default.logAction(m.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),S===void 0)if(typeof l=="function")S=l,l=null;else{if(this.channel.realtime.options.promises)return a.promisify(this,"history",arguments);S=E}l&&l.untilAttach&&(this.channel.state==="attached"?(delete l.untilAttach,l.from_serial=this.channel.properties.attachSerial):S(new R.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),g.default.prototype._history.call(this,l,S)},s.prototype.setPresence=function(l,S,h){m.default.logAction(m.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+l.length+" participants; syncChannelSerial = "+h);var A,M,x=this.members,N=this._myMembers,L=[],_=this.channel.connectionManager.connectionId;S&&(this.members.startSync(),h&&(M=h.match(/^[\w-]+:(.*)$/))&&(A=M[1]));for(var k=0;k<l.length;k++){var B=w.default.fromValues(l[k]);switch(B.action){case"leave":x.remove(B)&&L.push(B),B.connectionId===_&&!B.isSynthesized()&&N.remove(B);break;case"enter":case"present":case"update":x.put(B)&&L.push(B),B.connectionId===_&&N.put(B);break}}S&&!A&&(x.endSync(),this.channel.syncChannelSerial=null);for(var k=0;k<L.length;k++){var B=L[k];this.subscriptions.emit(B.action,B)}},s.prototype.onAttached=function(l){m.default.logAction(m.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+l),l?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var S=this.pendingPresence,h=S.length;if(h){this.pendingPresence=[];var A=[],M=T.default.create();m.default.logAction(m.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+h+" queued presence messages");for(var x=0;x<h;x++){var N=S[x];A.push(N.presence),M.push(N.callback)}this.channel.sendPresence(A,M)}},s.prototype.actOnChannelState=function(l,S,h){switch(l){case"attached":this.onAttached(S);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(h);break}},s.prototype.failPendingPresence=function(l){if(this.pendingPresence.length){m.default.logAction(m.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+a.inspectError(l));for(var S=0;S<this.pendingPresence.length;S++)try{this.pendingPresence[S].callback(l)}catch{}this.pendingPresence=[]}},s.prototype._clearMyMembers=function(){this._myMembers.clear()},s.prototype._ensureMyMembersPresent=function(){var l=this,S=this._myMembers,h=function(x){if(x){var N="Presence auto-re-enter failed: "+x.toString(),L=new R.default(N,91004,400);m.default.logAction(m.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",N);var _=new d.default(l.channel.state,l.channel.state,!0,!1,L);l.channel.emit("update",_)}};for(var A in S.map){var M=S.map[A];m.default.logAction(m.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+M.clientId+'" into the presence set'),this._enterOrUpdateClient(M.id,M.clientId,M.data,"enter",h)}},s.prototype._synthesizeLeaves=function(l){var S=this.subscriptions;a.arrForEach(l,function(h){var A=w.default.fromValues({action:"leave",connectionId:h.connectionId,clientId:h.clientId,data:h.data,encoding:h.encoding,timestamp:a.now()});S.emit("leave",A)})},s.prototype.on=function(){for(var l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];m.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,l)},s.prototype.off=function(){for(var l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];m.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,l)},s.prototype.subscribe=function(){for(var l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];var h=O.default.processListenerArgs(l),A=h[0],M=h[1],x=h[2],N=this.channel;if(!x){if(this.channel.realtime.options.promises)return a.promisify(this,"subscribe",[A,M]);x=E}if(N.state==="failed"){x(R.default.fromValues(N.invalidStateError()));return}this.subscriptions.on(A,M),N.attach(x)},s.prototype.unsubscribe=function(){for(var l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];var h=O.default.processListenerArgs(l),A=h[0],M=h[1];this.subscriptions.off(A,M)},s}(g.default),f=function(u){o.__extends(s,u);function s(l,S){var h=u.call(this)||this;return h.presence=l,h.map=Object.create(null),h.syncInProgress=!1,h.residualMembers=null,h.memberKey=S,h}return s.prototype.get=function(l){return this.map[l]},s.prototype.getClient=function(l){var S=this.map,h=[];for(var A in S){var M=S[A];M.clientId==l&&M.action!="absent"&&h.push(M)}return h},s.prototype.list=function(l){var S=this.map,h=l&&l.clientId,A=l&&l.connectionId,M=[];for(var x in S){var N=S[x];N.action!=="absent"&&(h&&h!=N.clientId||A&&A!=N.connectionId||M.push(N))}return M},s.prototype.put=function(l){(l.action==="enter"||l.action==="update")&&(l=w.default.fromValues(l),l.action="present");var S=this.map,h=this.memberKey(l);this.residualMembers&&delete this.residualMembers[h];var A=S[h];return A&&!p(l,A)?!1:(S[h]=l,!0)},s.prototype.values=function(){var l=this.map,S=[];for(var h in l){var A=l[h];A.action!="absent"&&S.push(A)}return S},s.prototype.remove=function(l){var S=this.map,h=this.memberKey(l),A=S[h];return A&&!p(l,A)?!1:(this.syncInProgress?(l=w.default.fromValues(l),l.action="absent",S[h]=l):delete S[h],!0)},s.prototype.startSync=function(){var l=this.map,S=this.syncInProgress;m.default.logAction(m.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+S),this.syncInProgress||(this.residualMembers=a.copy(l),this.setInProgress(!0))},s.prototype.endSync=function(){var l=this.map,S=this.syncInProgress;if(m.default.logAction(m.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+S),S){for(var h in l){var A=l[h];A.action==="absent"&&delete l[h]}this.presence._synthesizeLeaves(a.valuesArray(this.residualMembers));for(var h in this.residualMembers)delete l[h];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},s.prototype.waitSync=function(l){var S=this.syncInProgress;if(m.default.logAction(m.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+S),!S){l();return}this.once("sync",l)},s.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},s.prototype.setInProgress=function(l){m.default.logAction(m.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+l),this.syncInProgress=l,this.presence.syncComplete=!l},s}(v.default);r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=i(56),g=i(30),v=i(11),m=o.__importDefault(i(5)),w=o.__importDefault(i(3)),R=function(){function O(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return O.prototype.isWordArray=function(T){return T!=null&&T.sigBytes!==void 0},O.prototype.isArrayBuffer=function(T){return T!=null&&T.constructor===ArrayBuffer},O.prototype.isTypedArray=function(T){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(T)},O.prototype.uint8ViewToBase64=function(T){for(var d="",E=this.base64CharSet,P=T.byteLength,y=P%3,c=P-y,p,C,f,u,s,l=0;l<c;l=l+3)s=T[l]<<16|T[l+1]<<8|T[l+2],p=(s&16515072)>>18,C=(s&258048)>>12,f=(s&4032)>>6,u=s&63,d+=E[p]+E[C]+E[f]+E[u];return y==1?(s=T[c],p=(s&252)>>2,C=(s&3)<<4,d+=E[p]+E[C]+"=="):y==2&&(s=T[c]<<8|T[c+1],p=(s&64512)>>10,C=(s&1008)>>4,f=(s&15)<<2,d+=E[p]+E[C]+E[f]+"="),d},O.prototype.base64ToArrayBuffer=function(T){for(var d=atob==null?void 0:atob(T),E=d.length,P=new Uint8Array(E),y=0;y<E;y++){var c=d.charCodeAt(y);P[y]=c}return P.buffer},O.prototype.isBuffer=function(T){return this.isArrayBuffer(T)||this.isWordArray(T)||this.isTypedArray(T)},O.prototype.toBuffer=function(T){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(T))return new Uint8Array(T);if(this.isTypedArray(T))return new Uint8Array(T.buffer);if(this.isWordArray(T)){for(var d=new ArrayBuffer(T.sigBytes),E=new Uint8Array(d),P=0;P<T.sigBytes;P++)E[P]=T.words[P>>>2]>>>24-P%4*8&255;return E}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},O.prototype.toArrayBuffer=function(T){return this.isArrayBuffer(T)?T:this.toBuffer(T).buffer},O.prototype.toWordArray=function(T){return this.isTypedArray(T)&&(T=T.buffer),this.isWordArray(T)?T:m.default.create(T)},O.prototype.base64Encode=function(T){return this.isWordArray(T)?(0,v.stringify)(T):this.uint8ViewToBase64(this.toBuffer(T))},O.prototype.base64Decode=function(T){return ArrayBuffer&&w.default.Config.atob?this.base64ToArrayBuffer(T):(0,v.parse)(T)},O.prototype.hexEncode=function(T){return(0,a.stringify)(this.toWordArray(T))},O.prototype.hexDecode=function(T){var d=(0,a.parse)(T);return ArrayBuffer?this.toArrayBuffer(d):d},O.prototype.utf8Encode=function(T){return w.default.Config.TextEncoder?new w.default.Config.TextEncoder().encode(T).buffer:(0,g.parse)(T)},O.prototype.utf8Decode=function(T){if(!this.isBuffer(T))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(T)?new TextDecoder().decode(T):(T=this.toWordArray(T),(0,g.stringify)(T))},O.prototype.bufferCompare=function(T,d){if(!T)return-1;if(!d)return 1;var E=this.toWordArray(T),P=this.toWordArray(d);E.clamp(),P.clamp();var y=E.sigBytes-P.sigBytes;if(y!=0)return y;for(var c=E.words,p=P.words,C=0;C<c.length;C++)if(y=c[C]-p[C],y!=0)return y;return 0},O.prototype.byteLength=function(T){return this.isArrayBuffer(T)||this.isTypedArray(T)?T.byteLength:this.isWordArray(T)?T.sigBytes:-1},O.prototype.typedArrayToBuffer=function(T){return T.buffer},O}();r.default=new R},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return o.enc.Hex})},function(n,r,i){i.r(r);var o=i(5),a=i.n(o),g=i(11),v=i(21),m=i.n(v),w=i(2),R=i.n(w),O=i(4),T=i.n(O),d=function(E,P){var y="aes",c=256,p="cbc",C=16,f=4,u=4294967296,s=2147483648,l;if(E.getRandomWordArray)l=E.getRandomWordArray;else if(typeof Uint32Array<"u"&&E.getRandomValues){var S=new Uint32Array(f);l=function(k,B){var j=k/4,F=j==f?S:new Uint32Array(j);E.getRandomValues(F,function(V){typeof B<"u"&&B(V,P.toWordArray(F))})}}else l=function(k,B){R.a.logAction(R.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var j=k/4,F=new Array(j),V=0;V<j;V++)F[V]=Math.floor(Math.random()*u)-s;B(null,a.a.create(F))};function h(k){return k+C&-C}function A(k){if(k.algorithm==="aes"&&k.mode==="cbc"){if(k.keyLength===128||k.keyLength===256)return;throw new Error("Unsupported key length "+k.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function M(k){return k.replace("_","/").replace("-","+")}var x=[a.a.create([269488144,269488144,269488144,269488144],16),a.a.create([16777216],1),a.a.create([33685504],2),a.a.create([50529024],3),a.a.create([67372036],4),a.a.create([84215045,83886080],5),a.a.create([101058054,101056512],6),a.a.create([117901063,117901056],7),a.a.create([134744072,134744072],8),a.a.create([151587081,151587081,150994944],9),a.a.create([168430090,168430090,168427520],10),a.a.create([185273099,185273099,185273088],11),a.a.create([202116108,202116108,202116108],12),a.a.create([218959117,218959117,218959117,218103808],13),a.a.create([235802126,235802126,235802126,235798528],14),a.a.create([252645135,252645135,252645135,252645135],15),a.a.create([269488144,269488144,269488144,269488144],16)];function N(){}function L(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}N.CipherParams=L,N.getDefaultParams=function(k){var B;if(typeof k=="function"||typeof k=="string"){if(R.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),typeof k=="function")N.generateRandomKey(function(F){k(null,N.getDefaultParams({key:F}))});else if(typeof arguments[1]=="function")arguments[1](null,N.getDefaultParams({key:k}));else throw new Error("Invalid arguments for Crypto.getDefaultParams");return}if(!k.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof k.key=="string"?B=Object(g.parse)(M(k.key)):B=P.toWordArray(k.key);var j=new L;if(j.key=B,j.algorithm=k.algorithm||y,j.keyLength=B.words.length*(4*8),j.mode=k.mode||p,k.keyLength&&k.keyLength!==j.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+k.keyLength+" was specified, but the key actually has length "+j.keyLength);return A(j),j},N.generateRandomKey=function(k,B){arguments.length==1&&typeof k=="function"&&(B=k,k=void 0),l((k||c)/8,function(j,F){B!==void 0&&B(j?T.a.fromValues(j):null,F)})},N.getCipher=function(k){var B=k instanceof L?k:N.getDefaultParams(k);return{cipherParams:B,cipher:new _(B,f,k.iv)}};function _(k,B,j){this.algorithm=k.algorithm+"-"+String(k.keyLength)+"-"+k.mode,this.cjsAlgorithm=k.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=P.toWordArray(k.key),j&&(this.iv=P.toWordArray(j).clone()),this.blockLengthWords=B}return _.prototype.encrypt=function(k,B){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.encrypt()",""),k=P.toWordArray(k);var j=k.sigBytes,F=h(j),V=this,W=function(){V.getIv(function(G,I){if(G){B(G);return}var U=V.encryptCipher.process(k.concat(x[F-j])),D=I.concat(U);B(null,D)})};this.encryptCipher?W():this.iv?(this.encryptCipher=m.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),W()):l(C,function(G,I){if(G){B(G);return}V.encryptCipher=m.a.algo[V.cjsAlgorithm].createEncryptor(V.key,{iv:I}),V.iv=I,W()})},_.prototype.decrypt=function(k){R.a.logAction(R.a.LOG_MICRO,"CBCCipher.decrypt()",""),k=P.toWordArray(k);var B=this.blockLengthWords,j=k.words,F=a.a.create(j.slice(0,B)),V=a.a.create(j.slice(B)),W=m.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:F}),G=W.process(V),I=W.finalize();return W.reset(),I&&I.sigBytes&&G.concat(I),G},_.prototype.getIv=function(k){if(this.iv){var B=this.iv;this.iv=null,k(null,B);return}var j=this;l(C,function(F,V){if(F){k(F);return}k(null,j.encryptCipher.process(V))})},N};r.default=d},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(){var a=o,g=a.lib,v=g.WordArray,m=a.enc;m.Utf16=m.Utf16BE={stringify:function(R){for(var O=R.words,T=R.sigBytes,d=[],E=0;E<T;E+=2){var P=O[E>>>2]>>>16-E%4*8&65535;d.push(String.fromCharCode(P))}return d.join("")},parse:function(R){for(var O=R.length,T=[],d=0;d<O;d++)T[d>>>1]|=R.charCodeAt(d)<<16-d%2*16;return v.create(T,O*2)}},m.Utf16LE={stringify:function(R){for(var O=R.words,T=R.sigBytes,d=[],E=0;E<T;E+=2){var P=w(O[E>>>2]>>>16-E%4*8&65535);d.push(String.fromCharCode(P))}return d.join("")},parse:function(R){for(var O=R.length,T=[],d=0;d<O;d++)T[d>>>1]|=w(R.charCodeAt(d)<<16-d%2*16);return v.create(T,O*2)}};function w(R){return R<<8&4278255360|R>>>8&16711935}}(),o.enc.Utf16})},function(n,r,i){(function(o,a){n.exports=a(i(6),i(27))})(this,function(o){return function(a){var g=o,v=g.lib,m=v.CipherParams,w=g.enc,R=w.Hex,O=g.format;O.Hex={stringify:function(T){return T.ciphertext.toString(R)},parse:function(T){var d=R.parse(T);return m.create({ciphertext:d})}}}(),o.format.Hex})},function(n,r,i){(function(o,a){n.exports=a(i(6),i(11),i(61),i(26),i(27))})(this,function(o){return function(){var a=o,g=a.lib,v=g.BlockCipher,m=a.algo,w=[],R=[],O=[],T=[],d=[],E=[],P=[],y=[],c=[],p=[];(function(){for(var u=[],s=0;s<256;s++)s<128?u[s]=s<<1:u[s]=s<<1^283;for(var l=0,S=0,s=0;s<256;s++){var h=S^S<<1^S<<2^S<<3^S<<4;h=h>>>8^h&255^99,w[l]=h,R[h]=l;var A=u[l],M=u[A],x=u[M],N=u[h]*257^h*16843008;O[l]=N<<24|N>>>8,T[l]=N<<16|N>>>16,d[l]=N<<8|N>>>24,E[l]=N;var N=x*16843009^M*65537^A*257^l*16843008;P[h]=N<<24|N>>>8,y[h]=N<<16|N>>>16,c[h]=N<<8|N>>>24,p[h]=N,l?(l=A^u[u[u[x^A]]],S^=u[u[S]]):l=S=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],f=m.AES=v.extend({_doReset:function(){var u;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var s=this._keyPriorReset=this._key,l=s.words,S=s.sigBytes/4,h=this._nRounds=S+6,A=(h+1)*4,M=this._keySchedule=[],x=0;x<A;x++)x<S?M[x]=l[x]:(u=M[x-1],x%S?S>6&&x%S==4&&(u=w[u>>>24]<<24|w[u>>>16&255]<<16|w[u>>>8&255]<<8|w[u&255]):(u=u<<8|u>>>24,u=w[u>>>24]<<24|w[u>>>16&255]<<16|w[u>>>8&255]<<8|w[u&255],u^=C[x/S|0]<<24),M[x]=M[x-S]^u);for(var N=this._invKeySchedule=[],L=0;L<A;L++){var x=A-L;if(L%4)var u=M[x];else var u=M[x-4];L<4||x<=4?N[L]=u:N[L]=P[w[u>>>24]]^y[w[u>>>16&255]]^c[w[u>>>8&255]]^p[w[u&255]]}}},encryptBlock:function(u,s){this._doCryptBlock(u,s,this._keySchedule,O,T,d,E,w)},decryptBlock:function(u,s){var l=u[s+1];u[s+1]=u[s+3],u[s+3]=l,this._doCryptBlock(u,s,this._invKeySchedule,P,y,c,p,R);var l=u[s+1];u[s+1]=u[s+3],u[s+3]=l},_doCryptBlock:function(u,s,l,S,h,A,M,x){for(var N=this._nRounds,L=u[s]^l[0],_=u[s+1]^l[1],k=u[s+2]^l[2],B=u[s+3]^l[3],j=4,F=1;F<N;F++){var V=S[L>>>24]^h[_>>>16&255]^A[k>>>8&255]^M[B&255]^l[j++],W=S[_>>>24]^h[k>>>16&255]^A[B>>>8&255]^M[L&255]^l[j++],G=S[k>>>24]^h[B>>>16&255]^A[L>>>8&255]^M[_&255]^l[j++],I=S[B>>>24]^h[L>>>16&255]^A[_>>>8&255]^M[k&255]^l[j++];L=V,_=W,k=G,B=I}var V=(x[L>>>24]<<24|x[_>>>16&255]<<16|x[k>>>8&255]<<8|x[B&255])^l[j++],W=(x[_>>>24]<<24|x[k>>>16&255]<<16|x[B>>>8&255]<<8|x[L&255])^l[j++],G=(x[k>>>24]<<24|x[B>>>16&255]<<16|x[L>>>8&255]<<8|x[_&255])^l[j++],I=(x[B>>>24]<<24|x[L>>>16&255]<<16|x[_>>>8&255]<<8|x[k&255])^l[j++];u[s]=V,u[s+1]=W,u[s+2]=G,u[s+3]=I},keySize:256/32});a.AES=v._createHelper(f)}(),o.AES})},function(n,r,i){(function(o,a){n.exports=a(i(6))})(this,function(o){return function(a){var g=o,v=g.lib,m=v.WordArray,w=v.Hasher,R=g.algo,O=[];(function(){for(var c=0;c<64;c++)O[c]=a.abs(a.sin(c+1))*4294967296|0})();var T=R.MD5=w.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(c,p){for(var C=0;C<16;C++){var f=p+C,u=c[f];c[f]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}var s=this._hash.words,l=c[p+0],S=c[p+1],h=c[p+2],A=c[p+3],M=c[p+4],x=c[p+5],N=c[p+6],L=c[p+7],_=c[p+8],k=c[p+9],B=c[p+10],j=c[p+11],F=c[p+12],V=c[p+13],W=c[p+14],G=c[p+15],I=s[0],U=s[1],D=s[2],z=s[3];I=d(I,U,D,z,l,7,O[0]),z=d(z,I,U,D,S,12,O[1]),D=d(D,z,I,U,h,17,O[2]),U=d(U,D,z,I,A,22,O[3]),I=d(I,U,D,z,M,7,O[4]),z=d(z,I,U,D,x,12,O[5]),D=d(D,z,I,U,N,17,O[6]),U=d(U,D,z,I,L,22,O[7]),I=d(I,U,D,z,_,7,O[8]),z=d(z,I,U,D,k,12,O[9]),D=d(D,z,I,U,B,17,O[10]),U=d(U,D,z,I,j,22,O[11]),I=d(I,U,D,z,F,7,O[12]),z=d(z,I,U,D,V,12,O[13]),D=d(D,z,I,U,W,17,O[14]),U=d(U,D,z,I,G,22,O[15]),I=E(I,U,D,z,S,5,O[16]),z=E(z,I,U,D,N,9,O[17]),D=E(D,z,I,U,j,14,O[18]),U=E(U,D,z,I,l,20,O[19]),I=E(I,U,D,z,x,5,O[20]),z=E(z,I,U,D,B,9,O[21]),D=E(D,z,I,U,G,14,O[22]),U=E(U,D,z,I,M,20,O[23]),I=E(I,U,D,z,k,5,O[24]),z=E(z,I,U,D,W,9,O[25]),D=E(D,z,I,U,A,14,O[26]),U=E(U,D,z,I,_,20,O[27]),I=E(I,U,D,z,V,5,O[28]),z=E(z,I,U,D,h,9,O[29]),D=E(D,z,I,U,L,14,O[30]),U=E(U,D,z,I,F,20,O[31]),I=P(I,U,D,z,x,4,O[32]),z=P(z,I,U,D,_,11,O[33]),D=P(D,z,I,U,j,16,O[34]),U=P(U,D,z,I,W,23,O[35]),I=P(I,U,D,z,S,4,O[36]),z=P(z,I,U,D,M,11,O[37]),D=P(D,z,I,U,L,16,O[38]),U=P(U,D,z,I,B,23,O[39]),I=P(I,U,D,z,V,4,O[40]),z=P(z,I,U,D,l,11,O[41]),D=P(D,z,I,U,A,16,O[42]),U=P(U,D,z,I,N,23,O[43]),I=P(I,U,D,z,k,4,O[44]),z=P(z,I,U,D,F,11,O[45]),D=P(D,z,I,U,G,16,O[46]),U=P(U,D,z,I,h,23,O[47]),I=y(I,U,D,z,l,6,O[48]),z=y(z,I,U,D,L,10,O[49]),D=y(D,z,I,U,W,15,O[50]),U=y(U,D,z,I,x,21,O[51]),I=y(I,U,D,z,F,6,O[52]),z=y(z,I,U,D,A,10,O[53]),D=y(D,z,I,U,B,15,O[54]),U=y(U,D,z,I,S,21,O[55]),I=y(I,U,D,z,_,6,O[56]),z=y(z,I,U,D,G,10,O[57]),D=y(D,z,I,U,N,15,O[58]),U=y(U,D,z,I,V,21,O[59]),I=y(I,U,D,z,M,6,O[60]),z=y(z,I,U,D,j,10,O[61]),D=y(D,z,I,U,h,15,O[62]),U=y(U,D,z,I,k,21,O[63]),s[0]=s[0]+I|0,s[1]=s[1]+U|0,s[2]=s[2]+D|0,s[3]=s[3]+z|0},_doFinalize:function(){var c=this._data,p=c.words,C=this._nDataBytes*8,f=c.sigBytes*8;p[f>>>5]|=128<<24-f%32;var u=a.floor(C/4294967296),s=C;p[(f+64>>>9<<4)+15]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,p[(f+64>>>9<<4)+14]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,c.sigBytes=(p.length+1)*4,this._process();for(var l=this._hash,S=l.words,h=0;h<4;h++){var A=S[h];S[h]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return l},clone:function(){var c=w.clone.call(this);return c._hash=this._hash.clone(),c}});function d(c,p,C,f,u,s,l){var S=c+(p&C|~p&f)+u+l;return(S<<s|S>>>32-s)+p}function E(c,p,C,f,u,s,l){var S=c+(p&f|C&~f)+u+l;return(S<<s|S>>>32-s)+p}function P(c,p,C,f,u,s,l){var S=c+(p^C^f)+u+l;return(S<<s|S>>>32-s)+p}function y(c,p,C,f,u,s,l){var S=c+(C^(p|~f))+u+l;return(S<<s|S>>>32-s)+p}g.MD5=w._createHelper(T),g.HmacMD5=w._createHmacHelper(T)}(Math),o.MD5})},function(n,r,i){var o;Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),g=a.__importDefault(i(3)),v=a.__importStar(i(1)),m=a.__importDefault(i(8)),w=i(4),R=a.__importDefault(i(17)),O=a.__importDefault(i(15)),T=a.__importDefault(i(20)),d=a.__importDefault(i(2)),E=i(28),P=a.__importDefault(i(63)),y=i(37);function c(f){var u=f.statusCode;return u===408&&!f.code||u===400&&!f.code||u>=500&&u<=504}function p(f){var u=f.connection,s=u&&u.connectionManager.host;return s?[s].concat(m.default.getFallbackHosts(f.options)):m.default.getHosts(f.options)}var C=(o=function(){function f(u){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=p,this.options=u||{};var s=this.options.connectivityCheckUrl||m.default.connectivityCheckUrl,l=this.options.connectivityCheckParams,S=!this.options.connectivityCheckUrl;g.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(h,A,M,x,N,L,_){var k=O.default.createRequest(M,x,N,L,T.default.REQ_SEND,A&&A.options.timeouts,h);return k.once("complete",_),k.exec(),k},this.options.disableConnectivityCheck?this.checkConnectivity=function(h){h(null,!0)}:this.checkConnectivity=function(h){d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+s),this.doUri(R.default.Get,null,s,null,null,l,function(A,M,x,N,L){var _=!1;S?_=!A&&(M==null?void 0:M.replace(/\n/,""))=="yes":_=!A&&(0,y.isSuccessCode)(L),d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+_),h(null,_)})}):g.default.Config.jsonpSupported?(this.Request=function(h,A,M,x,N,L,_){var k=(0,E.createRequest)(M,x,N,L,T.default.REQ_SEND,A&&A.options.timeouts,h);return k.once("complete",_),g.default.Config.nextTick(function(){k.exec()}),k},this.options.disableConnectivityCheck?this.checkConnectivity=function(h){h(null,!0)}:this.checkConnectivity=function(h){var A=this,M=m.default.jsonpInternetUpUrl;if(this.checksInProgress){this.checksInProgress.push(h);return}this.checksInProgress=[h],d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+M);var x=new E.Request("isTheInternetUp",M,null,null,null,T.default.REQ_SEND,m.default.TIMEOUTS);x.once("complete",function(N,L){var _=!N&&L;d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+_);for(var k=0;k<A.checksInProgress.length;k++)A.checksInProgress[k](null,_);A.checksInProgress=null}),g.default.Config.nextTick(function(){x.exec()})}):g.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=P.default,this.checkConnectivity=function(h){d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+s),this.doUri(R.default.Get,null,s,null,null,null,function(A,M){var x=!A&&(M==null?void 0:M.replace(/\n/,""))=="yes";d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+x),h(null,x)})}):this.Request=function(h,A,M,x,N,L,_){_(new w.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return f.prototype.do=function(u,s,l,S,h,A,M){var x=this,N=typeof l=="function"?l:function(B){return s.baseUri(B)+l},L=s._currentFallback;if(L)if(L.validUntil>v.now()){if(!this.Request){M==null||M(new w.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(u,s,N(L.host),S,A,h,function(B){for(var j=[],F=1;F<arguments.length;F++)j[F-1]=arguments[F];if(B&&c(B)){s._currentFallback=null,x.do(u,s,l,S,h,A,M);return}M==null||M.apply(void 0,a.__spreadArray([B],j,!1))});return}else s._currentFallback=null;var _=p(s);if(_.length===1){this.doUri(u,s,N(_[0]),S,h,A,M);return}var k=function(B,j){var F=B.shift();x.doUri(u,s,N(F),S,h,A,function(V){for(var W=[],G=1;G<arguments.length;G++)W[G-1]=arguments[G];if(V&&c(V)&&B.length){k(B,!0);return}j&&(s._currentFallback={host:F,validUntil:v.now()+s.options.timeouts.fallbackRetryTimeout}),M==null||M.apply(void 0,a.__spreadArray([V],W,!1))})};k(_)},f.prototype.doUri=function(u,s,l,S,h,A,M){if(!this.Request){M(new w.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(u,s,l,S,A,h,M)},f}(),o.methods=[R.default.Get,R.default.Delete,R.default.Post,R.default.Put,R.default.Patch],o.methodsWithoutBody=[R.default.Get,R.default.Delete],o.methodsWithBody=[R.default.Post,R.default.Put,R.default.Patch],o);r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importStar(i(4)),g=o.__importDefault(i(3)),v=o.__importDefault(i(8)),m=o.__importStar(i(1)),w=i(1);function R(d,E){return!!E.get("x-ably-errorcode")}function O(d,E){if(R(d,E))return d.error&&a.default.fromValues(d.error)}function T(d,E,P,y,c,p,C){var f=new Headers(y||{}),u=d?d.toUpperCase():m.isEmptyArg(p)?"GET":"POST",s=new AbortController,l=setTimeout(function(){s.abort(),C(new a.PartialErrorInfo("Request timed out",null,408))},E?E.options.timeouts.httpRequestTimeout:v.default.TIMEOUTS.httpRequestTimeout),S={method:u,headers:f,body:p};g.default.Config.isWebworker||(S.credentials=f.has("authorization")?"include":"same-origin"),(0,w.getGlobalObject)().fetch(P+"?"+new URLSearchParams(c||{}),S).then(function(h){clearTimeout(l);var A=h.headers.get("Content-Type"),M;A&&A.indexOf("application/x-msgpack")>-1?M=h.arrayBuffer():A&&A.indexOf("application/json")>-1?M=h.json():M=h.text(),M.then(function(x){var N=!!A&&A.indexOf("application/x-msgpack")===-1;if(h.ok)C(null,x,h.headers,N,h.status);else{var L=O(x,h.headers)||new a.PartialErrorInfo("Error response received from server: "+h.status+" body was: "+g.default.Config.inspect(x),null,h.status);C(L,x,h.headers,N,h.status)}})}).catch(function(h){clearTimeout(l),C(h)})}r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(41)),g=o.__importStar(i(1)),v=g.getGlobalObject();typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function m(){var T=v.location;return!v.WebSocket||!T||!T.origin||T.origin.indexOf("http")>-1}var w=v.navigator&&v.navigator.userAgent.toString(),R=v.location&&v.location.href,O={agent:"browser",logTimestamps:!0,userAgent:w,currentUrl:R,noUpgrade:w&&!!w.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:v.WebSocket,fetchSupported:!!v.fetch,xhrSupported:v.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:typeof document<"u",allowComet:m(),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:a.default,supportsBinary:!!v.TextDecoder,preferBinary:!1,ArrayBuffer:v.ArrayBuffer,atob:v.atob,nextTick:typeof v.setImmediate<"u"?v.setImmediate.bind(v):function(T){setTimeout(T,0)},addEventListener:v.addEventListener,inspect:JSON.stringify,stringByteSize:function(T){return v.TextDecoder&&new v.TextEncoder().encode(T).length||T.length},TextEncoder:v.TextEncoder,TextDecoder:v.TextDecoder,Promise:v.Promise,getRandomValues:function(T){if(T!==void 0)return function(d,E){T.getRandomValues(d),E&&E(null)}}(v.crypto||msCrypto)};r.default=O},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),g=a.__importStar(i(1)),v="ablyjs-storage-test",m=function(){function w(){try{o.sessionStorage.setItem(v,v),o.sessionStorage.removeItem(v),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{o.localStorage.setItem(v,v),o.localStorage.removeItem(v),this.localSupported=!0}catch{this.localSupported=!1}}return w.prototype.get=function(R){return this._get(R,!1)},w.prototype.getSession=function(R){return this._get(R,!0)},w.prototype.remove=function(R){return this._remove(R,!1)},w.prototype.removeSession=function(R){return this._remove(R,!0)},w.prototype.set=function(R,O,T){return this._set(R,O,T,!1)},w.prototype.setSession=function(R,O,T){return this._set(R,O,T,!0)},w.prototype._set=function(R,O,T,d){var E={value:O};return T&&(E.expires=g.now()+T),this.storageInterface(d).setItem(R,JSON.stringify(E))},w.prototype._get=function(R,O){if(O&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!O&&!this.localSupported)throw new Error("Local Storage not supported");var T=this.storageInterface(O).getItem(R);if(!T)return null;var d=JSON.parse(T);return d.expires&&d.expires<g.now()?(this.storageInterface(O).removeItem(R),null):d.value},w.prototype._remove=function(R,O){return this.storageInterface(O).removeItem(R)},w.prototype.storageInterface=function(R){return R?o.sessionStorage:o.localStorage},w}();r.default=new m}).call(this,i(13))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),a=o.__importDefault(i(67)),g={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[a.default.XhrPolling,a.default.XhrStreaming,a.default.JsonP,a.default.WebSocket],baseTransportOrder:[a.default.XhrPolling,a.default.XhrStreaming,a.default.JsonP,a.default.WebSocket],transportPreferenceOrder:[a.default.JsonP,a.default.XhrPolling,a.default.XhrStreaming,a.default.WebSocket],upgradeTransports:[a.default.XhrStreaming,a.default.WebSocket]};r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o;(function(a){a.WebSocket="web_socket",a.Comet="comet",a.XhrStreaming="xhr_streaming",a.XhrPolling="xhr_polling",a.JsonP="jsonp"})(o||(o={})),r.default=o},function(n,r,i){i.r(r);var o=i(28),a=i.n(o),g=i(1),v=i(3),m=i.n(v),w=i(12),R=i.n(w),O=i(15),T=i.n(O),d=function(c){var p="xhr_polling";function C(f,u,s){s.stream=!1,R.a.call(this,f,u,s),this.shortName=p}return g.inherits(C,R.a),C.isAvailable=function(){return m.a.Config.xhrSupported&&m.a.Config.allowComet},C.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},C.prototype.createRequest=function(f,u,s,l,S){return T.a.createRequest(f,u,s,l,S,this.timeouts)},typeof c<"u"&&C.isAvailable()&&(c.supportedTransports[p]=C),C},E=d,P=function(c){var p="xhr_streaming";function C(f,u,s){R.a.call(this,f,u,s),this.shortName=p}return g.inherits(C,R.a),C.isAvailable=function(){return m.a.Config.xhrSupported&&m.a.Config.streamingSupported&&m.a.Config.allowComet},C.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},C.prototype.createRequest=function(f,u,s,l,S){return T.a.createRequest(f,u,s,l,S,this.timeouts)},typeof c<"u"&&C.isAvailable()&&(c.supportedTransports[p]=C),C},y=P;r.default=[a.a,E,y]}]).default})})(Mf);var ah=Mf.exports;const sh=vl(ah),lh="2.1.1";let Ti=null;class uh extends sh.Realtime.Promise{constructor(t){typeof t=="string"&&(t={key:t}),t.agents={"react-hooks":lh},super(t)}}function fh(e){return Ti||(Ti=new uh(e))}function pl(){if(!Ti)throw new Error('Ably not configured - please call configureAbly({ key: "your-api-key", clientId: "someid" });');return Ti}var mo=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function g(w){try{m(r.next(w))}catch(R){a(R)}}function v(w){try{m(r.throw(w))}catch(R){a(R)}}function m(w){w.done?o(w.value):i(w.value).then(g,v)}m((r=r.apply(e,t||[])).next())})};function ch(e,...t){const n=typeof e=="string"?pl():e.realtime||pl(),r=typeof e=="string"?e:e.channelName,i=typeof e=="string"?n.channels.get(r):n.channels.get(r,e.options),o=()=>mo(this,void 0,void 0,function*(){yield i.subscribe.apply(i,t)}),a=()=>mo(this,void 0,void 0,function*(){yield i.unsubscribe.apply(i,t),setTimeout(()=>mo(this,void 0,void 0,function*(){i.listeners.length===0&&(yield i.detach())}),2500)}),g=()=>(o(),()=>{a()});return Xt.useEffect(g,[r]),[i,n]}globalThis&&globalThis.__awaiter;const dh=function(){var e=function(){return function(){this.gravity=10,this.particle_count=75,this.particle_size=1,this.explosion_power=25,this.destroy_target=!0,this.fade=!1}}(),t=function(){function g(v){var m=this;if(this.bursts=[],this.setCount=function(w){if(typeof w!="number")throw new Error("Input must be of type 'number'");g.CONFIG.particle_count=w},this.setPower=function(w){if(typeof w!="number")throw new Error("Input must be of type 'number'");g.CONFIG.explosion_power=w},this.setSize=function(w){if(typeof w!="number")throw new Error("Input must be of type 'number'");g.CONFIG.particle_size=w},this.setFade=function(w){if(typeof w!="boolean")throw new Error("Input must be of type 'boolean'");g.CONFIG.fade=w},this.destroyTarget=function(w){if(typeof w!="boolean")throw new Error("Input must be of type 'boolean'");g.CONFIG.destroy_target=w},this.setupCanvasContext=function(){if(!g.CTX){var w=document.createElement("canvas");g.CTX=w.getContext("2d"),w.width=2*window.innerWidth,w.height=2*window.innerHeight,w.style.position="fixed",w.style.top="0",w.style.left="0",w.style.width="calc(100%)",w.style.height="calc(100%)",w.style.margin="0",w.style.padding="0",w.style.zIndex="999999999",w.style.pointerEvents="none",document.body.appendChild(w),window.addEventListener("resize",function(){w.width=2*window.innerWidth,w.height=2*window.innerHeight})}},this.setupElement=function(w){var R;m.element=document.getElementById(w),(R=m.element)===null||R===void 0||R.addEventListener("click",function(O){var T=new i(2*O.clientX,2*O.clientY);m.bursts.push(new n(T)),g.CONFIG.destroy_target&&(m.element.style.visibility="hidden")})},this.update=function(w){m.delta_time=(w-m.time)/1e3,m.time=w;for(var R=m.bursts.length-1;R>=0;R--)m.bursts[R].update(m.delta_time),m.bursts[R].particles.length==0&&m.bursts.splice(R,1);m.draw(),window.requestAnimationFrame(m.update)},!v)throw new Error("Missing id");g.CONFIG||(g.CONFIG=new e),this.time=new Date().getTime(),this.delta_time=0,this.setupCanvasContext(),this.setupElement(v),window.requestAnimationFrame(this.update)}return g.prototype.draw=function(){a.clearScreen();for(var v=0,m=this.bursts;v<m.length;v++)m[v].draw()},g}(),n=function(){function g(v){this.particles=[];for(var m=0;m<t.CONFIG.particle_count;m++)this.particles.push(new r(v))}return g.prototype.update=function(v){for(var m=this.particles.length-1;m>=0;m--)this.particles[m].update(v),this.particles[m].checkBounds()&&this.particles.splice(m,1)},g.prototype.draw=function(){for(var v=this.particles.length-1;v>=0;v--)this.particles[v].draw()},g}(),r=function(){function g(v){this.size=new i((16*Math.random()+4)*t.CONFIG.particle_size,(4*Math.random()+4)*t.CONFIG.particle_size),this.position=new i(v.x-this.size.x/2,v.y-this.size.y/2),this.velocity=o.generateVelocity(),this.rotation=360*Math.random(),this.rotation_speed=10*(Math.random()-.5),this.hue=360*Math.random(),this.opacity=100,this.lifetime=Math.random()+.25}return g.prototype.update=function(v){this.velocity.y+=t.CONFIG.gravity*(this.size.y/(10*t.CONFIG.particle_size))*v,this.velocity.x+=25*(Math.random()-.5)*v,this.velocity.y*=.98,this.velocity.x*=.98,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.rotation+=this.rotation_speed,t.CONFIG.fade&&(this.opacity-=this.lifetime)},g.prototype.checkBounds=function(){return this.position.y-2*this.size.x>2*window.innerHeight},g.prototype.draw=function(){a.drawRectangle(this.position,this.size,this.rotation,this.hue,this.opacity)},g}(),i=function(){return function(g,v){this.x=g||0,this.y=v||0}}(),o=function(){function g(){}return g.generateVelocity=function(){var v=Math.random()-.5,m=Math.random()-.7,w=Math.sqrt(v*v+m*m);return m/=w,new i((v/=w)*(Math.random()*t.CONFIG.explosion_power),m*(Math.random()*t.CONFIG.explosion_power))},g}(),a=function(){function g(){}return g.clearScreen=function(){t.CTX&&t.CTX.clearRect(0,0,2*window.innerWidth,2*window.innerHeight)},g.drawRectangle=function(v,m,w,R,O){t.CTX&&(t.CTX.save(),t.CTX.beginPath(),t.CTX.translate(v.x+m.x/2,v.y+m.y/2),t.CTX.rotate(w*Math.PI/180),t.CTX.rect(-m.x/2,-m.y/2,m.x,m.y),t.CTX.fillStyle="hsla("+R+"deg, 90%, 65%, "+O+"%)",t.CTX.fill(),t.CTX.restore())},g}();return t}();fh({key:"sT5PdQ.sS2tig:xkg2ESWJFM0pW7lmiEVI6BRGlGSXipVlANNvNBOTbOw"});const hh=()=>{const[e,t]=Xt.useState([]),[n]=ch("live-update-experiment",r=>{t(i=>[...i,r.data])});return Xt.useEffect(()=>{const r=new dh("confetti");r.setCount(75),r.setSize(1),r.setPower(25),r.setFade(!1),r.destroyTarget(!1)},[]),Xt.useEffect(()=>{if(e.length){const r=document.getElementById("confetti");if(r){const i=r.getBoundingClientRect();r.dispatchEvent(new PointerEvent("click",{clientX:i.x+i.width/2,clientY:i.y}))}}},[e]),_e.jsxs(_e.Fragment,{children:[_e.jsxs("div",{className:"m-8 border rounded p-4 max-w-lg flex justify-between mx-auto",children:[_e.jsx("div",{children:"Channel state:"}),_e.jsx("div",{className:"text-blue-500",children:n.state})]}),_e.jsxs("div",{className:"m-8 border rounded p-4 max-w-lg mx-auto",children:[e.map((r,i)=>_e.jsxs("div",{className:"mb-4 font-mono",children:["- ",r]},i)),!e.length&&_e.jsx("div",{className:"text-gray-500 text-center mb-4",children:"(Disabled  it was just an experiment.)"}),_e.jsxs("span",{className:"relative flex h-3 w-3 m-auto",children:[_e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"}),_e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),_e.jsx("div",{id:"confetti"})]})]})};yo.createRoot(document.getElementById("root")).render(_e.jsx(Xf.StrictMode,{children:_e.jsx(hh,{})}));
